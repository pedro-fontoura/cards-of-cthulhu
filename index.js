'use strict;'
const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f22:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f17(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f17.bind(this))},f17:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f8(),this.f11(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f18:function(){return this.viewport_width},f14:function(){return this.viewport.offsetHeight},f19:function(t=""){if("string"==typeof t){var s=0,i=t;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s;break}s++}}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f9:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f8:function(){this.f19(this.current_page_idx)},f5:function(){this.f19(this.current_page_idx)},f13:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f11()},f11:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f19(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f19(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f8(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f20.bind(this,s)),t.addEventListener("contextmenu",this.f10.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f10.bind(this)),t.addEventListener(s,i)},f12:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f20:function(t,s){this.f12(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f10:function(t){this.f12(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f21())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f15("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f15("Error",t)})},f2:function(t){return t.stack.split("at ").join("<br>&bull; ")},f15:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f19(this.error_page.id)}};class C0{#p108=null;#p107=1/0;#p96=1/0;#p82=1/0;#p71=1/0;#p63=null;constructor(t,s=!1){this.#p108=t,!0===s?this.#p63=this.#P24():s instanceof Node&&(this.#p63=s,this.#p63.id=this.#p108,this.#p63.classList.add("FlexBoxEntity"))}#P24(){var t=document.createElement("div");return t.id=this.#p108,t.classList.add("FlexBoxEntity"),t}M195(){return this.#p108}M94(){return[this.#p107,this.#p96]}M113(){return this.#p63}f18(){return this.#p82}f14(){return this.#p71}M187(){return this.#p107}M173(){return this.#p96}f17(t,s,i,h){this.M95(i,h),this.M174(t,s)}M95(t,s){this.#p107=t,this.#p96=s,null!==this.#p63&&(this.#p63.style.top=t+"px",this.#p63.style.left=s+"px")}M174(t,s){this.#p82=t,this.#p71=s,null!==this.#p63&&(this.#p63.style.width=t+"px",this.#p63.style.height=s+"px")}}class E3 extends C0{#p24=null;#p64=null;#p83=null;#p19=[];#p3=null;constructor(t,s,i,h,e=!1){super(t,e),this.#p24=s,this.#p64=i,this.#p83=h,e&&this.M113().classList.add("FlexBox")}M131(t,s=!0){this.#p19[s?"push":"unshift"](t),null!==this.#p3&&this.#p19.sort(this.#p3),this.M2()}M78(t){g2(this.#p19,t),this.M2()}f17(t,s,i,h){super.f17(t,s,i,h),this.M2()}M33(s,i){0<this.#p19.length&&this.#p19.forEach(t=>t.M174(s,i))}M2(){var s,i,h,e;0!==this.#p19.length&&(i=s=0,this.#p19.forEach(t=>{s+=t.f18(),i+=t.f14()}),s!==1/0)&&i!==1/0&&("row"===this.#p24?(h=this.#P4(this.#p64)(!0,"width",s),e=this.#P4(this.#p83)(!1,"height",i)):(e=this.#P4(this.#p64)(!0,"height",i),h=this.#P4(this.#p83)(!1,"width",s)),this.#p19.forEach(t=>{t.M95(e.shift(),h.shift())}))}M68(s){this.#p19.forEach(t=>s(t))}#P4(t){return"center"===t?this.#P0.bind(this):"start"===t?this.#P2.bind(this):"end"===t?this.#P3.bind(this):"evenly"===t?this.#P1.bind(this):void 0}#P5(t,s){for(var i,h="width"===s?this.M173():this.M187(),e=[],p=0;p<this.#p19.length;++p)t&&0<p&&(i=this.#p19[p-1],h+="width"===s?i.f18():i.f14()),e.push(h);return e}#P2(t,s,i){return this.#P5(t,s)}#P0(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p19.length,r="width"===s?this.f18():this.f14(),n=Math.round((r-i)/2),M=0;M<p;++M)t?e[M]+=n:(h=this.#p19[M],e[M]+=Math.round((r-("width"===s?h.f18():h.f14()))/2));return e}#P3(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p19.length,r="width"===s?this.f18():this.f14(),n=Math.round(r-i),M=0;M<p;++M)t?e[M]+=n:(h=this.#p19[M],e[M]+=r-("width"===s?h.f18():h.f14()));return e}#P1(t,s,i){for(var h=this.#P5(t,s),e=this.#p19.length,t="width"===s?this.f18():this.f14(),p=Math.round((t-i)/(e+1)),r=0;r<e;++r)h[r]+=(r+1)*p;return h}M34(t){this.#p3=t}M114(t){this.#p64=t}}function g13(t){return document.getElementById(t)}function g11(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g12(t,s){return(s=s||document).getElementsByTagName(t)}function g9(t,s=document){return s.querySelector(t)}function g10(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g14(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g5(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function QuerySeachString(t,s=null,i=!1){t=new URL(window.location).searchParams.get(t);return null===t?t=s:i&&(t=parseInt(t,10)),t}function g8(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g6(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g7(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g3(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g3(t,Math.f16(0,t.length-1))}function g4(t){return t[Math.f16(0,t.length-1)]}A0.A1={},A0.A1.f21=function(){return 0<navigator.maxTouchPoints},A0.A1.f23=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){document.fullscreenElement||!this.f21()||this.f23()||document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"})},Math.f16=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};class C3{#p51=0;#p82=0;#p71=0;#p11=!0;#p109=0;#p110=0;#p111=0;#p35=0;#p84=0;#p65=0;#p20=null;#p12=null;#p36=[];constructor(t,s,i,h=!0){this.#p51=t,this.#p82=s,this.#p71=i,this.#p11=h,this.#p84=360/this.#p51,this.#P19(),this.#P27(),this.#P15(0),this.#P14()}#P19(){this.#p20=document.createElement("div"),this.#p20.classList.add("Prism"),this.#p20.style.width=this.#p82+"px",this.#p20.style.height=this.#p71+"px",this.#p12=document.createElement("div"),this.#p12.classList.add("PrismWrapper"),this.#p20.appendChild(this.#p12);for(var t,s=0;s<this.#p51;++s)(t=document.createElement("div")).classList.add("PrismFace"),t.dataset.idx=s,this.#p36.push(t),this.#p12.appendChild(t),t.innerHTML=s}#P27(){var t=this.#p11?this.#p82:this.#p71,s=this.#p11?"Y":"X";this.#p65=this.#P25(t,this.#p51);for(var i=0;i<this.#p51;++i)this.#p36[i].style.transform=["rotate"+s+"("+-i*this.#p84+"deg)","translateZ("+this.#p65+"px)"].join(" ")}#P15(t){this.#p35=this.#P32(this.#p35+t)}#P14(){this.#p12.style.transform=["translateZ(-"+this.#p65+"px)","rotateX("+this.#p109+"deg)","rotateY("+this.#p110+"deg)","rotateZ("+this.#p111+"deg)"].join(" ")}#P25(t,s){return Math.ceil(t/(2*Math.tan(Math.PI/s)))}#P32(t){var s=this.#p51;return 0<=(t%=s)?t:t+s}#p13=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};#P33(t){this.#p109+=t*this.#p84,this.#P14()}#P34(t){this.#p110+=t*this.#p84,this.#P14()}#P35(t){var s=this.#p11;this.#p11=!0,s!==this.#p11&&(this.#p109=0,this.#p110=this.#p35*this.#p84%360,this.#P27()),this.#P34(t),this.#P15(t)}#P36(t){var s=this.#p11;this.#p11=!1,s!==this.#p11&&(this.#p110=0,this.#p109=this.#p35*this.#p84%360,this.#P27()),this.#P33(t),this.#P15(t)}M113(){return this.#p20}M44(t){return this.#p36[this.#P32(t)]}M35(){return this.#p36.concat()}M201(t=1){return this.#p11?this.#P35(t):this.#P36(t),this.#p35}M156(){return this.#p35}M157(t=0){var s,i;return(t=this.#P32(t))!==this.#p35&&(i=0<(s=t-this.#p35)?s-this.#p51:this.#p51+s,i=Math.abs(i)<Math.abs(s)?i:s,this.M201(i)),t}M45(t=!1){for(var s=-1;s=this.#p13(0,this.#p51-1),t&&s===this.#p35;);return this.M157(s)}M46(t){"number"==typeof t&&(t+="px"),this.#p20.style.perspective=t}M174(t,s){this.#p82=t,this.#p71=s,this.#p20.style.width=this.#p82+"px",this.#p20.style.height=this.#p71+"px",this.#P27(),this.#P15(0),this.#P14()}GetFaceIdx(t){return parseInt(t.dataset.idx,10)}}class E5 extends C0{#p108=null;#p97=-1;#p85=-1;#p86=-1;#p66=!0;#p52=!1;#p2=!0;#p72=!1;#p53=null;#p73=null;#p74=null;#p75=null;#p67=null;#p30=null;#p8=null;#p76=null;constructor(t,s,i){super("Card_"+t,!0),this.#p108=t,this.#p97=s.id,this.#p85=i.nr,this.#p86=s.color,this.M158(i.symbol,i.nr,s.symbol),this.M36(this.#p2)}M47(){return this.#p73}M36(t){(this.#p2=t)&&(this.M176()||this.M196())?this.#p30.classList.remove("Hidden"):this.#p30.classList.add("Hidden")}M158(t,s,i){this.#p73=document.createElement("div"),this.#p73.classList.add("CardBody"),this.#p73.classList.add("Clickable"),this.#p74=document.createElement("div"),this.#p74.classList.add("CardFace"),this.#p73.appendChild(this.#p74),this.#p75=document.createElement("div"),this.#p75.classList.add("CardBack"),this.#p73.appendChild(this.#p75),this.#p67=document.createElement("p"),this.#p67.classList.add("CardValue"),this.#p67.classList.add("CardValue"+this.#p86);var h=document.createElement("span"),t=(h.innerHTML=t,this.#p67.appendChild(h),this.#p74.appendChild(this.#p67),this.#p30=document.createElement("span"),(this.M176()||this.M196())&&(this.#p30.innerHTML=s),this.#p67.appendChild(this.#p30),this.#p8=document.createElement("span"),this.#p67.appendChild(this.#p8),this.#p76=document.createElement("p"),this.#p76.innerHTML=i,this.#p76.classList.add("CardSuit"),this.#p76.classList.add("CardSuit"+this.#p86),this.#p74.appendChild(this.#p76),this.#p66||this.#p73.classList.add("FaceDown"),this.M176()?this.#p74.classList.add("CardRoyal"):this.M177()?this.#p74.classList.add("CardJoker"):this.M196()&&this.#p74.classList.add("CardAce"),this.M113());t.classList.add("Card"),t.classList.add("CardSmooth"),t.classList.add("CardHidden"),t.appendChild(this.#p73)}M159(){return this.#p85}M175(){return this.#p97}M160(){return this.#p86}M174(t,s){super.M174(t,s),this.#p67.style.fontSize=Math.round(.3*t)+"px",this.#p67.children.length&&(this.#p67.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p76.style.fontSize=Math.round(.4*t)+"px"}M132(t){this.#p66=t,this.#p73.classList[t?"remove":"add"]("FaceDown")}M96(t){this.#p52=t,this.#p73.classList[t?"add":"remove"]("CardSelected")}M48(){return this.M96(!this.#p52),this.#p52}M69(){this.#p53=null}M97(t){this.#p53=t}M202(t){return this.#p53===t}M98(){return this.#p53}M176(){return[k35,k28,k36].includes(this.#p85)}M115(){return this.M176()}M177(){return this.#p85===k27}M196(){return this.#p85===k41}M161(){return this.#p85<=10}M162(){return this.#p66}M116(){return this.#p52}M133(t){this.M113().classList[t?"add":"remove"]("CardHidden")}M134(t){this.M113().classList[t?"add":"remove"]("CardSmooth")}M135(t){this.M113().style.zIndex=t}M79(){return this.M176()||this.M196()}M163(){return"#"+this.#p108+"="+this.#p85+"/"+k34[this.#p97]}M136(t,s=0){return this.#p72=t,this.#p67.classList[t?"add":"remove"]("Marked"),t}M164(){return this.#p72}M197(){this.M96(!1),this.M136(!1),this.M132(!1)}}class C2{#p54=null;#p37=null;#p98=null;#p99=null;#p38=null;#p39=null;#p21=null;#p14=null;#p55=null;#p56=null;#p87=null;#p100=!1;#p40=[];#p88=0;#p25=0;#p41=!1;#p26=k46;#p42=0;#p4=!1;#p6=null;#p57=null;#p15=null;#p89=0;#p43=0;constructor(){this.clicked_card=null,this.#p43=parseFloat(QuerySeachString("use_blood",0)),A0.f22(this.#P31.bind(this),this.#P37.bind(this)),A0.f7(),A0.f13(A0.PAGE_LANDSCAPE,"Rotate"),this.#p54=g13("GameViewport"),this.#p37=new C1(k39),this.#p98=new C7(g13("MenuPannel"),g13("MenuIcon")),this.#p99=new C6(k40),this.#p38=new E2,this.#p55=new E4(k17,this.onNewDie.bind(this)),this.#p56=new E1("DrawRow",7,!0),this.#p56.M114("center"),this.#p56.M84(!1),this.#p87=new C5(g13("Store"),this.M70.bind(this),this.#p43),this.#p39=this.#p38.M106(),this.#p21=this.#p38.M59(),this.#p14=this.#p38.M41(),this.#p54.appendChild(this.#p56.M113()),g5(this.#p54,this.#p38.M103()),g5(this.#p54,this.#p55.M103());for(var t,s=0;s<k45;++s)t=new E6(s),this.#p40.push(t),g5(this.#p54,t.M103());g13("Play").appendChild(this.#p37.M113()),A0.f6(window,"contextmenu",A0.f12.bind(A0)),A0.f0(g13("HomeCard"),null),A0.f0(g13("MenuIcon"),null),A0.f0(this.#p37.M47(),this.#p37),this.#p98.M103().forEach(t=>A0.f0(t,null)),A0.f0(this.#p39.M47(),this.#p39),A0.f0(this.#p21.M47(),this.#p21),A0.f0(this.#p14.M47(),this.#p14),A0.f0(this.#p56.M113(),this.#p56),this.#p55.M43().forEach(t=>{A0.f0(t,this.#p55.M5(t))}),this.#p87.M42().forEach(t=>{A0.f0(t,this.#p87)}),this.#P31(0,0),this.#p98.M205(),this.#p87.M205(),this.#P29(),window.setTimeout(()=>{A0.f11(),g13("AppViewport").classList.remove("AppInit")},62.5)}M198(t=3){for(var s;0<=t--;)s=this.#p39.M57(),this.#DrawCardsToCardRow,this.#p56.M178(s),this.M51()}#P29(){for(var t;null!==(t=this.#p99.M181());)t.M36(!1),this.#p54.appendChild(t.M113()),A0.f0(t.M47(),t),t.M133(!1),this.#p21.M178(t);for(;!this.#p21.M179();)this.#p39.M178(this.#p21.M57())}#P31(t,s){for(var i=this.#p54.offsetTop,h=this.#p54.offsetWidth,e=Math.round(h/9),p=Math.round(this.#p54.offsetHeight/5),[r,n]=this.#P20(e,p,i),M=(this.#p99.M88(r,n),this.#p37.f17(h,Math.round(n/2),0,this.#p54.offsetLeft),Math.round(6.5*e)),o=Math.round(.5*i),a=0;a<k45;++a)this.#p40[a].f17(M,p-i,o,0,e),o+=p;var l=Math.round((this.#p54.offsetWidth-M)/2);this.#p55.f17(l,4*p,0,M,l-2*i,Math.floor(4*p/6-i)),this.#p38.f17(l,4*p,0,M+l,r,n),this.#p56.f17(M,p-i,o,0),this.#p87.f17(h,Math.ceil(p+.55*i),this.#p54.offsetLeft)}#P20(t,s,i){var i=2*i,t=t-i,h=Math.round(t*k6);return s-i<h&&(h=s-i,t=Math.round(h/k6)),[t,h]}#P8(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k3*t,p=0;0<s--;)h.push(g14(p).then(t=>{i()})),p+=e;return h.push(g14(p-e+k3)),Promise.all(h)}#P7(i,h,t,e=!0){const p=[];return this.#P8(DrawCardsToCardRow_TIME_FACTOR,Math.min(t,i.M118()),t=>{var s=i.M57();h.M178(s,e),p.push(s),this.#p15.includes(s)||this.#p15.push(s)}).then(t=>Promise.resolve(p))}#P6(){this.#p99.M102(t=>t.M134(!1));const s=this.#p21;this.#p39.M39(s),this.#p14.M39(s),this.#p40.forEach(t=>t.M120(s)),this.#p56.M120(s)}#P21(){this.#P10(this.#p99.M15(),this.#p39),setTimeout(t=>this.#p99.M102(t=>t.M134(!0)),0)}#P10(t,s){for(var i;0<t.length;)(i=t.pop()).M98().M119(i),s.M178(i)}#P39(t){null===this.#p57&&this.#p37.M104(t)}#P37(t,s){return this.#p98.IsIcon(s)?this.#P11(s.id.split("_").pop()):"HomeCard"===s.id?this.#P11("Play"):void(null!==this.#p57?t===this.#p37&&this.#p57():this.#p100||this.#p41||(t instanceof E5?t.M162()||t.M202(this.#p56)?this.#P26(t):this.#P12(t.M98()):t instanceof E0?this.#P12(t):t instanceof E7?this.M117(t,s):t===this.#p87?this.onClickStoreItem(s):t===this.#p56&&this.#p25===k8&&null!==(s=this.#p56.M73())&&this.M8(s)))}M117(t,s){if(this.#p25!==k21)return this.#P39("Not on attack phase.");s===t.M47()?t.M48():(t.M150()||this.#p87.M17())&&(this.#p100=!0,t.M150()||(this.#p87.M142(),t.M149(!0)),t.M192().then(t=>this.M13(!1)))}#P11(t){"MenuIcon"===t?this.#p98.M189():"Play"===t?"Play"===A0.f4()?this.#P38():(this.#p98.M169(!0),this.#p98.M204(),A0.f19("Play")):"Home"===t?(this.#p98.M205(),this.#p98.M169(!1),A0.f19("Home")):A0.f19(t)}#P26(t){this.clicked_card=t,this.#p100||(this.#p25===k8?this.M8(t):this.#p25===k21&&(t.M196()?this.M26(t):this.M49(t)))}M0(t){t=t.M98().M195().split("_");return["Planet","Horror","Cultists"].includes(t[0])?this.#p40[parseInt(t[1],10)]:null}M49(t){var s,i,h,e=this.M0(t);return null===e?this.M7("Card is not at a cult."):t.M161()&&this.#p87.M4()?this.M71(t):this.#p26!==k46&&this.#p26!==e.M195()?this.M7("You are now attacking "+this.M99(this.#p26)+"."):t.M161()&&e.M148()?this.M7("Cultist is protected by a Horror. You may use a sacrifice."):0===(s=this.#p55.M10()).length?t.M176()?(h=(i=t.M159())===k35?"Pair of identical dice":i===k28?"3 dice run":"4 matching dice",this.#P39("Level "+(i-10)+" Horror &raquo; "+h+".")):t.M161()?this.#P39("Cultist &raquo; 1 Die | 2+ Matching Dice | 3+ Dice Run | Precision | Sacrifice"):this.M7("Select a die, or dice combination, before attacking a card."):this.M50(s,t)?(this.#p26===k46&&(this.#p26=e.M195(),e.M65(!0),this.#p87.M204()),void this.M11(e,t)):1===s.length?this.M7("Die cannot be used against this card."):this.M7("Dice combination cannot be used against this card.")}M7(t){this.#P39(t),this.#p55.M6()}M11(s,i){this.#p55.M32(),this.#p4=!0,i.M161()&&(this.#p89+=i.M159()),this.#P8(k4,1,t=>{s.M119(i),this.#p14.M178(i)}).then(t=>{if(this.#p87.M204(),this.#p55.M66()&&1===this.#p42){if(s.M124())return this.#P39("Starting 2nd attack on "+this.M99(this.#p26)+"..."),this.#p55.M67(),this.M22().then(t=>{this.#p87.M204()});this.#p55.M92(!0),this.#p100=!1}})}M99(t){if(t!==k46)return t instanceof E6&&(t=t.M195()),k34[t].toUpperCase()}M50(t,s){var i=s.M159(),h=this.#p55;return s.M161()?!!(h.M129(t,i)||h.M153(t,i)||h.M186(t,i)||h.M77(t,i)):!!s.M176()&&(i===k35?2===t.length&&0!==h.M185(t):i===k28?3===t.length&&h.M200(t):4===t.length&&0!==h.M185(t))}#P12(t){this.#p100||(t===this.#p39?null!==this.#p6?this.M27("reshuffle"):this.M24():t===this.#p21?null!==this.#p6&&this.M27("discard"):t===this.#p14&&this.#p87.M189())}#P38(){this.#p100||(this.#p100=!0,this.#p41=!1,this.#p6=null,this.#p89=0,this.#p40.forEach(t=>t.M197()),this.#p37.M205(),this.#p98.M205(),this.#p98.M121(!1),this.#p55.M197(),this.#P6(),this.#p99.M197(),this.#p99.M180(),this.#P21(),this.#p15=[],this.#p21.M168(k3),this.#p14.M168(k3),this.M165(),setTimeout(()=>{this.#p98.M121(!0),this.#p21.M168(k3),this.#p14.M168(k3)},k7*k3))}M80(){var s=k46;return this.#p40.forEach(t=>{t.M62()&&(s=t.M195())}),s}M165(){this.#p88+=1,this.#p100=!0;var t=this.M80();if(t!==k46)return this.M166(!1,k10,t);this.#p25=k31,this.#p26!==k46&&this.#p40[this.#p26].M65(!1),this.#p26=k46,this.#p42=0,this.#p4=!1,this.#p55.M67(),this.#p55.M92(!0),this.#p87.M205();var s=0;this.#p40.forEach(t=>{s+=t.M147()?1:0,t.M18()}),this.M137(s)}M137(t){if(this.#p39.M179())return this.M166(!0);this.#P7(this.#p39,this.#p56,k7+t).then(t=>{this.#p56.M73().M132(!0),this.#p25=k8,this.#p100=!1})}M8(s){if(!s.M202(this.#p56))return this.#P39("Place cards from the draw row.");this.#p100=!0,s.M196()&&this.#P7(this.#p39,this.#p56,1),this.M51().then(t=>(this.#p100=!1,s.M161()&&s.M98().M188()?this.M166(!1,k10,s.M175()):this.#p56.M179()?this.M22():void this.#p56.M73().M132(!0)))}M51(){var t=this.#p56.M85(),s=(t.M132(!0),this.#p40[t.M175()]);return t.M161()?this.M12(s,t):t.M196()?this.M21(s,t):this.M20(s,t)}M20(s,i){if(s.M75()<i.M159()-10)return this.M138(i);if(!s.M148())return this.#P8(k4,1,t=>{s.M145(i)});const h=s.M125();return h.M159()<i.M159()?this.#P8(k4,1,t=>{s.M119(h),this.#p21.M178(h)}).then(t=>{s.M145(i)}):this.#P8(k4,1,t=>{this.#p21.M178(i)})}M12(s,i){return this.#P8(k4,1,t=>{s.M123(i)})}M21(s,i){return this.#P8(k4,1,t=>{s.M146(i,this.#p88)})}M138(i){return this.#P8(k4,1,t=>{var s=i.M98();null!==s&&s.M119(i),this.#p14.M178(i)}).then(()=>{this.#p25!==k8&&this.#p87.M204()})}M22(){return this.#p100=!0,this.#p25=k13,this.#p55.M172(),this.#p55.M206().then(t=>{this.M13(t)})}M13(t=null){var s=!1===t;null!==t&&!1!==t||(t=this.#p55.M76());for(var i,h,e=0,p=0;p<t.length;++p)i=t[p],h=this.#p55.M127(i.id),1===i.value?(e+=1,h.M149(!1)):h.M149(!h.M112());e>t.length/2?this.M81(!0):s?this.#p100=!1:this.M23()}M23(){this.#p25=k21,this.#p42+=1,this.#p4=!1,this.#p87.M204(),this.M203(),this.#p100=!1}M81(t){const s=1+this.#p55.M130();var i="You suffred an injury: ";this.M199(i+=t?"to many 1s.":"no defeated targets.").then(()=>{s===k20?this.M166(!1,k5):(this.#p55.M152(),this.M165())})}M199(t){return this.#p37.M199(t),new Promise((t,s)=>{this.#p57=()=>{this.#p57=null,this.#p37.M122(),t()}})}M166(t,s=null,i=null){this.#p41=!0,this.#p100=!1,this.#p37.M122();var h="Round "+this.#p88+" &raquo; ";t?this.#p37.M105(h+"Well done! You fought with courage and wisdom."):s===k5?this.#p37.M105(h+"You suffered to many injuries and died.."):s===k10&&(this.#p40[i].M63(!0),this.#p37.M105(h+"The Cultists of "+this.M99(i)+" mannaged to summon an Elder God. Darkness reigns!"))}M24(){return this.#p25!==k21?this.#P39("Round "+this.#p88+" &raquo; Not the time to draw cards."):(this.#p87.M205(),!this.#p4&&this.M9()?this.M81(!1):void this.M165())}M9(){var s=!1;return this.#p26===k46?this.#p40.forEach(t=>{t.M124()&&(s=!0)}):s=this.#p40[this.#p26].M124(),s}onNewDie(t){var s=t.M113();this.#p54.appendChild(s),A0.f0(s,t)}onClickStoreItem(t){var s,i=this.#p14.M118(),t=this.#p87.M171(t,i,this.#p89);if(null!==t){const h=t.item_code;return h===k11?this.#P39("Requested &raquo; Alignment Control."):h===k12?this.#P39("Requested &raquo; Sacrifice."):t.status===k14?(s="Not enough resources &raquo; Needed: ",s+=t.trophies_cost+" trophies",this.#p43&&(s+=" and "+t.blood_cost+" blood"),this.#P39(s+".")):void(this.M25(h)&&(s=t.item_cost,isNaN(s)||(this.#p87.M205(),this.M207(s,h,{blood_cost:t.blood_cost,nr_trophies:i}).then(()=>{this.M53(h)}))))}}M25(t){return t===k22?this.#p25!==k21?(this.#P39("Not on attack phase."),!1):this.#p26!==k46||(this.#P39("Not attacking a cult, yet."),!1):t===k30||t===k38||(t===k23?0!==this.#p55.M130()||(this.#P39("You have no dead dice."),!1):t===k23||(t===k15?this.#p25!==k21||(this.#P39("Cannot buy artifac during attack."),!1):(this.#P39("Sorry, not implemented."),!1)))}M70(){const s=[];return this.#p40.forEach(t=>s.push(t.M19())),{round:this.#p88,attack:0===this.#p42?"No":this.#p42,attacking:this.#p26!==k46?this.M99(this.#p26):"None",funds:this.#p14.M118(),injuries:this.#p55.M130()+"/"+k20,blood:this.#p89,dead:s}}M52(){this.#p6.M96(!1),this.#p6=null}M26(t){var s;if(!t.M116())return(s=this.M0(t)).M64()!==this.#p88&&s.M124()?this.#P39("Planet is protected by Cultists and/or Horror."):this.#p87.M3()?(null!==this.#p6&&this.M52(),t.M96(!0),void(this.#p6=t)):this.#P39("Request an ALIGNMENT CONTROL from the store.");this.M52()}M71(t){if(!this.#p87.M4())return this.#P39("Request a Sacrifice from the store.");const s=this.M0(t);var i=this.#p87.M30(t),h=this.#p14.M118(),e=0;if(h<i){if(!this.#p43)return this.#p87.M60(),this.#P39("Not enough trophies to sacrifice this Cultist. Needed: "+i+".");if((e=this.#p87.M89(i,h))>this.#p89)return this.#p87.M60(),this.#P39("Not enough trophies and blood to sacrifice this Cultist. Needed: "+i+" or "+i+" + "+e+".")}return this.M207(i,k12,{card:t,blood_cost:e,nr_trophies:h}).then(()=>{this.#p89+=t.M159(),this.M53(k12,{card:t,cult:s})})}M27(t){const s=this.M0(this.#p6);var i=s.M64()===this.#p88,i=this.#p87.M31(t,i),h=this.#p14.M118(),e=0;if(h<i){if(!this.#p43)return this.M52(),this.#p87.M61(),this.#P39("Not enough trophies to "+t+" planet. Needed: "+i+".");if((e=this.#p87.M89(i,h))>this.#p89)return this.#p87.M61(),this.#P39("Not enough trophies and blood to "+t+" planet. Needed: "+i+" or "+i+" + "+e+".")}return this.M207(i,k11,{action:"discard"===t?"destroy":"return",suit:this.#p6.M175(),blood_cost:e,nr_trophies:h}).then(()=>{this.M53(k11,{action:t,cult:s})})}M207(t,s,i=null){var h,e,p=i.nr_trophies,r="";return p<t?(e=i.blood_cost,this.#p89-=e,0<(t=p)&&(r=p+" trophies and "),r+=e+" blood"):r=t+" trophies",r="Paying "+r+" ",s===k12?(h=k0,this.#P39(r+"to sacrifice "+i.card.M159()+" of "+this.M99(i.card.M175())+".")):s===k11?(h=k1,this.#P39(r+"to "+i.action+" Planet of "+this.M99(i.suit)+".")):(h=k2,this.#P39(r+"for store item: "+this.#p87.M107(s)+".")),this.#P8(h,t,()=>{this.#p21.M178(this.#p14.M57())})}M53(t,s=null){if(t===k38){const i=this.#p55.M128();return this.#p25===k21?(i.M182(!1),i.M206().then(t=>{this.#p87.M204(),i.M149(1!==t),this.M13(!1)})):i.M182(!0),i}if(t===k22)return this.#p26!==k46&&this.#p40[this.#p26].M65(!1),this.#p26=k46,this.#p42=0,this.#p55.M67(),this.#p87.M204(),this.M22().then(()=>{});if(t===k30)return this.#p87.M141(),null;if(t===k23){const h=this.#p55.M155();return this.#p25===k21?(h.M182(!1),h.M206().then(t=>{this.#p87.M204(),h.M149(1!==t),this.M13(!1)})):h.M182(!0),h}if(t===k15)return this.#p55.M151().M182(!0);if(t!==k11)return t===k12?(this.#p87.M90(),this.#p4=!0,this.#P8(k4,1,()=>{s.cult.M119(s.card),this.#p21.M178(s.card),this.#p87.M204()}),s.card):void 0;{const e=this.#p6;return s.cult.M119(e),this.M52(),this.#p87.M91(),"reshuffle"===s.action?this.#P8(k4,1,()=>{this.#p39.M178(e)}).then(()=>{this.#p39.M83()}):"discard"===s.action&&this.#P8(k4,1,()=>{this.#p21.M178(e)}),e}}M203(){var s,h;null!==this.#p15&&(console.debug("Help >> Round:",this.#p88),s=Array([],[],[],[]),this.#p15.forEach(t=>s[t.M175()].push(t.M159())),h=0,s.forEach(t=>{var s=this.M99(h++)[0],i=(s+=" = ",!1);t.sort((t,s)=>s-t),t.forEach(t=>{t===k41?s+=t+" |":(t<=10&&(i||(i=!0,s+=" |")),s+=" "+t)}),console.debug(s)}))}}class E0 extends E3{#p108=null;#p44=[];#p90=0;#p16=!1;#p101=null;#p45=null;constructor(t){super(t,"column","center","center",!0),this.#p108=t,this.#p101=new C0(this.#p108+"_Base",!0),this.M131(this.#p101);t=this.#p101.M113();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p45=document.createElement("p"),this.#p45.classList.add("Hidden"),t.appendChild(this.#p45)}M54(){return this.#p101.M113()}M167(){return g7(this.#p44)}M55(t){this.#p16=t,0<this.#p44.length&&this.#p44[this.#p44.length-1].M132(t)}M56(t,s){this.M33(t,s),this.M2(),this.#P9(),this.#p45.style.fontSize=Math.round(.12*t)+"px"}#P9(){const[s,i]=this.#p101.M94();this.#p44.forEach(t=>t.M95(s,i))}M72(){var s=1;this.#p44.forEach(t=>t.M135(s++))}M168(t){this.#p90=t}M82(t){this.M178(t,!0)}M37(t){this.M178(t,!1)}M178(t,s=!0){var i,h;this.#p44.includes(t)||(this.#p44[s?"push":"unshift"](t),[i,h]=this.#p101.M94(),t.M96(!1),t.M132(!1),t.M95(i,h),s?t.M135(100+this.#p44.length):t.M135(0),t.M97(this),g14(this.#p90).then(t=>{this.#p45.innerHTML=this.#p44.length,this.M72(),this.M14()}))}M38(){return this.#p101.M94()}M57(){var t;return 0===this.#p44.length?null:((t=this.#p44.pop()).M135(100+this.#p44.length),t.M133(!1),this.M14(),this.#p45.innerHTML=this.#p44.length,t)}M14(){var t=this.#p44.length-1;if(0<=t){var s=this.#p44[t];for(s.M133(!1),s.M132(this.#p16),--t;0<=t;--t)(s=this.#p44[t]).M133(!0),s.M132(!1)}}M179(){return 0===this.#p44.length}M118(){return this.#p44.length}M119(t){if(this.#p44.includes(t))return g2(this.#p44,t),t.M133(!1),this.#p45.innerHTML=this.#p44.length,this.M14(),t}M100(t){this.#p45.classList[t?"remove":"add"]("Hidden"),t&&(this.#p45.innerHTML=this.#p44.length)}M39(t){for(var s;0<this.#p44.length;)s=this.#p44[0],this.M119(s),t.M178(s)}M47(){return this.#p101.M113()}M83(){1<this.#p44.length&&(g6(this.#p44),this.M72(),this.M14())}M139(t){this.M113().classList[t?"add":"remove"]("Highlight")}}class E1 extends E3{#p108=null;#p46=0;#p44=[];#p27=!0;constructor(t,s,i=!1){super(t,"row","evenly","center",!0),this.#p108=t,this.#p46=s,i&&null!==this.M113()&&this.M113().classList.add("Clickable")}M84(t){this.#p27=t}M178(t,s=!0){if(this.#p44.length!==this.#p46&&!this.#p44.includes(t))return t.M97(this),t.M132(this.#p27),t.M135(100+this.#p44.length),s?this.#p44.push(t):this.#p44.unshift(t),this.M131(t,s),t}M119(t){if(this.#p44.includes(t))return g2(this.#p44,t),this.M78(t),t.M69(),t}M120(t){for(var s;0<this.#p44.length;)s=this.#p44[0],this.M119(s),t.M178(s)}M28(t){return this.#p44.filter(t)}M29(){return this.#p44.filter(t=>t.M116())}M1(){this.#p44.filter(t=>t.M116()).forEach(t=>t.M96(!1))}M118(){return this.#p44.length}M167(){return g7(this.#p44)}M101(t){return 0!==this.#p44.length&&this.#p44[0]===t}M73(){return 0===this.#p44.length?null:this.#p44[0]}M85(){return 0===this.#p44.length?null:this.M119(this.#p44[0])}M179(){return 0===this.#p44.length}M188(){return this.#p44.length===this.#p46}}class C6{#p44=[];#p15=[];#p47=0;#p28=0;constructor(t,s=null){this.#p47=t,this.#P30(),null!==s&&this.DiscardCards(s)}#P30(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M87(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E5(h++,{id:p,symbol:this.M74(p),color:i},{nr:s,symbol:this.M58(s)}),this.#p44.push(t),this.#p28+=1;for(var r=0,n=1;n<=this.#p47;++n)t=new E5(h++,{id:k33,symbol:this.M74(k33),color:e[r]},{nr:k27,symbol:this.M58(k27)}),this.#p44.push(t),this.#p28+=1,r=(1+r)%e.length}M86(t){if(!(0<this.#p15.length))return t=this.#p44.filter(t),this.#p28-=t.length,t.forEach(t=>{g2(this.#p44,t)}),t}f17(s,i){this.M102(t=>t.M174(s,i))}M102(t){this.#p44.forEach(t),this.#p15.forEach(t)}M180(){g6(this.#p44)}M181(){var t;return 0===this.#p44.length?null:(t=g0(this.#p44),this.#p15.push(t),t)}M197(){for(;this.#p15.length;)this.#p44.push(this.#p15.pop());this.#p44.forEach(t=>t.M197())}M74(s){return k43.filter(t=>t.id===s).pop().symbol}M87(s){return k43.filter(t=>t.id===s).pop().color}M58(s){return s===k27||11<=s&&s<=13||s===k41?k37.filter(t=>t.value===s).pop().symbol:s}M88(s,i){this.M102(t=>t.M174(s,i))}M28(t){t=this.#p44.filter(t);return t.forEach(t=>{g2(this.#p44,t),this.#p15.push(t)}),t}M118(){return this.#p44.length}M40(){return this.#p28}M15(){for(var t=[];0<this.#p44.length;){var s=this.#p44.pop();this.#p15.push(s),t.push(s)}return t}}class C7{#p63=null;#p102=null;#lst_elements=null;constructor(t,s){this.#p63=t,this.#p102=s,this.#lst_elements=Array.from(t.children),this.#p102.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M103(){return g7(this.#lst_elements)}M204(){this.#p63.style.right=0}M205(){this.#p63.style.right=-1.1*this.#p63.offsetWidth+"px"}M189(){"0px"===this.#p63.style.right?this.M205():this.M204()}M169(t=!0){this.#p102.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M121(t){g13("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p63=null;#p91=null;#p103=null;#p48=0;#p92=0;#p93=!1;constructor(t){this.#p63=document.createElement("div"),this.#p63.id="Messenger",this.#p91=document.createElement("p"),this.#p63.appendChild(this.#p91),this.#p103=document.createElement("div"),this.#p103.classList.add("Clickable"),this.#p103.classList.add("Hidden"),this.#p63.appendChild(this.#p103),this.#p48=t<1e3?1e3*t:t}M113(){return this.#p63}M47(){return this.#p103}f17(t,s,i,h){this.#p63.style.width=t+"px",this.#p63.style.height=s+"px",this.#p63.style.left=h+"px",this.#p91.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M205()}M205(){this.#p93,this.#p63.style.top=-1.1*this.#p63.offsetHeight+"px",this.#p93&&(this.#p93=!1,setTimeout(()=>{this.#p103.classList.add("Hidden")},500))}M16(t,s){0<this.#p48&&this.M104("<span>"+t+"</span>: "+s)}M104(t){this.#p93||0<this.#p48&&(clearTimeout(this.#p92),this.#p92=setTimeout(this.M205.bind(this),this.#p48),this.#p91.innerHTML=t,this.#p63.style.top=0)}M105(t){clearTimeout(this.#p92),this.#p91.innerHTML=t,this.#p63.style.top=0}M199(t){clearTimeout(this.#p92),this.#p93=!0,this.#p103.classList.remove("Hidden"),this.M105(t)}M122(){this.#p93&&(this.#p93=!1,this.#p103.classList.add("Hidden"),this.M205())}}class E2 extends E3{#p104=null;#p68=null;#p58=null;constructor(){super("PilesRow","column","evenly","center",!0),this.#p104=new E0("Draw"),this.#p68=new E0("Discard"),this.#p58=new E0("Trophies"),this.#p104.M100(!0),this.#p68.M100(!0),this.#p58.M100(!0),this.M131(this.#p104),this.M131(this.#p68),this.M131(this.#p58)}f17(t,s,i,h,e,p){super.f17(t,s,i,h),this.M33(t,s/3),this.M2(),this.M68(t=>{t instanceof E0&&t.M56(e,p)})}M106(){return this.#p104}M59(){return this.#p68}M41(){return this.#p58}M103(){return[this.M113(),this.#p104.M113(),this.#p68.M113(),this.#p58.M113(),this.#p104.M54(),this.#p68.M54(),this.#p58.M54()]}}class C4{#p63=null;#p94=0;#p29=0;#p9=0;constructor(t){this.#p63=t}M197(){this.#p94=0,this.#p29=0,this.#p9=0,this.#P28()}M190(t,s,i){"cec"===t?(this.#p94+=s.M159(),s.M79()&&(this.#p29+=1,this.#p9+=s.M159())):"ecc"!==t&&"stc"!==t||i.forEach(t=>this.#p94-=t.M159()),this.#P28()}#P28(){g13("txt_score").innerHTML=this.#p94,g13("txt_nr_captures").innerHTML=this.#p29,g13("txt_percent_captures").innerHTML=Math.round(this.#p9/MAX_CAPTURES_VALUE*100)}M170(){return this.#p94}}const k14=-1,k44=0,k38=1,k30=2,k22=3,k23=4,k15=5,k11=6,k12=7,k24=[{id:"sacrifice",txt:"Sacrifice",cost:"cultist",code:k12},{id:"alignment_control",txt:"Alignment Control",cost:"R=2/4 D=5/10",code:k11},{id:"spirit_die",txt:"Spirit Die",cost:2,code:k38},{id:"devils_luck",txt:"Devil's Luck",cost:3,code:k30},{id:"time_shift",txt:"Time Shift",cost:5,code:k22},{id:"grow_flesh",txt:"Grow Flesh",cost:5,code:k23},{id:"buy_artifact",txt:"Buy Artifact",cost:10,code:k15}];class C5{#p108=null;#p63=null;#p77=null;#p69=!0;#p5=0;#p49=null;#p0=!1;#p1=!1;#p43=0;constructor(t,s,i){this.#p63=t,this.#p108=t.id,this.#p49=s,this.#p43=i,this.M140()}M107(t){return this.#P16(t).txt.toUpperCase()}f17(t,s,i){this.#p63.style.width=t+"px",this.#p63.style.height=s+"px",this.#p63.style.left=i+"px",this.#p63.style.fontSize=Math.round(.015*t)+"px"}M140(){this.#p77=document.createElement("header"),this.#p63.appendChild(this.#p77);var t,s=[{id:"round",txt:"Round"},{id:"attack*",txt:"Attack"},{id:"injuries",txt:"Injuries"},{id:"info",txt:"Info"}];this.#p43&&s.push({id:"blood",txt:"Blood"});for(t of s){var i=document.createElement("span");i.innerHTML=t.txt+":",this.#p77.appendChild(i),(i=document.createElement("span")).id="store_"+t.id,i.classList.add("StoreInfo"),this.#p77.appendChild(i)}var e=0;k24.forEach(t=>{var s,i=document.createElement("div");i.id=t.id,i.dataset.idx=e++,i.classList.add("Clickable");for(s of["txt","cost"]){var h=document.createElement("txt"===s?"p":"span");h.innerHTML=t[s],i.appendChild(h)}this.#p63.appendChild(i)})}#P28(){var t,s=this.#p49();for(t in s){var i=g13("store_"+t);null!==i&&(i.innerHTML=s[t])}return g13("store_attack*").innerHTML=s.attack+"/"+s.attacking,g13("store_info").innerHTML=s.dead.join(" "),s.funds}M42(){return Array.from(g12("div",this.#p63))}M204(){this.#p69=!0,this.#p63.style.bottom="";const i=this.#P28();k24.forEach(t=>{var s;"number"==typeof t.cost&&(s=g11("span",g13(t.id)),t=t.cost<=i,s.classList[t?"remove":"add"]("NoFunds"))})}M205(){this.#p69=!1,this.#p63.style.bottom=-this.#p63.offsetHeight+"px"}M189(){this.#p69?this.M205():this.M204()}M171(t,s,i){var h,e,t=k24[t.dataset.idx];return"number"==typeof t.cost?(h=Math.max(0,t.cost-s),e=Math.round(Math.pow(this.#p43,h)),{status:(this.#p43?e<=i:t.cost<=s)?k44:k14,item_code:t.code,item_cost:t.cost,blood_cost:e,trophies_cost:t.cost-h}):t.code===k11?(this.#p0=!0,{status:k44,item_code:k11}):t.code===k12?(this.#p1=!0,{status:k44,item_code:k12}):null}M89(t,s){return Math.pow(2,Math.max(0,t-s))}M30(t){return t.M159()}M31(t,s){t="reshuffle"===t?2:5;return s||(t*=2),t}#P16(s){var t=k24.filter(t=>t.code===s);return 1!==t.length?null:t.pop()}M108(t){t=this.#P16(t);return null!==t?t.cost:NaN}M141(t=1){this.#p5+=t}M17(){return 0<this.#p5}M3(){return this.#p0}M4(){return this.#p1}M142(){0!==this.#p5&&(--this.#p5,this.M204())}M60(){this.#p1=!1}M90(){this.#p1&&(this.#p1=!1)}M61(){this.#p0=!1}M91(){this.#p0&&(this.#p0=!1)}}class E6 extends E3{#p108=null;#p63=null;#p78=null;#p79=null;#p59=null;#p22=0;#p23=!1;#p17=0;constructor(t){super("Cult_"+t,"row","start","center",!0),this.#p108=t,this.#p63=this.M113(),this.#p63.classList.add("Cult"),this.#p63.classList.add("Cult_"+t),this.#p78=new E1("Planet_"+t,1),this.#p79=new E1("Horror_"+t,1),this.#p59=new E1("Cultists_"+t,k16+k19),this.#p59.M34((t,s)=>s.M159()-t.M159()),this.#p78.M113().classList.add("Planet"),this.#p79.M113().classList.add("Horror"),this.#p59.M113().classList.add("Cultists"),this.M131(this.#p78),this.M131(this.#p79),this.M131(this.#p59)}M195(){return this.#p108}f17(t,s,i,h,e){this.#p78.M174(e,s),this.#p79.M174(e,s),this.#p59.M174(t-2*e,s),super.f17(t,s,i,h),[this.#p78,this.#p79,this.#p59].forEach(t=>t.M2())}M103(){return[this.#p63,this.#p78.M113(),this.#p79.M113(),this.#p59.M113()]}M143(){return this.#p78}M144(){return this.#p79}M109(){return this.#p59}M110(){return 0<this.#p59.M118()}M62(){return this.#p59.M118()>=k19}M75(){return this.#p59.M118()}M63(s){this.#p59.M167().forEach(t=>t.M96(s))}M64(){return this.#p22}M120(t){this.#p78.M120(t),this.#p79.M120(t),this.#p59.M120(t)}M123(t){return this.#p59.M178(t),this.#P13(),t}M197(){this.#p59.M113().classList.remove("MaxCultists"),this.#p17=0}#P13(){var t=this.#p59.M113();this.M62()?t.classList.add("MaxCultists"):t.classList.remove("MaxCultists")}M145(t){return this.#p79.M178(t)}M146(t,s){this.#p78.M178(t),this.#p22=s,t.M136(!0)}M18(){0<this.#p78.M118()&&this.#p78.M73().M136(!1)}M119(t){return t.M202(this.#p59)?this.#P17(t):t.M202(this.#p79)?this.#P23(t):t.M202(this.#p78)&&this.#P22(t),t}#P17(t){return this.#p59.M119(t),this.#P13(),this.#p17+=1,t}#P22(){return this.#p78.M179()?null:(this.#p22=0,this.#p78.M85())}#P23(){return this.#p79.M179()?null:this.#p79.M85()}M147(){return 0<this.#p78.M118()}M148(){return 0<this.#p79.M118()}M124(){return this.M148()||this.M110()}M125(){return this.#p79.M73()}M65(t){function s(t,s){t.M113().classList[s?"add":"remove"]("CultUnderAttack")}this.#p23=t,s(this.#p79,t),s(this.#p59,t)}M19(){return this.#p17}}class E7 extends C0{#p108=null;#p63=null;#p73=null;#p60=null;#p52=!1;#p85=0;#p80=!1;#p70=!1;#p61=!1;#p31=0;#p105=!1;#p106=!1;#p95=null;constructor(t){super("Die_"+t,!0),this.#p108=t,this.#p95=new C3(6,0,0),this.#p95.M35().forEach(t=>{var s=1+this.#p95.GetFaceIdx(t);1===(t.innerHTML=s)&&t.classList.add("IsOne")}),this.#p95.M46(300),this.prism=this.#p95,this.#p63=this.M113(),this.#p63.classList.add("Die"),this.#p73=document.createElement("div"),this.#p73.classList.add("DieBody"),this.#p73.classList.add("Clickable"),this.#p73.dataset.id=t,this.#p73.appendChild(this.#p95.M113()),this.#p60=document.createElement("p"),this.#p60.classList.add("Clickable"),this.#p60.dataset.id=t,this.#p63.appendChild(this.#p73),this.#p63.appendChild(this.#p60)}M174(t,s){super.M174(t,s),this.M126()}M126(){var t;0!==this.#p73.offsetHeight&&(t=Math.round(.85*this.#p73.offsetHeight),this.#p73.style.fontSize=Math.round(.5*t)+"px",this.#p60.style.fontSize=Math.round(.33*t)+"px",this.#p95.M174(t,t))}M195(){return this.#p108}M47(){return this.#p73}M42(){return[this.#p73,this.#p60]}M48(){this.M96(!this.#p52)}M116(){return this.#p52}M96(t){t&&this.#p105||(this.#p52=t,this.#p73.classList[t?"add":"remove"]("Selected"))}M182(t){return t&&(this.M96(!1),this.M149(!1)),this.#p105=t,this.#p73.classList[t?"add":"remove"]("Used"),this}M191(){return this.#p105}M149(t){this.#p80=t,this.#p60.classList[t?"remove":"add"]("Hidden"),this.#p60.innerHTML=t?"&larr; &rarr;":""}M206(){return this.M183()?(this.#p60.innerHTML="",this.#P18(!1),this.#p70=!0,this.#p85=0,new Promise((t,s)=>{this._Roll(1,t)})):Promise.reject(0)}_Roll(t,s){this.#p95.M45(!0),1===t||t<6?(t+=1,setTimeout(this._Roll.bind(this,t,s),k9)):(this.#p70=!1,this.#p85=1+this.#p95.M156(),setTimeout(()=>{this.#P18(!0),s(this.#p85)},k9))}#P18(s){this.#p95.M35().forEach(t=>{s?this.#p95.GetFaceIdx(t)!==this.#p85-1&&t.classList.add("NotFront"):t.classList.remove("NotFront")})}M192(){return this.M150()?(this.#p31+=1,this.M149(!1),this.M206()):Promise.reject(0)}M197(t=!1){this.#p85=0,this.#p31=0,this.#p70=!1,this.M149(!1),this.M96(!1),this.M111(!1),this.M182(!1),this.M184(!!t&&this.#p106)}M159(){return this.#p85}M111(t=!0){this.#p61=t,this.#p63.classList[t?"add":"remove"]("Disabled")}M183(){return!(this.#p61||this.#p52||this.#p70||this.#p105)}M150(){return this.M183()&&this.#p80}M112(){return 0<this.#p31}M184(t){this.#p106=t,this.#p60.classList[t?"add":"remove"]("Temp")}M193(){return this.#p106}}class E4 extends E3{#p62=[];#p32=0;#p10=[];#p7=[];#p18=[];#p81=0;#p33=null;#p50=0;#p34=0;constructor(t,s){super("DiceRow","column","evenly","center",!0),this.#p32=t,this.#p33=s;for(var i=0;i<t;++i)this.M194(new E7(i));this.#p81=t,this.M92(!0)}f17(t,s,i,h,e,p){this.#p50=e,this.#p34=p,this.M33(this.#p50,this.#p34),super.f17(t,s,i,h)}M103(){var t=this.#p62.map(t=>t.M113());return t.push(this.M113()),t}M43(){var s=[];return this.#p62.forEach(t=>s=s.concat(t.M42())),s}M127(s){var t=this.#p62.filter(t=>t.M195()===s);return 1===t.length?t[0]:null}M5(t){return this.#p62[parseInt(t.dataset.id,10)]}M197(){for(this.M67();0<this.#p18.length;)this.M155();for(;this.#p62.length>this.#p32;)this.M152(!1);this.M172()}M172(){this.#p62.forEach(t=>{t.M197(!0)})}M206(){const s=[];return this.#p62.forEach(t=>{t.M191()||s.push(t.M206())}),Promise.all(s).then(t=>(this.#p62.forEach(t=>{t.M149(1!==t.M159())}),Promise.resolve(this.M76())))}M76(){var s=[];return this.#p62.forEach(t=>{t.M191()||s.push({id:t.M195(),value:t.M159()})}),s}M128(){var t=this.M151();return this.#p7.push(t),t.M182(!1),t.M184(!0),t}M151(){var t;return 0<this.#p10.length?t=this.#p10.pop():(t=new E7(++this.#p81),this.#p33(t)),t.M111(!1),t.M174(this.#p50,this.#p34),this.M194(t)}M194(t){return this.M131(t),this.#p62.push(t),t.M197(),t}M152(t=!0){var s;return 0===this.#p62.length?-1:((s=this.#p62.shift()).M111(!0),this.M78(s),(t?this.#p18:this.#p10).push(s),this.#p62.length)}M10(){const s=[];return this.#p62.forEach(t=>{t.M116()&&s.push(t.M159())}),s}M129(t,s){return 1===t.length&&t[0]>=s}M185(t){if(t.length<2)return 0;for(var s=t[0],i=1;i<t.length;++i)if(t[i]!==s)return 0;return s}M200(t){if(t.length<3)return!1;for(var s=g7(t).sort(),i=0,h=1;h<s.length;++i,++h)if(s[i]+1!==s[h])return!1;return!0}M153(t,s){var i=this.M185(t);return 0!==i&&i*t.length>=s}M154(t){return t.reduce((t,s)=>t+s,0)}M186(t,s){return!!this.M200(t)&&this.M154(t)>=s}M77(t,s){return this.M154(t)===s}M92(s){this.#p62.forEach(t=>{t.M182(s)})}M93(s){this.#p62.forEach(t=>{t.M149(s)})}M32(){this.#p62.forEach(t=>{t.M116()&&t.M182(!0)})}M6(){this.#p62.forEach(t=>{t.M116()&&t.M96(!1)})}M66(){var s=!0;return this.#p62.forEach(t=>{t.M191()||(s=!1)}),s}M67(){for(;0<this.#p7.length;){var t=this.#p7.pop();g2(this.#p62,t);this.#p10.push(t),this.M78(t),t.M111(!0)}}M155(){return 0===this.#p18.length?null:this.M194(this.#p18.pop())}M130(){return this.#p18.length}}const k6=16/11,k39=5,k40=0,k4=0,k2=.25,k0=.66,k1=.25,DrawCardsToCardRow_TIME_FACTOR=1,k9=g8("DICE_ROTATE_TIME",!0),k3=g8("CARD_TRANSLATE_TIME",!0),k45=4,k19=5,k16=2,k17=3,k7=3,k20=3,k46=-1,k31=0,k8=1,k13=2,k21=3,k5=0,k10=1,k25=0,k26=1,k18=2,k32=3,k33=4,k34=["hearts","spades","diamonds","clubs","joker"],k27=0,k35=11,k28=12,k36=13,k41=14,k42="Red",k29="Black",k43=[{id:k25,symbol:"&hearts;",color:k42},{id:k26,symbol:"&spades;",color:k29},{id:k18,symbol:"&diams;",color:k42},{id:k32,symbol:"&clubs;",color:k29},{id:k33,symbol:"",color:""}],k37=[{value:k35,symbol:"J"},{value:k28,symbol:"Q"},{value:k36,symbol:"K"},{value:k41,symbol:"A"},{value:k27,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});