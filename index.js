'use strict;'
const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f22:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f17(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f17.bind(this))},f17:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f8(),this.f11(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f18:function(){return this.viewport_width},f14:function(){return this.viewport.offsetHeight},f19:function(t=""){if("string"==typeof t){var s=0,i=t;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s;break}s++}}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f9:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f8:function(){this.f19(this.current_page_idx)},f5:function(){this.f19(this.current_page_idx)},f13:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f11()},f11:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f19(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f19(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f8(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f20.bind(this,s)),t.addEventListener("contextmenu",this.f10.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f10.bind(this)),t.addEventListener(s,i)},f12:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f20:function(t,s){this.f12(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f10:function(t){this.f12(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f21())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f15("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f15("Error",t)})},f2:function(t){return t.stack.split("at ").join("<br>&bull; ")},f15:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f19(this.error_page.id)}};class C0{#p107=null;#p106=1/0;#p95=1/0;#p81=1/0;#p70=1/0;#p62=null;constructor(t,s=!1){this.#p107=t,!0===s?this.#p62=this.#P24():s instanceof Node&&(this.#p62=s,this.#p62.id=this.#p107,this.#p62.classList.add("FlexBoxEntity"))}#P24(){var t=document.createElement("div");return t.id=this.#p107,t.classList.add("FlexBoxEntity"),t}M194(){return this.#p107}M93(){return[this.#p106,this.#p95]}M112(){return this.#p62}f18(){return this.#p81}f14(){return this.#p70}M186(){return this.#p106}M172(){return this.#p95}f17(t,s,i,h){this.M94(i,h),this.M173(t,s)}M94(t,s){this.#p106=t,this.#p95=s,null!==this.#p62&&(this.#p62.style.top=t+"px",this.#p62.style.left=s+"px")}M173(t,s){this.#p81=t,this.#p70=s,null!==this.#p62&&(this.#p62.style.width=t+"px",this.#p62.style.height=s+"px")}}class E3 extends C0{#p23=null;#p63=null;#p82=null;#p18=[];#p3=null;constructor(t,s,i,h,e=!1){super(t,e),this.#p23=s,this.#p63=i,this.#p82=h,e&&this.M112().classList.add("FlexBox")}M130(t,s=!0){this.#p18[s?"push":"unshift"](t),null!==this.#p3&&this.#p18.sort(this.#p3),this.M2()}M77(t){g2(this.#p18,t),this.M2()}f17(t,s,i,h){super.f17(t,s,i,h),this.M2()}M32(s,i){0<this.#p18.length&&this.#p18.forEach(t=>t.M173(s,i))}M2(){var s,i,h,e;0!==this.#p18.length&&(i=s=0,this.#p18.forEach(t=>{s+=t.f18(),i+=t.f14()}),s!==1/0)&&i!==1/0&&("row"===this.#p23?(h=this.#P4(this.#p63)(!0,"width",s),e=this.#P4(this.#p82)(!1,"height",i)):(e=this.#P4(this.#p63)(!0,"height",i),h=this.#P4(this.#p82)(!1,"width",s)),this.#p18.forEach(t=>{t.M94(e.shift(),h.shift())}))}M67(s){this.#p18.forEach(t=>s(t))}#P4(t){return"center"===t?this.#P0.bind(this):"start"===t?this.#P2.bind(this):"end"===t?this.#P3.bind(this):"evenly"===t?this.#P1.bind(this):void 0}#P5(t,s){for(var i,h="width"===s?this.M172():this.M186(),e=[],p=0;p<this.#p18.length;++p)t&&0<p&&(i=this.#p18[p-1],h+="width"===s?i.f18():i.f14()),e.push(h);return e}#P2(t,s,i){return this.#P5(t,s)}#P0(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p18.length,r="width"===s?this.f18():this.f14(),n=Math.round((r-i)/2),M=0;M<p;++M)t?e[M]+=n:(h=this.#p18[M],e[M]+=Math.round((r-("width"===s?h.f18():h.f14()))/2));return e}#P3(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p18.length,r="width"===s?this.f18():this.f14(),n=Math.round(r-i),M=0;M<p;++M)t?e[M]+=n:(h=this.#p18[M],e[M]+=r-("width"===s?h.f18():h.f14()));return e}#P1(t,s,i){for(var h=this.#P5(t,s),e=this.#p18.length,t="width"===s?this.f18():this.f14(),p=Math.round((t-i)/(e+1)),r=0;r<e;++r)h[r]+=(r+1)*p;return h}M33(t){this.#p3=t}M113(t){this.#p63=t}}function g13(t){return document.getElementById(t)}function g11(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g12(t,s){return(s=s||document).getElementsByTagName(t)}function g9(t,s=document){return s.querySelector(t)}function g10(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g14(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g5(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function QuerySeachString(t,s=null,i=!1){t=new URL(window.location).searchParams.get(t);return null===t?t=s:i&&(t=parseInt(t,10)),t}function g8(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g6(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g7(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g3(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g3(t,Math.f16(0,t.length-1))}function g4(t){return t[Math.f16(0,t.length-1)]}A0.A1={},A0.A1.f21=function(){return 0<navigator.maxTouchPoints},A0.A1.f23=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){document.fullscreenElement||!this.f21()||this.f23()||document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"})},Math.f16=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};class C3{#p50=0;#p81=0;#p70=0;#p11=!0;#p108=0;#p109=0;#p110=0;#p34=0;#p83=0;#p64=0;#p19=null;#p12=null;#p35=[];constructor(t,s,i,h=!0){this.#p50=t,this.#p81=s,this.#p70=i,this.#p11=h,this.#p83=360/this.#p50,this.#P19(),this.#P27(),this.#P15(0),this.#P14()}#P19(){this.#p19=document.createElement("div"),this.#p19.classList.add("Prism"),this.#p19.style.width=this.#p81+"px",this.#p19.style.height=this.#p70+"px",this.#p12=document.createElement("div"),this.#p12.classList.add("PrismWrapper"),this.#p19.appendChild(this.#p12);for(var t,s=0;s<this.#p50;++s)(t=document.createElement("div")).classList.add("PrismFace"),t.dataset.idx=s,this.#p35.push(t),this.#p12.appendChild(t),t.innerHTML=s}#P27(){var t=this.#p11?this.#p81:this.#p70,s=this.#p11?"Y":"X";this.#p64=this.#P25(t,this.#p50);for(var i=0;i<this.#p50;++i)this.#p35[i].style.transform=["rotate"+s+"("+-i*this.#p83+"deg)","translateZ("+this.#p64+"px)"].join(" ")}#P15(t){this.#p34=this.#P32(this.#p34+t)}#P14(){this.#p12.style.transform=["translateZ(-"+this.#p64+"px)","rotateX("+this.#p108+"deg)","rotateY("+this.#p109+"deg)","rotateZ("+this.#p110+"deg)"].join(" ")}#P25(t,s){return Math.ceil(t/(2*Math.tan(Math.PI/s)))}#P32(t){var s=this.#p50;return 0<=(t%=s)?t:t+s}#p13=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};#P33(t){this.#p108+=t*this.#p83,this.#P14()}#P34(t){this.#p109+=t*this.#p83,this.#P14()}#P35(t){var s=this.#p11;this.#p11=!0,s!==this.#p11&&(this.#p108=0,this.#p109=this.#p34*this.#p83%360,this.#P27()),this.#P34(t),this.#P15(t)}#P36(t){var s=this.#p11;this.#p11=!1,s!==this.#p11&&(this.#p109=0,this.#p108=this.#p34*this.#p83%360,this.#P27()),this.#P33(t),this.#P15(t)}M112(){return this.#p19}M43(t){return this.#p35[this.#P32(t)]}M34(){return this.#p35.concat()}M199(t=1){return this.#p11?this.#P35(t):this.#P36(t),this.#p34}M155(){return this.#p34}M156(t=0){var s,i;return(t=this.#P32(t))!==this.#p34&&(i=0<(s=t-this.#p34)?s-this.#p50:this.#p50+s,i=Math.abs(i)<Math.abs(s)?i:s,this.M199(i)),t}M44(t=!1){for(var s=-1;s=this.#p13(0,this.#p50-1),t&&s===this.#p34;);return this.M156(s)}M45(t){"number"==typeof t&&(t+="px"),this.#p19.style.perspective=t}M173(t,s){this.#p81=t,this.#p70=s,this.#p19.style.width=this.#p81+"px",this.#p19.style.height=this.#p70+"px",this.#P27(),this.#P15(0),this.#P14()}GetFaceIdx(t){return parseInt(t.dataset.idx,10)}}class E5 extends C0{#p107=null;#p96=-1;#p84=-1;#p85=-1;#p65=!0;#p51=!1;#p2=!0;#p71=!1;#p52=null;#p72=null;#p73=null;#p74=null;#p66=null;#p29=null;#p8=null;#p75=null;constructor(t,s,i){super("Card_"+t,!0),this.#p107=t,this.#p96=s.id,this.#p84=i.nr,this.#p85=s.color,this.M157(i.symbol,i.nr,s.symbol),this.M35(this.#p2)}M46(){return this.#p72}M35(t){(this.#p2=t)&&(this.M175()||this.M195())?this.#p29.classList.remove("Hidden"):this.#p29.classList.add("Hidden")}M157(t,s,i){this.#p72=document.createElement("div"),this.#p72.classList.add("CardBody"),this.#p72.classList.add("Clickable"),this.#p73=document.createElement("div"),this.#p73.classList.add("CardFace"),this.#p72.appendChild(this.#p73),this.#p74=document.createElement("div"),this.#p74.classList.add("CardBack"),this.#p72.appendChild(this.#p74),this.#p66=document.createElement("p"),this.#p66.classList.add("CardValue"),this.#p66.classList.add("CardValue"+this.#p85);var h=document.createElement("span"),t=(h.innerHTML=t,this.#p66.appendChild(h),this.#p73.appendChild(this.#p66),this.#p29=document.createElement("span"),(this.M175()||this.M195())&&(this.#p29.innerHTML=s),this.#p66.appendChild(this.#p29),this.#p8=document.createElement("span"),this.#p66.appendChild(this.#p8),this.#p75=document.createElement("p"),this.#p75.innerHTML=i,this.#p75.classList.add("CardSuit"),this.#p75.classList.add("CardSuit"+this.#p85),this.#p73.appendChild(this.#p75),this.#p65||this.#p72.classList.add("FaceDown"),this.M175()?this.#p73.classList.add("CardRoyal"):this.M176()?this.#p73.classList.add("CardJoker"):this.M195()&&this.#p73.classList.add("CardAce"),this.M112());t.classList.add("Card"),t.classList.add("CardSmooth"),t.classList.add("CardHidden"),t.appendChild(this.#p72)}M158(){return this.#p84}M174(){return this.#p96}M159(){return this.#p85}M173(t,s){super.M173(t,s),this.#p66.style.fontSize=Math.round(.3*t)+"px",this.#p66.children.length&&(this.#p66.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p75.style.fontSize=Math.round(.4*t)+"px"}M131(t){this.#p65=t,this.#p72.classList[t?"remove":"add"]("FaceDown")}M95(t){this.#p51=t,this.#p72.classList[t?"add":"remove"]("CardSelected")}M47(){return this.M95(!this.#p51),this.#p51}M68(){this.#p52=null}M96(t){this.#p52=t}M200(t){return this.#p52===t}M97(){return this.#p52}M175(){return[k35,k28,k36].includes(this.#p84)}M114(){return this.M175()}M176(){return this.#p84===k27}M195(){return this.#p84===k41}M160(){return this.#p84<=10}M161(){return this.#p65}M115(){return this.#p51}M132(t){this.M112().classList[t?"add":"remove"]("CardHidden")}M133(t){this.M112().classList[t?"add":"remove"]("CardSmooth")}M134(t){this.M112().style.zIndex=t}M78(){return this.M175()||this.M195()}M162(){return"#"+this.#p107+"="+this.#p84+"/"+k34[this.#p96]}M135(t,s=0){return this.#p71=t,this.#p66.classList[t?"add":"remove"]("Marked"),t}M163(){return this.#p71}M196(){this.M95(!1),this.M135(!1),this.M131(!1)}}class C2{#p53=null;#p36=null;#p97=null;#p98=null;#p37=null;#p38=null;#p20=null;#p14=null;#p54=null;#p55=null;#p86=null;#p99=!1;#p39=[];#p87=0;#p24=0;#p40=!1;#p25=k46;#p41=0;#p4=!1;#p6=null;#p56=null;#p15=null;#p88=0;#p42=0;constructor(){this.clicked_card=null,this.#p42=parseFloat(QuerySeachString("use_blood",0)),A0.f22(this.#P31.bind(this),this.#P37.bind(this)),A0.f7(),A0.f13(A0.PAGE_LANDSCAPE,"Rotate"),this.#p53=g13("GameViewport"),this.#p36=new C1(k39),this.#p97=new C7(g13("MenuPannel"),g13("MenuIcon")),this.#p98=new C6(k40),this.#p37=new E2,this.#p54=new E4(k17,this.onNewDie.bind(this)),this.#p55=new E1("DrawRow",7,!0),this.#p55.M113("center"),this.#p55.M83(!1),this.#p86=new C5(g13("Store"),this.M69.bind(this),this.#p42),this.#p38=this.#p37.M105(),this.#p20=this.#p37.M58(),this.#p14=this.#p37.M40(),this.#p53.appendChild(this.#p55.M112()),g5(this.#p53,this.#p37.M102()),g5(this.#p53,this.#p54.M102());for(var t,s=0;s<k45;++s)t=new E6(s),this.#p39.push(t),g5(this.#p53,t.M102());g13("Play").appendChild(this.#p36.M112()),A0.f6(window,"contextmenu",A0.f12.bind(A0)),A0.f0(g13("HomeCard"),null),A0.f0(g13("MenuIcon"),null),A0.f0(this.#p36.M46(),this.#p36),this.#p97.M102().forEach(t=>A0.f0(t,null)),A0.f0(this.#p38.M46(),this.#p38),A0.f0(this.#p20.M46(),this.#p20),A0.f0(this.#p14.M46(),this.#p14),A0.f0(this.#p55.M112(),this.#p55),this.#p54.M42().forEach(t=>{A0.f0(t,this.#p54.M5(t))}),this.#p86.M41().forEach(t=>{A0.f0(t,this.#p86)}),this.#P31(0,0),this.#p97.M203(),this.#p86.M203(),this.#P29(),window.setTimeout(()=>{A0.f11(),g13("AppViewport").classList.remove("AppInit")},62.5)}#P29(){for(var t;null!==(t=this.#p98.M180());)t.M35(!1),this.#p53.appendChild(t.M112()),A0.f0(t.M46(),t),t.M132(!1),this.#p20.M177(t);for(;!this.#p20.M178();)this.#p38.M177(this.#p20.M56())}#P31(t,s){for(var i=this.#p53.offsetTop,h=this.#p53.offsetWidth,e=Math.round(h/9),p=Math.round(this.#p53.offsetHeight/5),[r,n]=this.#P20(e,p,i),M=(this.#p98.M87(r,n),this.#p36.f17(h,Math.round(n/2),0,this.#p53.offsetLeft),Math.round(6.5*e)),o=Math.round(.5*i),a=0;a<k45;++a)this.#p39[a].f17(M,p-i,o,0,e),o+=p;var l=Math.round((this.#p53.offsetWidth-M)/2);this.#p54.f17(l,4*p,0,M,l-2*i,Math.floor(4*p/6-i)),this.#p37.f17(l,4*p,0,M+l,r,n),this.#p55.f17(M,p-i,o,0),this.#p86.f17(h,Math.ceil(p+.55*i),this.#p53.offsetLeft)}#P20(t,s,i){var i=2*i,t=t-i,h=Math.round(t*k6);return s-i<h&&(h=s-i,t=Math.round(h/k6)),[t,h]}#P8(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k3*t,p=0;0<s--;)h.push(g14(p).then(t=>{i()})),p+=e;return h.push(g14(p-e+k3)),Promise.all(h)}#P7(i,h,t,e=!0){const p=[];return this.#P8(DrawCardsToCardRow_TIME_FACTOR,Math.min(t,i.M117()),t=>{var s=i.M56();h.M177(s,e),p.push(s),this.#p15.includes(s)||this.#p15.push(s)}).then(t=>Promise.resolve(p))}#P6(){this.#p98.M101(t=>t.M133(!1));const s=this.#p20;this.#p38.M38(s),this.#p14.M38(s),this.#p39.forEach(t=>t.M119(s)),this.#p55.M119(s)}#P21(){this.#P10(this.#p98.M15(),this.#p38),setTimeout(t=>this.#p98.M101(t=>t.M133(!0)),0)}#P10(t,s){for(var i;0<t.length;)(i=t.pop()).M97().M118(i),s.M177(i)}#P39(t){null===this.#p56&&this.#p36.M103(t)}#P37(t,s){return this.#p97.IsIcon(s)?this.#P11(s.id.split("_").pop()):"HomeCard"===s.id?this.#P11("Play"):void(null!==this.#p56?t===this.#p36&&this.#p56():this.#p99||this.#p40||(t instanceof E5?t.M161()||t.M200(this.#p55)?this.#P26(t):this.#P12(t.M97()):t instanceof E0?this.#P12(t):t instanceof E7?this.M116(t,s):t===this.#p86?this.onClickStoreItem(s):t===this.#p55&&this.#p24===k8&&null!==(s=this.#p55.M72())&&this.M8(s)))}M116(t,s){if(this.#p24!==k21)return this.#P39("Not on attack phase.");s===t.M46()?t.M47():(t.M149()||this.#p86.M17())&&(this.#p99=!0,t.M149()||(this.#p86.M141(),t.M148(!0)),t.M191().then(t=>this.M13(!1)))}#P11(t){"MenuIcon"===t?this.#p97.M188():"Play"===t?"Play"===A0.f4()?this.#P38():(this.#p97.M168(!0),this.#p97.M202(),A0.f19("Play")):"Home"===t?(this.#p97.M203(),this.#p97.M168(!1),A0.f19("Home")):A0.f19(t)}#P26(t){this.clicked_card=t,this.#p99||(this.#p24===k8?this.M8(t):this.#p24===k21&&(t.M195()?this.M25(t):this.M48(t)))}M0(t){t=t.M97().M194().split("_");return["Planet","Horror","Cultists"].includes(t[0])?this.#p39[parseInt(t[1],10)]:null}M48(t){var s,i,h,e=this.M0(t);return null===e?this.M7("Card is not at a cult."):t.M160()&&this.#p86.M4()?this.M70(t):this.#p25!==k46&&this.#p25!==e.M194()?this.M7("You are now attacking "+this.M98(this.#p25)+"."):t.M160()&&e.M147()?this.M7("Cultist is protected by a Horror. You may use a sacrifice."):0===(s=this.#p54.M10()).length?t.M175()?(h=(i=t.M158())===k35?"Pair of identical dice":i===k28?"3 dice run":"4 matching dice",this.#P39("Level "+(i-10)+" Horror &raquo; "+h+".")):t.M160()?this.#P39("Cultist &raquo; 1 Die | 2+ Matching Dice | 3+ Dice Run | Precision | Sacrifice"):this.M7("Select a die, or dice combination, before attacking a card."):this.M49(s,t)?(this.#p25===k46&&(this.#p25=e.M194(),e.M64(!0),this.#p86.M202()),void this.M11(e,t)):1===s.length?this.M7("Die cannot be used against this card."):this.M7("Dice combination cannot be used against this card.")}M7(t){this.#P39(t),this.#p54.M6()}M11(s,i){this.#p54.M31(),this.#p4=!0,i.M160()&&(this.#p88+=i.M158(),this.#p86.M202()),this.#P8(k4,1,t=>{s.M118(i),this.#p14.M177(i)}).then(t=>{if(this.#p54.M65()&&1===this.#p41){if(s.M123())return this.#P39("Starting 2nd attack on "+this.M98(this.#p25)+"..."),this.#p54.M66(),this.M21().then(t=>{this.#p86.M202()});this.#p54.M91(!0),this.#p99=!1}})}M98(t){if(t!==k46)return t instanceof E6&&(t=t.M194()),k34[t].toUpperCase()}M49(t,s){var i=s.M158(),h=this.#p54;return s.M160()?!!(h.M128(t,i)||h.M152(t,i)||h.M185(t,i)||h.M76(t,i)):!!s.M175()&&(i===k35?2===t.length&&0!==h.M184(t):i===k28?3===t.length&&h.M198(t):4===t.length&&0!==h.M184(t))}#P12(t){this.#p99||(t===this.#p38?null!==this.#p6?this.M26("reshuffle"):this.M23():t===this.#p20?null!==this.#p6&&this.M26("discard"):t===this.#p14&&this.#p86.M188())}#P38(){this.#p99||(this.#p99=!0,this.#p40=!1,this.#p6=null,this.#p88=0,this.#p39.forEach(t=>t.M196()),this.#p36.M203(),this.#p97.M203(),this.#p97.M120(!1),this.#p54.M196(),this.#P6(),this.#p98.M196(),this.#p98.M179(),this.#P21(),this.#p15=[],this.#p20.M167(k3),this.#p14.M167(k3),this.M164(),setTimeout(()=>{this.#p97.M120(!0),this.#p20.M167(k3),this.#p14.M167(k3)},k7*k3))}M79(){var s=k46;return this.#p39.forEach(t=>{t.M61()&&(s=t.M194())}),s}M164(){this.#p87+=1,this.#p99=!0;var t=this.M79();if(t!==k46)return this.M165(!1,k10,t);this.#p24=k31,this.#p25!==k46&&this.#p39[this.#p25].M64(!1),this.#p25=k46,this.#p41=0,this.#p4=!1,this.#p54.M66(),this.#p54.M91(!0),this.#p86.M203();var s=0;this.#p39.forEach(t=>{s+=t.M146()?1:0,t.M18()}),this.M136(s)}M136(t){if(this.#p38.M178())return this.M165(!0);this.#P7(this.#p38,this.#p55,k7+t).then(t=>{this.#p55.M72().M131(!0),this.#p24=k8,this.#p99=!1})}M8(s){if(!s.M200(this.#p55))return this.#P39("Place cards from the draw row.");this.#p99=!0,s.M195()&&this.#P7(this.#p38,this.#p55,1),this.M50().then(t=>(this.#p99=!1,s.M160()&&s.M97().M187()?this.M165(!1,k10,s.M174()):this.#p55.M178()?this.M21():void this.#p55.M72().M131(!0)))}M50(){var t=this.#p55.M84(),s=(t.M131(!0),this.#p39[t.M174()]);return t.M160()?this.M12(s,t):t.M195()?this.M20(s,t):this.M19(s,t)}M19(s,i){if(s.M74()<i.M158()-10)return this.M137(i);if(!s.M147())return this.#P8(k4,1,t=>{s.M144(i)});const h=s.M124();return h.M158()<i.M158()?this.#P8(k4,1,t=>{s.M118(h),this.#p20.M177(h)}).then(t=>{s.M144(i)}):this.#P8(k4,1,t=>{this.#p20.M177(i)})}M12(s,i){return this.#P8(k4,1,t=>{s.M122(i)})}M20(s,i){return this.#P8(k4,1,t=>{s.M145(i,this.#p87)})}M137(i){return this.#P8(k4,1,t=>{var s=i.M97();null!==s&&s.M118(i),this.#p14.M177(i)}).then(()=>{this.#p24!==k8&&this.#p86.M202()})}M21(){return this.#p99=!0,this.#p24=k13,this.#p54.M171(),this.#p54.M204().then(t=>{this.M13(t)})}M13(t=null){var s=!1===t;null!==t&&!1!==t||(t=this.#p54.M75());for(var i,h,e=0,p=0;p<t.length;++p)i=t[p],h=this.#p54.M126(i.id),1===i.value?(e+=1,h.M148(!1)):h.M148(!h.M111());e>t.length/2?this.M80(!0):s?this.#p99=!1:this.M22()}M22(){this.#p24=k21,this.#p41+=1,this.#p4=!1,this.#p86.M202(),this.M201(),this.#p99=!1}M80(t){const s=1+this.#p54.M129();var i="You suffred an injury: ";this.M197(i+=t?"to many 1s.":"no defeated targets.").then(()=>{s===k20?this.M165(!1,k5):(this.#p54.M151(),this.M164())})}M197(t){return this.#p36.M197(t),new Promise((t,s)=>{this.#p56=()=>{this.#p56=null,this.#p36.M121(),t()}})}M165(t,s=null,i=null){this.#p40=!0,this.#p99=!1,this.#p36.M121();var h="Round "+this.#p87+" &raquo; ";t?this.#p36.M104(h+"Well done! You fought with courage and wisdom."):s===k5?this.#p36.M104(h+"You suffered to many injuries and died.."):s===k10&&(this.#p39[i].M62(!0),this.#p36.M104(h+"The Cultists of "+this.M98(i)+" mannaged to summon an Elder God. Darkness reigns!"))}M23(){return this.#p24!==k21?this.#P39("Round "+this.#p87+" &raquo; Not the time to draw cards."):(this.#p86.M203(),!this.#p4&&this.M9()?this.M80(!1):void this.M164())}M9(){var s=!1;return this.#p25===k46?this.#p39.forEach(t=>{t.M123()&&(s=!0)}):s=this.#p39[this.#p25].M123(),s}onNewDie(t){var s=t.M112();this.#p53.appendChild(s),A0.f0(s,t)}onClickStoreItem(t){var s,i=this.#p14.M117(),t=this.#p86.M170(t,i,this.#p88);if(null!==t){const h=t.item_code;return h===k11?this.#P39("Requested &raquo; Alignment Control."):h===k12?this.#P39("Requested &raquo; Sacrifice."):t.status===k14?(s="Not enough resources &raquo; Needed: ",s+=t.trophies_cost+" trophies",this.#p42&&(s+=" and "+t.blood_cost+" blood"),this.#P39(s+".")):void(this.M24(h)&&(s=t.item_cost,isNaN(s)||(this.#p86.M203(),this.M205(s,h,{blood_cost:t.blood_cost,nr_trophies:i}).then(()=>{this.M52(h)}))))}}M24(t){return t===k22?this.#p24!==k21?(this.#P39("Not on attack phase."),!1):this.#p25!==k46||(this.#P39("Not attacking a cult, yet."),!1):t===k30||t===k38||(t===k23?0!==this.#p54.M129()||(this.#P39("You have no dead dice."),!1):t===k23||(t===k15?this.#p24!==k21||(this.#P39("Cannot buy artifac during attack."),!1):(this.#P39("Sorry, not implemented."),!1)))}M69(){return{round:this.#p87,attack:0===this.#p41?"No":this.#p41,attacking:this.#p25!==k46?this.M98(this.#p25):"None",funds:this.#p14.M117(),injuries:this.#p54.M129()+"/"+k20,blood:this.#p88}}M51(){this.#p6.M95(!1),this.#p6=null}M25(t){if(!t.M115())return this.M0(t).M123()?this.#P39("Planet is protected by Cultists and/or Horror."):this.#p86.M3()?(null!==this.#p6&&this.M51(),t.M95(!0),void(this.#p6=t)):this.#P39("Request an ALIGNMENT CONTROL from the store.");this.M51()}M70(t){if(!this.#p86.M4())return this.#P39("Request a Sacrifice from the store.");const s=this.M0(t);var i=this.#p86.M29(t),h=this.#p14.M117(),e=0;if(h<i){if(!this.#p42)return this.#p86.M59(),this.#P39("Not enough trophies to sacrifice this Cultist. Needed: "+i+".");if((e=this.#p86.M88(i,h))>this.#p88)return this.#p86.M59(),this.#P39("Not enough trophies and blood to sacrifice this Cultist. Needed: "+i+" or "+i+" + "+e+".")}return this.M205(i,k12,{card:t,blood_cost:e,nr_trophies:h}).then(()=>{this.#p88+=t.M158(),this.M52(k12,{card:t,cult:s})})}M26(t){const s=this.M0(this.#p6);var i=s.M63()===this.#p87,i=this.#p86.M30(t,i),h=this.#p14.M117(),e=0;if(h<i){if(!this.#p42)return this.M51(),this.#p86.M60(),this.#P39("Not enough trophies to "+t+" planet. Needed: "+i+".");if((e=this.#p86.M88(i,h))>this.#p88)return this.#p86.M60(),this.#P39("Not enough trophies and blood to "+t+" planet. Needed: "+i+" or "+i+" + "+e+".")}return this.M205(i,k11,{action:"discard"===t?"destroy":"return",suit:this.#p6.M174(),blood_cost:e,nr_trophies:h}).then(()=>{this.M52(k11,{action:t,cult:s})})}M205(t,s,i=null){var h,e,p=i.nr_trophies,r="";return p<t?(e=i.blood_cost,this.#p88-=e,0<(t=p)&&(r=p+" trophies and "),r+=e+" blood"):r=t+" trophies",r="Paying "+r+" ",s===k12?(h=k0,this.#P39(r+"to sacrifice "+i.card.M158()+" of "+this.M98(i.card.M174())+".")):s===k11?(h=k1,this.#P39(r+"to "+i.action+" Planet of "+this.M98(i.suit)+".")):(h=k2,this.#P39(r+"for store item: "+this.#p86.M106(s)+".")),this.#P8(h,t,()=>{this.#p20.M177(this.#p14.M56())})}M52(t,s=null){if(t===k38){const i=this.#p54.M127();return this.#p24===k21?(i.M181(!1),i.M204().then(t=>{this.#p86.M202(),i.M148(1!==t),this.M13(!1)})):i.M181(!0),i}if(t===k22)return this.#p25!==k46&&this.#p39[this.#p25].M64(!1),this.#p25=k46,this.#p41=0,this.#p54.M66(),this.#p86.M202(),this.M21().then(()=>{});if(t===k30)return this.#p86.M140(),null;if(t===k23){const h=this.#p54.M154();return this.#p24===k21?(h.M181(!1),h.M204().then(t=>{this.#p86.M202(),h.M148(1!==t),this.M13(!1)})):h.M181(!0),h}if(t===k15)return this.#p54.M150().M181(!0);if(t!==k11)return t===k12?(this.#p86.M89(),this.#p4=!0,this.#P8(k4,1,()=>{s.cult.M118(s.card),this.#p20.M177(s.card)}),s.card):void 0;{const e=this.#p6;return s.cult.M118(e),this.M51(),this.#p86.M90(),"reshuffle"===s.action?this.#P8(k4,1,()=>{this.#p38.M177(e)}).then(()=>{this.#p38.M82()}):"discard"===s.action&&this.#P8(k4,1,()=>{this.#p20.M177(e)}),e}}M201(){var s,h;null!==this.#p15&&(console.debug("Help >> Round:",this.#p87),s=Array([],[],[],[]),this.#p15.forEach(t=>s[t.M174()].push(t.M158())),h=0,s.forEach(t=>{var s=this.M98(h++)[0],i=(s+=" = ",!1);t.sort((t,s)=>s-t),t.forEach(t=>{t===k41?s+=t+" |":(t<=10&&(i||(i=!0,s+=" |")),s+=" "+t)}),console.debug(s)}))}}class E0 extends E3{#p107=null;#p43=[];#p89=0;#p16=!1;#p100=null;#p44=null;constructor(t){super(t,"column","center","center",!0),this.#p107=t,this.#p100=new C0(this.#p107+"_Base",!0),this.M130(this.#p100);t=this.#p100.M112();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p44=document.createElement("p"),this.#p44.classList.add("Hidden"),t.appendChild(this.#p44)}M53(){return this.#p100.M112()}M166(){return g7(this.#p43)}M54(t){this.#p16=t,0<this.#p43.length&&this.#p43[this.#p43.length-1].M131(t)}M55(t,s){this.M32(t,s),this.M2(),this.#P9(),this.#p44.style.fontSize=Math.round(.12*t)+"px"}#P9(){const[s,i]=this.#p100.M93();this.#p43.forEach(t=>t.M94(s,i))}M71(){var s=1;this.#p43.forEach(t=>t.M134(s++))}M167(t){this.#p89=t}M81(t){this.M177(t,!0)}M36(t){this.M177(t,!1)}M177(t,s=!0){var i,h;this.#p43.includes(t)||(this.#p43[s?"push":"unshift"](t),[i,h]=this.#p100.M93(),t.M95(!1),t.M131(!1),t.M94(i,h),s?t.M134(100+this.#p43.length):t.M134(0),t.M96(this),g14(this.#p89).then(t=>{this.#p44.innerHTML=this.#p43.length,this.M71(),this.M14()}))}M37(){return this.#p100.M93()}M56(){var t;return 0===this.#p43.length?null:((t=this.#p43.pop()).M134(100+this.#p43.length),t.M132(!1),this.M14(),this.#p44.innerHTML=this.#p43.length,t)}M14(){var t=this.#p43.length-1;if(0<=t){var s=this.#p43[t];for(s.M132(!1),s.M131(this.#p16),--t;0<=t;--t)(s=this.#p43[t]).M132(!0),s.M131(!1)}}M178(){return 0===this.#p43.length}M117(){return this.#p43.length}M118(t){if(this.#p43.includes(t))return g2(this.#p43,t),t.M132(!1),this.#p44.innerHTML=this.#p43.length,this.M14(),t}M99(t){this.#p44.classList[t?"remove":"add"]("Hidden"),t&&(this.#p44.innerHTML=this.#p43.length)}M38(t){for(var s;0<this.#p43.length;)s=this.#p43[0],this.M118(s),t.M177(s)}M46(){return this.#p100.M112()}M82(){1<this.#p43.length&&(g6(this.#p43),this.M71(),this.M14())}M138(t){this.M112().classList[t?"add":"remove"]("Highlight")}}class E1 extends E3{#p107=null;#p45=0;#p43=[];#p26=!0;constructor(t,s,i=!1){super(t,"row","evenly","center",!0),this.#p107=t,this.#p45=s,i&&null!==this.M112()&&this.M112().classList.add("Clickable")}M83(t){this.#p26=t}M177(t,s=!0){if(this.#p43.length!==this.#p45&&!this.#p43.includes(t))return t.M96(this),t.M131(this.#p26),t.M134(100+this.#p43.length),s?this.#p43.push(t):this.#p43.unshift(t),this.M130(t,s),t}M118(t){if(this.#p43.includes(t))return g2(this.#p43,t),this.M77(t),t.M68(),t}M119(t){for(var s;0<this.#p43.length;)s=this.#p43[0],this.M118(s),t.M177(s)}M27(t){return this.#p43.filter(t)}M28(){return this.#p43.filter(t=>t.M115())}M1(){this.#p43.filter(t=>t.M115()).forEach(t=>t.M95(!1))}M117(){return this.#p43.length}M166(){return g7(this.#p43)}M100(t){return 0!==this.#p43.length&&this.#p43[0]===t}M72(){return 0===this.#p43.length?null:this.#p43[0]}M84(){return 0===this.#p43.length?null:this.M118(this.#p43[0])}M178(){return 0===this.#p43.length}M187(){return this.#p43.length===this.#p45}}class C6{#p43=[];#p15=[];#p46=0;#p27=0;constructor(t,s=null){this.#p46=t,this.#P30(),null!==s&&this.DiscardCards(s)}#P30(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M86(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E5(h++,{id:p,symbol:this.M73(p),color:i},{nr:s,symbol:this.M57(s)}),this.#p43.push(t),this.#p27+=1;for(var r=0,n=1;n<=this.#p46;++n)t=new E5(h++,{id:k33,symbol:this.M73(k33),color:e[r]},{nr:k27,symbol:this.M57(k27)}),this.#p43.push(t),this.#p27+=1,r=(1+r)%e.length}M85(t){if(!(0<this.#p15.length))return t=this.#p43.filter(t),this.#p27-=t.length,t.forEach(t=>{g2(this.#p43,t)}),t}f17(s,i){this.M101(t=>t.M173(s,i))}M101(t){this.#p43.forEach(t),this.#p15.forEach(t)}M179(){g6(this.#p43)}M180(){var t;return 0===this.#p43.length?null:(t=g0(this.#p43),this.#p15.push(t),t)}M196(){for(;this.#p15.length;)this.#p43.push(this.#p15.pop());this.#p43.forEach(t=>t.M196())}M73(s){return k43.filter(t=>t.id===s).pop().symbol}M86(s){return k43.filter(t=>t.id===s).pop().color}M57(s){return s===k27||11<=s&&s<=13||s===k41?k37.filter(t=>t.value===s).pop().symbol:s}M87(s,i){this.M101(t=>t.M173(s,i))}M27(t){t=this.#p43.filter(t);return t.forEach(t=>{g2(this.#p43,t),this.#p15.push(t)}),t}M117(){return this.#p43.length}M39(){return this.#p27}M15(){for(var t=[];0<this.#p43.length;){var s=this.#p43.pop();this.#p15.push(s),t.push(s)}return t}}class C7{#p62=null;#p101=null;#lst_elements=null;constructor(t,s){this.#p62=t,this.#p101=s,this.#lst_elements=Array.from(t.children),this.#p101.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M102(){return g7(this.#lst_elements)}M202(){this.#p62.style.right=0}M203(){this.#p62.style.right=-1.1*this.#p62.offsetWidth+"px"}M188(){"0px"===this.#p62.style.right?this.M203():this.M202()}M168(t=!0){this.#p101.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M120(t){g13("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p62=null;#p90=null;#p102=null;#p47=0;#p91=0;#p92=!1;constructor(t){this.#p62=document.createElement("div"),this.#p62.id="Messenger",this.#p90=document.createElement("p"),this.#p62.appendChild(this.#p90),this.#p102=document.createElement("div"),this.#p102.classList.add("Clickable"),this.#p102.classList.add("Hidden"),this.#p62.appendChild(this.#p102),this.#p47=t<1e3?1e3*t:t}M112(){return this.#p62}M46(){return this.#p102}f17(t,s,i,h){this.#p62.style.width=t+"px",this.#p62.style.height=s+"px",this.#p62.style.left=h+"px",this.#p90.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M203()}M203(){this.#p92,this.#p62.style.top=-1.1*this.#p62.offsetHeight+"px",this.#p92&&(this.#p92=!1,setTimeout(()=>{this.#p102.classList.add("Hidden")},500))}M16(t,s){0<this.#p47&&this.M103("<span>"+t+"</span>: "+s)}M103(t){this.#p92||0<this.#p47&&(clearTimeout(this.#p91),this.#p91=setTimeout(this.M203.bind(this),this.#p47),this.#p90.innerHTML=t,this.#p62.style.top=0)}M104(t){clearTimeout(this.#p91),this.#p90.innerHTML=t,this.#p62.style.top=0}M197(t){clearTimeout(this.#p91),this.#p92=!0,this.#p102.classList.remove("Hidden"),this.M104(t)}M121(){this.#p92&&(this.#p92=!1,this.#p102.classList.add("Hidden"),this.M203())}}class E2 extends E3{#p103=null;#p67=null;#p57=null;constructor(){super("PilesRow","column","evenly","center",!0),this.#p103=new E0("Draw"),this.#p67=new E0("Discard"),this.#p57=new E0("Trophies"),this.#p103.M99(!0),this.#p67.M99(!0),this.#p57.M99(!0),this.M130(this.#p103),this.M130(this.#p67),this.M130(this.#p57)}f17(t,s,i,h,e,p){super.f17(t,s,i,h),this.M32(t,s/3),this.M2(),this.M67(t=>{t instanceof E0&&t.M55(e,p)})}M105(){return this.#p103}M58(){return this.#p67}M40(){return this.#p57}M102(){return[this.M112(),this.#p103.M112(),this.#p67.M112(),this.#p57.M112(),this.#p103.M53(),this.#p67.M53(),this.#p57.M53()]}}class C4{#p62=null;#p93=0;#p28=0;#p9=0;constructor(t){this.#p62=t}M196(){this.#p93=0,this.#p28=0,this.#p9=0,this.#P28()}M189(t,s,i){"cec"===t?(this.#p93+=s.M158(),s.M78()&&(this.#p28+=1,this.#p9+=s.M158())):"ecc"!==t&&"stc"!==t||i.forEach(t=>this.#p93-=t.M158()),this.#P28()}#P28(){g13("txt_score").innerHTML=this.#p93,g13("txt_nr_captures").innerHTML=this.#p28,g13("txt_percent_captures").innerHTML=Math.round(this.#p9/MAX_CAPTURES_VALUE*100)}M169(){return this.#p93}}const k14=-1,k44=0,k38=1,k30=2,k22=3,k23=4,k15=5,k11=6,k12=7,k24=[{id:"sacrifice",txt:"Sacrifice",cost:"cultist",code:k12},{id:"alignment_control",txt:"Alignment Control",cost:"R=2/4 D=5/10",code:k11},{id:"spirit_die",txt:"Spirit Die",cost:2,code:k38},{id:"devils_luck",txt:"Devil's Luck",cost:3,code:k30},{id:"time_shift",txt:"Time Shift",cost:5,code:k22},{id:"grow_flesh",txt:"Grow Flesh",cost:5,code:k23},{id:"buy_artifact",txt:"Buy Artifact",cost:10,code:k15}];class C5{#p107=null;#p62=null;#p76=null;#p68=!0;#p5=0;#p48=null;#p0=!1;#p1=!1;#p42=0;constructor(t,s,i){this.#p62=t,this.#p107=t.id,this.#p48=s,this.#p42=i,this.M139()}M106(t){return this.#P16(t).txt.toUpperCase()}f17(t,s,i){this.#p62.style.width=t+"px",this.#p62.style.height=s+"px",this.#p62.style.left=i+"px",this.#p62.style.fontSize=Math.round(.015*t)+"px"}M139(){this.#p76=document.createElement("header"),this.#p62.appendChild(this.#p76);var t,s=[{id:"round",txt:"Round"},{id:"attack*",txt:"Attack"},{id:"injuries",txt:"Injuries"}];this.#p42&&s.push({id:"blood",txt:"Blood"});for(t of s){var i=document.createElement("span");i.innerHTML=t.txt+":",this.#p76.appendChild(i),(i=document.createElement("span")).id="store_"+t.id,i.classList.add("StoreInfo"),this.#p76.appendChild(i)}var e=0;k24.forEach(t=>{var s,i=document.createElement("div");i.id=t.id,i.dataset.idx=e++,i.classList.add("Clickable");for(s of["txt","cost"]){var h=document.createElement("txt"===s?"p":"span");h.innerHTML=t[s],i.appendChild(h)}this.#p62.appendChild(i)})}#P28(){var t,s=this.#p48();for(t in s){var i=g13("store_"+t);null!==i&&(i.innerHTML=s[t])}return g13("store_attack*").innerHTML=s.attack+"/"+s.attacking,s.funds}M41(){return Array.from(g12("div",this.#p62))}M202(){this.#p68=!0,this.#p62.style.bottom="";const i=this.#P28();k24.forEach(t=>{var s;"number"==typeof t.cost&&(s=g11("span",g13(t.id)),t=t.cost<=i,s.classList[t?"remove":"add"]("NoFunds"))})}M203(){this.#p68=!1,this.#p62.style.bottom=-this.#p62.offsetHeight+"px"}M188(){this.#p68?this.M203():this.M202()}M170(t,s,i){var h,e,t=k24[t.dataset.idx];return"number"==typeof t.cost?(h=Math.max(0,t.cost-s),e=Math.round(Math.pow(this.#p42,h)),{status:(this.#p42?e<=i:t.cost<=s)?k44:k14,item_code:t.code,item_cost:t.cost,blood_cost:e,trophies_cost:t.cost-h}):t.code===k11?(this.#p0=!0,{status:k44,item_code:k11}):t.code===k12?(this.#p1=!0,{status:k44,item_code:k12}):null}M88(t,s){return Math.pow(2,Math.max(0,t-s))}M29(t){return t.M158()}M30(t,s){t="reshuffle"===t?2:5;return s||(t*=2),t}#P16(s){var t=k24.filter(t=>t.code===s);return 1!==t.length?null:t.pop()}M107(t){t=this.#P16(t);return null!==t?t.cost:NaN}M140(t=1){this.#p5+=t}M17(){return 0<this.#p5}M3(){return this.#p0}M4(){return this.#p1}M141(){0!==this.#p5&&(--this.#p5,this.M202())}M59(){this.#p1=!1}M89(){this.#p1&&(this.#p1=!1)}M60(){this.#p0=!1}M90(){this.#p0&&(this.#p0=!1)}}class E6 extends E3{#p107=null;#p62=null;#p77=null;#p78=null;#p58=null;#p21=0;#p22=!1;constructor(t){super("Cult_"+t,"row","start","center",!0),this.#p107=t,this.#p62=this.M112(),this.#p62.classList.add("Cult"),this.#p62.classList.add("Cult_"+t),this.#p77=new E1("Planet_"+t,1),this.#p78=new E1("Horror_"+t,1),this.#p58=new E1("Cultists_"+t,k16+k19),this.#p58.M33((t,s)=>s.M158()-t.M158()),this.#p77.M112().classList.add("Planet"),this.#p78.M112().classList.add("Horror"),this.#p58.M112().classList.add("Cultists"),this.M130(this.#p77),this.M130(this.#p78),this.M130(this.#p58)}M194(){return this.#p107}f17(t,s,i,h,e){this.#p77.M173(e,s),this.#p78.M173(e,s),this.#p58.M173(t-2*e,s),super.f17(t,s,i,h),[this.#p77,this.#p78,this.#p58].forEach(t=>t.M2())}M102(){return[this.#p62,this.#p77.M112(),this.#p78.M112(),this.#p58.M112()]}M142(){return this.#p77}M143(){return this.#p78}M108(){return this.#p58}M109(){return 0<this.#p58.M117()}M61(){return this.#p58.M117()>=k19}M74(){return this.#p58.M117()}M62(s){this.#p58.M166().forEach(t=>t.M95(s))}M63(){return this.#p21}M119(t){this.#p77.M119(t),this.#p78.M119(t),this.#p58.M119(t)}M122(t){return this.#p58.M177(t),this.#P13(),t}M196(){this.#p58.M112().classList.remove("MaxCultists")}#P13(){var t=this.#p58.M112();this.M61()?t.classList.add("MaxCultists"):t.classList.remove("MaxCultists")}M144(t){return this.#p78.M177(t)}M145(t,s){this.#p77.M177(t),this.#p21=s,t.M135(!0)}M18(){0<this.#p77.M117()&&this.#p77.M72().M135(!1)}M118(t){return t.M200(this.#p58)?this.#P17(t):t.M200(this.#p78)?this.#P23(t):t.M200(this.#p77)&&this.#P22(t),t}#P17(t){return this.#p58.M118(t),this.#P13(),t}#P22(){return this.#p77.M178()?null:(this.#p21=0,this.#p77.M84())}#P23(){return this.#p78.M178()?null:this.#p78.M84()}M146(){return 0<this.#p77.M117()}M147(){return 0<this.#p78.M117()}M123(){return this.M147()||this.M109()}M124(){return this.#p78.M72()}M64(t){function s(t,s){t.M112().classList[s?"add":"remove"]("CultUnderAttack")}this.#p22=t,s(this.#p78,t),s(this.#p58,t)}}class E7 extends C0{#p107=null;#p62=null;#p72=null;#p59=null;#p51=!1;#p84=0;#p79=!1;#p69=!1;#p60=!1;#p30=0;#p104=!1;#p105=!1;#p94=null;constructor(t){super("Die_"+t,!0),this.#p107=t,this.#p94=new C3(6,0,0),this.#p94.M34().forEach(t=>{var s=1+this.#p94.GetFaceIdx(t);1===(t.innerHTML=s)&&t.classList.add("IsOne")}),this.#p94.M45(300),this.prism=this.#p94,this.#p62=this.M112(),this.#p62.classList.add("Die"),this.#p72=document.createElement("div"),this.#p72.classList.add("DieBody"),this.#p72.classList.add("Clickable"),this.#p72.dataset.id=t,this.#p72.appendChild(this.#p94.M112()),this.#p59=document.createElement("p"),this.#p59.classList.add("Clickable"),this.#p59.dataset.id=t,this.#p62.appendChild(this.#p72),this.#p62.appendChild(this.#p59)}M173(t,s){super.M173(t,s),this.M125()}M125(){var t;0!==this.#p72.offsetHeight&&(t=Math.round(.85*this.#p72.offsetHeight),this.#p72.style.fontSize=Math.round(.5*t)+"px",this.#p59.style.fontSize=Math.round(.33*t)+"px",this.#p94.M173(t,t))}M194(){return this.#p107}M46(){return this.#p72}M41(){return[this.#p72,this.#p59]}M47(){this.M95(!this.#p51)}M115(){return this.#p51}M95(t){t&&this.#p104||(this.#p51=t,this.#p72.classList[t?"add":"remove"]("Selected"))}M181(t){return t&&(this.M95(!1),this.M148(!1)),this.#p104=t,this.#p72.classList[t?"add":"remove"]("Used"),this}M190(){return this.#p104}M148(t){this.#p79=t,this.#p59.classList[t?"remove":"add"]("Hidden"),this.#p59.innerHTML=t?"&larr; &rarr;":""}M204(){return this.M182()?(this.#p59.innerHTML="",this.#P18(!1),this.#p69=!0,this.#p84=0,new Promise((t,s)=>{this._Roll(1,t)})):Promise.reject(0)}_Roll(t,s){this.#p94.M44(!0),1===t||t<6?(t+=1,setTimeout(this._Roll.bind(this,t,s),k9)):(this.#p69=!1,this.#p84=1+this.#p94.M155(),setTimeout(()=>{this.#P18(!0),s(this.#p84)},k9))}#P18(s){this.#p94.M34().forEach(t=>{s?this.#p94.GetFaceIdx(t)!==this.#p84-1&&t.classList.add("NotFront"):t.classList.remove("NotFront")})}M191(){return this.M149()?(this.#p30+=1,this.M148(!1),this.M204()):Promise.reject(0)}M196(t=!1){this.#p84=0,this.#p30=0,this.#p69=!1,this.M148(!1),this.M95(!1),this.M110(!1),this.M181(!1),this.M183(!!t&&this.#p105)}M158(){return this.#p84}M110(t=!0){this.#p60=t,this.#p62.classList[t?"add":"remove"]("Disabled")}M182(){return!(this.#p60||this.#p51||this.#p69||this.#p104)}M149(){return this.M182()&&this.#p79}M111(){return 0<this.#p30}M183(t){this.#p105=t,this.#p59.classList[t?"add":"remove"]("Temp")}M192(){return this.#p105}}class E4 extends E3{#p61=[];#p31=0;#p10=[];#p7=[];#p17=[];#p80=0;#p32=null;#p49=0;#p33=0;constructor(t,s){super("DiceRow","column","evenly","center",!0),this.#p31=t,this.#p32=s;for(var i=0;i<t;++i)this.M193(new E7(i));this.#p80=t,this.M91(!0)}f17(t,s,i,h,e,p){this.#p49=e,this.#p33=p,this.M32(this.#p49,this.#p33),super.f17(t,s,i,h)}M102(){var t=this.#p61.map(t=>t.M112());return t.push(this.M112()),t}M42(){var s=[];return this.#p61.forEach(t=>s=s.concat(t.M41())),s}M126(s){var t=this.#p61.filter(t=>t.M194()===s);return 1===t.length?t[0]:null}M5(t){return this.#p61[parseInt(t.dataset.id,10)]}M196(){for(this.M66();0<this.#p17.length;)this.M154();for(;this.#p61.length>this.#p31;)this.M151(!1);this.M171()}M171(){this.#p61.forEach(t=>{t.M196(!0)})}M204(){const s=[];return this.#p61.forEach(t=>{t.M190()||s.push(t.M204())}),Promise.all(s).then(t=>(this.#p61.forEach(t=>{t.M148(1!==t.M158())}),Promise.resolve(this.M75())))}M75(){var s=[];return this.#p61.forEach(t=>{t.M190()||s.push({id:t.M194(),value:t.M158()})}),s}M127(){var t=this.M150();return this.#p7.push(t),t.M181(!1),t.M183(!0),t}M150(){var t;return 0<this.#p10.length?t=this.#p10.pop():(t=new E7(++this.#p80),this.#p32(t)),t.M110(!1),t.M173(this.#p49,this.#p33),this.M193(t)}M193(t){return this.M130(t),this.#p61.push(t),t.M196(),t}M151(t=!0){var s;return 0===this.#p61.length?-1:((s=this.#p61.shift()).M110(!0),this.M77(s),(t?this.#p17:this.#p10).push(s),this.#p61.length)}M10(){const s=[];return this.#p61.forEach(t=>{t.M115()&&s.push(t.M158())}),s}M128(t,s){return 1===t.length&&t[0]>=s}M184(t){if(t.length<2)return 0;for(var s=t[0],i=1;i<t.length;++i)if(t[i]!==s)return 0;return s}M198(t){if(t.length<3)return!1;for(var s=g7(t).sort(),i=0,h=1;h<s.length;++i,++h)if(s[i]+1!==s[h])return!1;return!0}M152(t,s){var i=this.M184(t);return 0!==i&&i*t.length>=s}M153(t){return t.reduce((t,s)=>t+s,0)}M185(t,s){return!!this.M198(t)&&this.M153(t)>=s}M76(t,s){return this.M153(t)===s}M91(s){this.#p61.forEach(t=>{t.M181(s)})}M92(s){this.#p61.forEach(t=>{t.M148(s)})}M31(){this.#p61.forEach(t=>{t.M115()&&t.M181(!0)})}M6(){this.#p61.forEach(t=>{t.M115()&&t.M95(!1)})}M65(){var s=!0;return this.#p61.forEach(t=>{t.M190()||(s=!1)}),s}M66(){for(;0<this.#p7.length;){var t=this.#p7.pop();g2(this.#p61,t);this.#p10.push(t),this.M77(t),t.M110(!0)}}M154(){return 0===this.#p17.length?null:this.M193(this.#p17.pop())}M129(){return this.#p17.length}}const k6=16/11,k39=5,k40=0,k4=0,k2=.25,k0=.66,k1=.25,DrawCardsToCardRow_TIME_FACTOR=1,k9=g8("DICE_ROTATE_TIME",!0),k3=g8("CARD_TRANSLATE_TIME",!0),k45=4,k19=5,k16=2,k17=3,k7=3,k20=3,k46=-1,k31=0,k8=1,k13=2,k21=3,k5=0,k10=1,k25=0,k26=1,k18=2,k32=3,k33=4,k34=["hearts","spades","diamonds","clubs","joker"],k27=0,k35=11,k28=12,k36=13,k41=14,k42="Red",k29="Black",k43=[{id:k25,symbol:"&hearts;",color:k42},{id:k26,symbol:"&spades;",color:k29},{id:k18,symbol:"&diams;",color:k42},{id:k32,symbol:"&clubs;",color:k29},{id:k33,symbol:"",color:""}],k37=[{value:k35,symbol:"J"},{value:k28,symbol:"Q"},{value:k36,symbol:"K"},{value:k41,symbol:"A"},{value:k27,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});