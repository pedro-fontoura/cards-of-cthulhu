'use strict;'
const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f22:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f17(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f17.bind(this))},f17:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f8(),this.f11(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f18:function(){return this.viewport_width},f14:function(){return this.viewport.offsetHeight},f19:function(t=""){if("string"==typeof t){var s=0,i=t;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s;break}s++}}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f9:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f8:function(){this.f19(this.current_page_idx)},f5:function(){this.f19(this.current_page_idx)},f13:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f11()},f11:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f19(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f19(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f8(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f20.bind(this,s)),t.addEventListener("contextmenu",this.f10.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f10.bind(this)),t.addEventListener(s,i)},f12:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f20:function(t,s){this.f12(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f10:function(t){this.f12(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f21())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f15("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f15("Error",t)})},f2:function(t){return t.stack.split("at ").join("<br>&bull; ")},f15:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f19(this.error_page.id)}};class C0{#p107=null;#p106=1/0;#p95=1/0;#p81=1/0;#p70=1/0;#p62=null;constructor(t,s=!1){this.#p107=t,!0===s?this.#p62=this.#P23():s instanceof Node&&(this.#p62=s,this.#p62.id=this.#p107,this.#p62.classList.add("FlexBoxEntity"))}#P23(){var t=document.createElement("div");return t.id=this.#p107,t.classList.add("FlexBoxEntity"),t}M192(){return this.#p107}M91(){return[this.#p106,this.#p95]}M110(){return this.#p62}f18(){return this.#p81}f14(){return this.#p70}M184(){return this.#p106}M170(){return this.#p95}f17(t,s,i,h){this.M92(i,h),this.M171(t,s)}M92(t,s){this.#p106=t,this.#p95=s,null!==this.#p62&&(this.#p62.style.top=t+"px",this.#p62.style.left=s+"px")}M171(t,s){this.#p81=t,this.#p70=s,null!==this.#p62&&(this.#p62.style.width=t+"px",this.#p62.style.height=s+"px")}}class E3 extends C0{#p23=null;#p63=null;#p82=null;#p18=[];#p3=null;constructor(t,s,i,h,e=!1){super(t,e),this.#p23=s,this.#p63=i,this.#p82=h,e&&this.M110().classList.add("FlexBox")}M128(t,s=!0){this.#p18[s?"push":"unshift"](t),null!==this.#p3&&this.#p18.sort(this.#p3),this.M2()}M76(t){g2(this.#p18,t),this.M2()}f17(t,s,i,h){super.f17(t,s,i,h),this.M2()}M32(s,i){0<this.#p18.length&&this.#p18.forEach(t=>t.M171(s,i))}M2(){var s,i,h,e;0!==this.#p18.length&&(i=s=0,this.#p18.forEach(t=>{s+=t.f18(),i+=t.f14()}),s!==1/0)&&i!==1/0&&("row"===this.#p23?(h=this.#P4(this.#p63)(!0,"width",s),e=this.#P4(this.#p82)(!1,"height",i)):(e=this.#P4(this.#p63)(!0,"height",i),h=this.#P4(this.#p82)(!1,"width",s)),this.#p18.forEach(t=>{t.M92(e.shift(),h.shift())}))}M66(s){this.#p18.forEach(t=>s(t))}#P4(t){return"center"===t?this.#P0.bind(this):"start"===t?this.#P2.bind(this):"end"===t?this.#P3.bind(this):"evenly"===t?this.#P1.bind(this):void 0}#P5(t,s){for(var i,h="width"===s?this.M170():this.M184(),e=[],p=0;p<this.#p18.length;++p)t&&0<p&&(i=this.#p18[p-1],h+="width"===s?i.f18():i.f14()),e.push(h);return e}#P2(t,s,i){return this.#P5(t,s)}#P0(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p18.length,r="width"===s?this.f18():this.f14(),n=Math.round((r-i)/2),M=0;M<p;++M)t?e[M]+=n:(h=this.#p18[M],e[M]+=Math.round((r-("width"===s?h.f18():h.f14()))/2));return e}#P3(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p18.length,r="width"===s?this.f18():this.f14(),n=Math.round(r-i),M=0;M<p;++M)t?e[M]+=n:(h=this.#p18[M],e[M]+=r-("width"===s?h.f18():h.f14()));return e}#P1(t,s,i){for(var h=this.#P5(t,s),e=this.#p18.length,t="width"===s?this.f18():this.f14(),p=Math.round((t-i)/(e+1)),r=0;r<e;++r)h[r]+=(r+1)*p;return h}M33(t){this.#p3=t}M111(t){this.#p63=t}}function g13(t){return document.getElementById(t)}function g11(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g12(t,s){return(s=s||document).getElementsByTagName(t)}function g9(t,s=document){return s.querySelector(t)}function g10(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g14(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g5(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function QuerySeachString(t,s=null,i=!1){t=new URL(window.location).searchParams.get(t);return null===t?t=s:i&&(t=parseInt(t,10)),t}function g8(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g6(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g7(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g3(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g3(t,Math.f16(0,t.length-1))}function g4(t){return t[Math.f16(0,t.length-1)]}A0.A1={},A0.A1.f21=function(){return 0<navigator.maxTouchPoints},A0.A1.f23=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){document.fullscreenElement||!this.f21()||this.f23()||document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"})},Math.f16=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};class C3{#p50=0;#p81=0;#p70=0;#p11=!0;#p108=0;#p109=0;#p110=0;#p34=0;#p83=0;#p64=0;#p19=null;#p12=null;#p35=[];constructor(t,s,i,h=!0){this.#p50=t,this.#p81=s,this.#p70=i,this.#p11=h,this.#p83=360/this.#p50,this.#P18(),this.#P26(),this.#P14(0),this.#P13()}#P18(){this.#p19=document.createElement("div"),this.#p19.classList.add("Prism"),this.#p19.style.width=this.#p81+"px",this.#p19.style.height=this.#p70+"px",this.#p12=document.createElement("div"),this.#p12.classList.add("PrismWrapper"),this.#p19.appendChild(this.#p12);for(var t,s=0;s<this.#p50;++s)(t=document.createElement("div")).classList.add("PrismFace"),t.dataset.idx=s,this.#p35.push(t),this.#p12.appendChild(t),t.innerHTML=s}#P26(){var t=this.#p11?this.#p81:this.#p70,s=this.#p11?"Y":"X";this.#p64=this.#P24(t,this.#p50);for(var i=0;i<this.#p50;++i)this.#p35[i].style.transform=["rotate"+s+"("+-i*this.#p83+"deg)","translateZ("+this.#p64+"px)"].join(" ")}#P14(t){this.#p34=this.#P31(this.#p34+t)}#P13(){this.#p12.style.transform=["translateZ(-"+this.#p64+"px)","rotateX("+this.#p108+"deg)","rotateY("+this.#p109+"deg)","rotateZ("+this.#p110+"deg)"].join(" ")}#P24(t,s){return Math.ceil(t/(2*Math.tan(Math.PI/s)))}#P31(t){var s=this.#p50;return 0<=(t%=s)?t:t+s}#p13=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};#P32(t){this.#p108+=t*this.#p83,this.#P13()}#P33(t){this.#p109+=t*this.#p83,this.#P13()}#P34(t){var s=this.#p11;this.#p11=!0,s!==this.#p11&&(this.#p108=0,this.#p109=this.#p34*this.#p83%360,this.#P26()),this.#P33(t),this.#P14(t)}#P35(t){var s=this.#p11;this.#p11=!1,s!==this.#p11&&(this.#p109=0,this.#p108=this.#p34*this.#p83%360,this.#P26()),this.#P32(t),this.#P14(t)}M110(){return this.#p19}M43(t){return this.#p35[this.#P31(t)]}M34(){return this.#p35.concat()}M197(t=1){return this.#p11?this.#P34(t):this.#P35(t),this.#p34}M153(){return this.#p34}M154(t=0){var s,i;return(t=this.#P31(t))!==this.#p34&&(i=0<(s=t-this.#p34)?s-this.#p50:this.#p50+s,i=Math.abs(i)<Math.abs(s)?i:s,this.M197(i)),t}M44(t=!1){for(var s=-1;s=this.#p13(0,this.#p50-1),t&&s===this.#p34;);return this.M154(s)}M45(t){"number"==typeof t&&(t+="px"),this.#p19.style.perspective=t}M171(t,s){this.#p81=t,this.#p70=s,this.#p19.style.width=this.#p81+"px",this.#p19.style.height=this.#p70+"px",this.#P26(),this.#P14(0),this.#P13()}GetFaceIdx(t){return parseInt(t.dataset.idx,10)}}class E5 extends C0{#p107=null;#p96=-1;#p84=-1;#p85=-1;#p65=!0;#p51=!1;#p2=!0;#p71=!1;#p52=null;#p72=null;#p73=null;#p74=null;#p66=null;#p29=null;#p8=null;#p75=null;constructor(t,s,i){super("Card_"+t,!0),this.#p107=t,this.#p96=s.id,this.#p84=i.nr,this.#p85=s.color,this.M155(i.symbol,i.nr,s.symbol),this.M35(this.#p2)}M46(){return this.#p72}M35(t){(this.#p2=t)&&(this.M173()||this.M193())?this.#p29.classList.remove("Hidden"):this.#p29.classList.add("Hidden")}M155(t,s,i){this.#p72=document.createElement("div"),this.#p72.classList.add("CardBody"),this.#p72.classList.add("Clickable"),this.#p73=document.createElement("div"),this.#p73.classList.add("CardFace"),this.#p72.appendChild(this.#p73),this.#p74=document.createElement("div"),this.#p74.classList.add("CardBack"),this.#p72.appendChild(this.#p74),this.#p66=document.createElement("p"),this.#p66.classList.add("CardValue"),this.#p66.classList.add("CardValue"+this.#p85);var h=document.createElement("span"),t=(h.innerHTML=t,this.#p66.appendChild(h),this.#p73.appendChild(this.#p66),this.#p29=document.createElement("span"),(this.M173()||this.M193())&&(this.#p29.innerHTML=s),this.#p66.appendChild(this.#p29),this.#p8=document.createElement("span"),this.#p66.appendChild(this.#p8),this.#p75=document.createElement("p"),this.#p75.innerHTML=i,this.#p75.classList.add("CardSuit"),this.#p75.classList.add("CardSuit"+this.#p85),this.#p73.appendChild(this.#p75),this.#p65||this.#p72.classList.add("FaceDown"),this.M173()?this.#p73.classList.add("CardRoyal"):this.M174()?this.#p73.classList.add("CardJoker"):this.M193()&&this.#p73.classList.add("CardAce"),this.M110());t.classList.add("Card"),t.classList.add("CardSmooth"),t.classList.add("CardHidden"),t.appendChild(this.#p72)}M156(){return this.#p84}M172(){return this.#p96}M157(){return this.#p85}M171(t,s){super.M171(t,s),this.#p66.style.fontSize=Math.round(.3*t)+"px",this.#p66.children.length&&(this.#p66.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p75.style.fontSize=Math.round(.4*t)+"px"}M129(t){this.#p65=t,this.#p72.classList[t?"remove":"add"]("FaceDown")}M93(t){this.#p51=t,this.#p72.classList[t?"add":"remove"]("CardSelected")}M47(){return this.M93(!this.#p51),this.#p51}M67(){this.#p52=null}M94(t){this.#p52=t}M198(t){return this.#p52===t}M95(){return this.#p52}M173(){return[k34,k27,k35].includes(this.#p84)}M112(){return this.M173()}M174(){return this.#p84===k26}M193(){return this.#p84===k40}M158(){return this.#p84<=10}M159(){return this.#p65}M113(){return this.#p51}M130(t){this.M110().classList[t?"add":"remove"]("CardHidden")}M131(t){this.M110().classList[t?"add":"remove"]("CardSmooth")}M132(t){this.M110().style.zIndex=t}M77(){return this.M173()||this.M193()}M160(){return"#"+this.#p107+"="+this.#p84+"/"+k33[this.#p96]}M133(t,s="&bull;"){this.#p71=t,this.#p8.innerHTML=t?s:""}M161(){return this.#p71}M194(){this.M93(!1),this.M133(!1),this.M129(!1)}}class C2{#p53=null;#p36=null;#p97=null;#p98=null;#p37=null;#p38=null;#p20=null;#p14=null;#p54=null;#p55=null;#p86=null;#p99=!1;#p39=[];#p87=0;#p24=0;#p40=!1;#p25=k45;#p41=0;#p4=!1;#p6=null;#p56=null;#p15=null;#p88=0;#p42=!1;constructor(){this.clicked_card=null,this.#p42=Boolean(QuerySeachString("use_blood",0,!0)),A0.f22(this.#P30.bind(this),this.#P36.bind(this)),A0.f7(),A0.f13(A0.PAGE_LANDSCAPE,"Rotate"),this.#p53=g13("GameViewport"),this.#p36=new C1(k38),this.#p97=new C7(g13("MenuPannel"),g13("MenuIcon")),this.#p98=new C6(k39),this.#p37=new E2,this.#p54=new E4(k16,this.onNewDie.bind(this)),this.#p55=new E1("DrawRow",7,!0),this.#p55.M111("center"),this.#p55.M81(!1),this.#p86=new C5(g13("Store"),this.M68.bind(this),this.#p42),this.#p38=this.#p37.M103(),this.#p20=this.#p37.M58(),this.#p14=this.#p37.M40(),this.#p53.appendChild(this.#p55.M110()),g5(this.#p53,this.#p37.M100()),g5(this.#p53,this.#p54.M100());for(var t,s=0;s<k44;++s)t=new E6(s),this.#p39.push(t),g5(this.#p53,t.M100());g13("Play").appendChild(this.#p36.M110()),A0.f6(window,"contextmenu",A0.f12.bind(A0)),A0.f0(g13("HomeCard"),null),A0.f0(g13("MenuIcon"),null),A0.f0(this.#p36.M46(),this.#p36),this.#p97.M100().forEach(t=>A0.f0(t,null)),A0.f0(this.#p38.M46(),this.#p38),A0.f0(this.#p20.M46(),this.#p20),A0.f0(this.#p14.M46(),this.#p14),A0.f0(this.#p55.M110(),this.#p55),this.#p54.M42().forEach(t=>{A0.f0(t,this.#p54.M5(t))}),this.#p86.M41().forEach(t=>{A0.f0(t,this.#p86)}),this.#P30(0,0),this.#p97.M201(),this.#p86.M201(),this.#P28(),window.setTimeout(()=>{A0.f11(),g13("AppViewport").classList.remove("AppInit")},62.5)}#P28(){for(var t;null!==(t=this.#p98.M178());)t.M35(!1),this.#p53.appendChild(t.M110()),A0.f0(t.M46(),t),t.M130(!1),this.#p20.M175(t)}#P30(t,s){for(var i=this.#p53.offsetTop,h=this.#p53.offsetWidth,e=Math.round(h/9),p=Math.round(this.#p53.offsetHeight/5),[r,n]=this.#P19(e,p,i),M=(this.#p98.M85(r,n),this.#p36.f17(h,Math.round(n/2),0,this.#p53.offsetLeft),Math.round(6.5*e)),o=Math.round(.5*i),a=0;a<k44;++a)this.#p39[a].f17(M,p-i,o,0,e),o+=p;var l=Math.round((this.#p53.offsetWidth-M)/2);this.#p54.f17(l,4*p,0,M,l-2*i,Math.floor(4*p/6-i)),this.#p37.f17(l,4*p,0,M+l,r,n),this.#p55.f17(M,p-i,o,0),this.#p86.f17(h,Math.ceil(p+.55*i),this.#p53.offsetLeft)}#P19(t,s,i){var i=2*i,t=t-i,h=Math.round(t*k6);return s-i<h&&(h=s-i,t=Math.round(h/k6)),[t,h]}#P8(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k3*t,p=0;0<s--;)h.push(g14(p).then(t=>{i()})),p+=e;return h.push(g14(p-e+k3)),Promise.all(h)}#P7(i,h,t,e=!0){const p=[];return this.#P8(DrawCardsToCardRow_TIME_FACTOR,Math.min(t,i.M115()),t=>{var s=i.M56();h.M175(s,e),p.push(s),this.#p15.includes(s)||this.#p15.push(s)}).then(t=>Promise.resolve(p))}#P6(){this.#p98.M99(t=>t.M131(!1));const s=this.#p20;this.#p38.M38(s),this.#p14.M38(s),this.#p39.forEach(t=>t.M117(s)),this.#p55.M117(s)}#P20(){this.#P10(this.#p98.M15(),this.#p38),setTimeout(t=>this.#p98.M99(t=>t.M131(!0)),0)}#P10(t,s){for(var i;0<t.length;)(i=t.pop()).M95().M116(i),s.M175(i)}#P38(t){null===this.#p56&&this.#p36.M101(t)}#P36(t,s){return this.#p97.IsIcon(s)?this.#P11(s.id.split("_").pop()):"HomeCard"===s.id?this.#P11("Play"):void(null!==this.#p56?t===this.#p36&&this.#p56():this.#p99||this.#p40||(t instanceof E5?t.M159()||t.M198(this.#p55)?this.#P25(t):this.#P12(t.M95()):t instanceof E0?this.#P12(t):t instanceof E7?this.M114(t,s):t===this.#p86?this.onClickStoreItem(s):t===this.#p55&&this.#p24===k8&&null!==(s=this.#p55.M71())&&this.M8(s)))}M114(t,s){if(this.#p24!==k20)return this.#P38("Not on attack phase.");s===t.M46()?t.M47():(t.M147()||this.#p86.M17())&&(this.#p99=!0,t.M147()||(this.#p86.M139(),t.M146(!0)),t.M189().then(t=>this.M13(!1)))}#P11(t){"MenuIcon"===t?this.#p97.M186():"Play"===t?"Play"===A0.f4()?this.#P37():(this.#p97.M166(!0),this.#p97.M200(),A0.f19("Play")):"Home"===t?(this.#p97.M201(),this.#p97.M166(!1),A0.f19("Home")):A0.f19(t)}#P25(t){this.clicked_card=t,this.#p99||(this.#p24===k8?this.M8(t):this.#p24===k20&&(t.M193()?this.M25(t):this.M48(t)))}M0(t){t=t.M95().M192().split("_");return["Planet","Horror","Cultists"].includes(t[0])?this.#p39[parseInt(t[1],10)]:null}M48(t){var s,i,h,e=this.M0(t);return null===e?this.M7("Card is not at a cult."):t.M158()&&this.#p86.M4()?this.M69(t):this.#p25!==k45&&this.#p25!==e.M192()?this.M7("You are now attacking "+this.M96(this.#p25)+"."):t.M158()&&e.M145()?this.M7("Cultist is protected by a Horror. You may use a sacrifice."):0===(s=this.#p54.M10()).length?t.M173()?(h=(i=t.M156())===k34?"Pair of identical dice":i===k27?"3 dice run":"4 matching dice",this.#P38("Level "+(i-10)+" Horror &raquo; "+h+".")):t.M158()?this.#P38("Cultist &raquo; 1 Die | 2+ Matching Dice | 3+ Dice Run | Precision | Sacrifice"):this.M7("Select a die, or dice combination, before attacking a card."):this.M49(s,t)?(this.#p25===k45&&(this.#p25=e.M192(),e.M63(!0),this.#p86.M200()),void this.M11(e,t)):1===s.length?this.M7("Die cannot be used against this card."):this.M7("Dice combination cannot be used against this card.")}M7(t){this.#P38(t),this.#p54.M6()}M11(s,i){this.#p54.M31(),this.#p4=!0,i.M158()&&(this.#p88+=i.M156(),this.#p86.M200()),this.#P8(k4,1,t=>{s.M116(i),this.#p14.M175(i)}).then(t=>{if(this.#p54.M64()&&1===this.#p41){if(s.M121())return this.#P38("Starting 2nd attack on "+this.M96(this.#p25)+"..."),this.#p54.M65(),this.M21().then(t=>{this.#p86.M200()});this.#p54.M89(!0),this.#p99=!1}})}M96(t){if(t!==k45)return t instanceof E6&&(t=t.M192()),k33[t].toUpperCase()}M49(t,s){var i=s.M156(),h=this.#p54;return s.M158()?!!(h.M126(t,i)||h.M150(t,i)||h.M183(t,i)||h.M75(t,i)):!!s.M173()&&(i===k34?2===t.length&&0!==h.M182(t):i===k27?3===t.length&&h.M196(t):4===t.length&&0!==h.M182(t))}#P12(t){this.#p99||(t===this.#p38?null!==this.#p6?this.M26("reshuffle"):this.M23():t===this.#p20?null!==this.#p6&&this.M26("discard"):t===this.#p14&&this.#p86.M186())}#P37(){this.#p99||(this.#p99=!0,this.#p40=!1,this.#p6=null,this.#p88=0,this.#p36.M201(),this.#p97.M201(),this.#p97.M118(!1),this.#p54.M194(),this.#P6(),this.#p98.M194(),this.#p98.M177(),this.#P20(),this.#p15=[],this.#p20.M165(k3),this.#p14.M165(k3),this.M162(),setTimeout(()=>{this.#p97.M118(!0),this.#p20.M165(k3),this.#p14.M165(k3)},k7*k3))}M162(){this.#p87+=1,this.#p99=!0,this.#p24=k30,this.#p25!==k45&&this.#p39[this.#p25].M63(!1),this.#p25=k45,this.#p41=0,this.#p4=!1,this.#p54.M65(),this.#p54.M89(!0),this.#p86.M201();var s=0;this.#p39.forEach(t=>{s+=t.M144()?1:0,t.M18()}),this.M134(s)}M134(t){if(this.#p38.M176())return this.M163(!0);this.#P7(this.#p38,this.#p55,k7+t).then(t=>{this.#p55.M71().M129(!0),this.#p24=k8,this.#p99=!1})}M8(s){if(!s.M198(this.#p55))return this.#P38("Place cards from the draw row.");this.#p99=!0,s.M193()&&this.#P7(this.#p38,this.#p55,1),this.M50().then(t=>(this.#p99=!1,s.M158()&&s.M95().M185()?this.M163(!1,k10,s.M172()):this.#p55.M176()?this.M21():void this.#p55.M71().M129(!0)))}M50(){var t=this.#p55.M82(),s=(t.M129(!0),this.#p39[t.M172()]);return t.M158()?this.M12(s,t):t.M193()?this.M20(s,t):this.M19(s,t)}M19(s,i){if(s.M73()<i.M156()-10)return this.M135(i);if(!s.M145())return this.#P8(k4,1,t=>{s.M142(i)});const h=s.M122();return h.M156()<i.M156()?this.#P8(k4,1,t=>{s.M116(h),this.#p20.M175(h)}).then(t=>{s.M142(i)}):this.#P8(k4,1,t=>{this.#p20.M175(i)})}M12(s,i){return this.#P8(k4,1,t=>{s.M120(i)})}M20(s,i){return this.#P8(k4,1,t=>{s.M143(i,this.#p87)})}M135(i){return this.#P8(k4,1,t=>{var s=i.M95();null!==s&&s.M116(i),this.#p14.M175(i)}).then(()=>{this.#p24!==k8&&this.#p86.M200()})}M21(){return this.#p99=!0,this.#p24=k13,this.#p54.M169(),this.#p54.M202().then(t=>{this.M13(t)})}M13(t=null){var s=!1===t;null!==t&&!1!==t||(t=this.#p54.M74());for(var i,h,e=0,p=0;p<t.length;++p)i=t[p],h=this.#p54.M124(i.id),1===i.value?(e+=1,h.M146(!1)):h.M146(!h.M109());e>t.length/2?this.M78(!0):s?this.#p99=!1:this.M22()}M22(){this.#p24=k20,this.#p41+=1,this.#p4=!1,this.#p86.M200(),this.M199(),this.#p99=!1}M78(t){const s=1+this.#p54.M127();var i="You suffred an injury: ";this.M195(i+=t?"to many 1s.":"no defeated cultits.").then(()=>{s===k19?this.M163(!1,k5):(this.#p54.M149(),this.M162())})}M195(t){return this.#p36.M195(t),new Promise((t,s)=>{this.#p56=()=>{this.#p56=null,this.#p36.M119(),t()}})}M163(t,s=null,i=null){this.#p40=!0,this.#p99=!1,this.#p36.M119();var h="Round "+this.#p87+" &raquo; ";t?this.#p36.M102(h+"Well done! You fought with courage and wisdom."):s===k5?this.#p36.M102(h+"You suffered to many injuries and died.."):s===k10&&(this.#p39[i].M61(!0),this.#p36.M102(h+"The cultists of "+this.M96(i)+" mannaged to summon an Elder God. Darkness reigns!"))}M23(){if(this.#p24!==k20)return this.#P38("Round "+this.#p87+" &raquo; Not the time to draw cards.");this.#p86.M201(),this.#p4?this.M162():this.M9()&&this.M78(!1)}M9(){var s=!1;return this.#p25===k45?this.#p39.forEach(t=>{t.M121()&&(s=!0)}):s=this.#p39[this.#p25].M121(),s}onNewDie(t){var s=t.M110();this.#p53.appendChild(s),A0.f0(s,t)}onClickStoreItem(t){var s,i=this.#p14.M115(),t=this.#p86.M168(t,i,this.#p88);if(null!==t){const h=t.item_code;return h===k11?this.#P38("Requested &raquo; Alignment Control."):h===k12?this.#P38("Requested &raquo; Sacrifice."):t.status===k14?this.#P38("Not enough resources &raquo; Needed: "+t.trophies_cost+" trophies and "+t.blood_cost+" blood."):void(this.M24(h)&&(s=t.item_cost,isNaN(s)||(this.#p86.M201(),this.M203(s,h,{blood_cost:t.blood_cost,nr_trophies:i}).then(()=>{this.M52(h)}))))}}M24(t){return t===k21?this.#p24!==k20?(this.#P38("Not on attack phase."),!1):this.#p25!==k45||(this.#P38("Not attacking a cult, yet."),!1):t===k29||t===k37||(t===k22?0!==this.#p54.M127()||(this.#P38("You have no dead dice."),!1):t===k22||(t===k15?this.#p24!==k20||(this.#P38("Cannot buy artifac during attack."),!1):(this.#P38("Sorry, not implemented."),!1)))}M68(){return{round:this.#p87,attack:0===this.#p41?"No":this.#p41,attacking:this.#p25!==k45?this.M96(this.#p25):"None",funds:this.#p14.M115(),injuries:this.#p54.M127()+"/"+k19,blood:this.#p88}}M51(){this.#p6.M93(!1),this.#p6=null}M25(t){if(t.M113())this.M51();else{if(!this.#p86.M3())return this.#P38("Request an ALIGNMENT CONTROL from the store.");null!==this.#p6&&this.M51(),t.M93(!0),this.#p6=t}}M69(t){if(!this.#p86.M4())return this.#P38("Request a Sacrifice from the store.");const s=this.M0(t);var i=this.#p86.M29(t),h=this.#p14.M115(),e=0;if(h<i){if(!this.#p42)return this.#p86.M59(),this.#P38("Not enough trophies to sacrifice this cultist. Needed: "+i+".");if((e=this.#p86.M86(i,h))>this.#p88)return this.#p86.M59(),this.#P38("Not enough trophies and blood to sacrifice this cultist. Needed: "+i+" or "+i+" + "+e+".")}return this.M203(i,k12,{card:t,blood_cost:e,nr_trophies:h}).then(()=>{this.#p88+=t.M156(),this.M52(k12,{card:t,cult:s})})}M26(t){const s=this.M0(this.#p6);var i=s.M62()===this.#p87,i=this.#p86.M30(t,i),h=this.#p14.M115(),e=0;if(h<i){if(!this.#p42)return this.M51(),this.#p86.M60(),this.#P38("Not enough trophies to "+t+" planet. Needed: "+i+".");if((e=this.#p86.M86(i,h))>this.#p88)return this.#p86.M60(),this.#P38("Not enough trophies and blood to "+t+" planet. Needed: "+i+" or "+i+" + "+e+".")}return this.M203(i,k11,{action:"discard"===t?"destroy":"return",suit:this.#p6.M172(),blood_cost:e,nr_trophies:h}).then(()=>{this.M52(k11,{action:t,cult:s})})}M203(t,s,i=null){var h,e,p=i.nr_trophies,r="";return p<t?(e=i.blood_cost,this.#p88-=e,0<(t=p)&&(r=p+" trophies and "),r+=e+" blood"):r=t+" trophies",r="Paying "+r+" ",s===k12?(h=k0,this.#P38(r+"to sacrifice "+i.card.M156()+" of "+this.M96(i.card.M172())+".")):s===k11?(h=k1,this.#P38(r+"to "+i.action+" planet of "+this.M96(i.suit)+".")):(h=k2,this.#P38(r+"for store item: "+this.#p86.M104(s)+".")),this.#P8(h,t,()=>{this.#p20.M175(this.#p14.M56())})}M52(t,s=null){if(t===k37){const i=this.#p54.M125();return this.#p24===k20?(i.M179(!1),i.M202().then(t=>{this.#p86.M200(),i.M146(1!==t),this.M13(!1)})):i.M179(!0),i}if(t===k21)return this.#p25!==k45&&this.#p39[this.#p25].M63(!1),this.#p25=k45,this.#p54.M65(),this.M21().then(()=>{});if(t===k29)return this.#p86.M138(),null;if(t===k22){const h=this.#p54.M152();return this.#p24===k20?(h.M179(!1),h.M202().then(t=>{this.#p86.M200(),h.M146(1!==t),this.M13(!1)})):h.M179(!0),h}if(t===k15)return this.#p54.M148().M179(!0);if(t!==k11)return t===k12?(this.#p86.M87(),this.#p4=!0,this.#P8(k4,1,()=>{s.cult.M116(s.card),this.#p20.M175(s.card)}),s.card):void 0;{const e=this.#p6;return s.cult.M116(e),this.M51(),this.#p86.M88(),"reshuffle"===s.action?this.#P8(k4,1,()=>{this.#p38.M175(e)}).then(()=>{this.#p38.M80()}):"discard"===s.action&&this.#P8(k4,1,()=>{this.#p20.M175(e)}),e}}M199(){var s,h;null!==this.#p15&&(console.debug("Help >> Round:",this.#p87),s=Array([],[],[],[]),this.#p15.forEach(t=>s[t.M172()].push(t.M156())),h=0,s.forEach(t=>{var s=this.M96(h++)[0],i=(s+=" = ",!1);t.sort((t,s)=>s-t),t.forEach(t=>{t===k40?s+=t+" |":(t<=10&&(i||(i=!0,s+=" |")),s+=" "+t)}),console.debug(s)}))}}class E0 extends E3{#p107=null;#p43=[];#p89=0;#p16=!1;#p100=null;#p44=null;constructor(t){super(t,"column","center","center",!0),this.#p107=t,this.#p100=new C0(this.#p107+"_Base",!0),this.M128(this.#p100);t=this.#p100.M110();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p44=document.createElement("p"),this.#p44.classList.add("Hidden"),t.appendChild(this.#p44)}M53(){return this.#p100.M110()}M164(){return g7(this.#p43)}M54(t){this.#p16=t,0<this.#p43.length&&this.#p43[this.#p43.length-1].M129(t)}M55(t,s){this.M32(t,s),this.M2(),this.#P9(),this.#p44.style.fontSize=Math.round(.12*t)+"px"}#P9(){const[s,i]=this.#p100.M91();this.#p43.forEach(t=>t.M92(s,i))}M70(){var s=1;this.#p43.forEach(t=>t.M132(s++))}M165(t){this.#p89=t}M79(t){this.M175(t,!0)}M36(t){this.M175(t,!1)}M175(t,s=!0){var i,h;this.#p43.includes(t)||(this.#p43[s?"push":"unshift"](t),[i,h]=this.#p100.M91(),t.M93(!1),t.M129(!1),t.M92(i,h),s?t.M132(100+this.#p43.length):t.M132(0),t.M94(this),g14(this.#p89).then(t=>{this.#p44.innerHTML=this.#p43.length,this.M70(),this.M14()}))}M37(){return this.#p100.M91()}M56(){var t;return 0===this.#p43.length?null:((t=this.#p43.pop()).M132(100+this.#p43.length),t.M130(!1),this.M14(),this.#p44.innerHTML=this.#p43.length,t)}M14(){var t=this.#p43.length-1;if(0<=t){var s=this.#p43[t];for(s.M130(!1),s.M129(this.#p16),--t;0<=t;--t)(s=this.#p43[t]).M130(!0),s.M129(!1)}}M176(){return 0===this.#p43.length}M115(){return this.#p43.length}M116(t){if(this.#p43.includes(t))return g2(this.#p43,t),t.M130(!1),this.#p44.innerHTML=this.#p43.length,this.M14(),t}M97(t){this.#p44.classList[t?"remove":"add"]("Hidden"),t&&(this.#p44.innerHTML=this.#p43.length)}M38(t){for(var s;0<this.#p43.length;)s=this.#p43[0],this.M116(s),t.M175(s)}M46(){return this.#p100.M110()}M80(){1<this.#p43.length&&(g6(this.#p43),this.M70(),this.M14())}M136(t){this.M110().classList[t?"add":"remove"]("Highlight")}}class E1 extends E3{#p107=null;#p45=0;#p43=[];#p26=!0;constructor(t,s,i=!1){super(t,"row","evenly","center",!0),this.#p107=t,this.#p45=s,i&&null!==this.M110()&&this.M110().classList.add("Clickable")}M81(t){this.#p26=t}M175(t,s=!0){if(this.#p43.length!==this.#p45&&!this.#p43.includes(t))return t.M94(this),t.M129(this.#p26),t.M132(100+this.#p43.length),s?this.#p43.push(t):this.#p43.unshift(t),this.M128(t,s),t}M116(t){if(this.#p43.includes(t))return g2(this.#p43,t),this.M76(t),t.M67(),t}M117(t){for(var s;0<this.#p43.length;)s=this.#p43[0],this.M116(s),t.M175(s)}M27(t){return this.#p43.filter(t)}M28(){return this.#p43.filter(t=>t.M113())}M1(){this.#p43.filter(t=>t.M113()).forEach(t=>t.M93(!1))}M115(){return this.#p43.length}M164(){return g7(this.#p43)}M98(t){return 0!==this.#p43.length&&this.#p43[0]===t}M71(){return 0===this.#p43.length?null:this.#p43[0]}M82(){return 0===this.#p43.length?null:this.M116(this.#p43[0])}M176(){return 0===this.#p43.length}M185(){return this.#p43.length===this.#p45}}class C6{#p43=[];#p15=[];#p46=0;#p27=0;constructor(t,s=null){this.#p46=t,this.#P29(),null!==s&&this.DiscardCards(s)}#P29(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M84(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E5(h++,{id:p,symbol:this.M72(p),color:i},{nr:s,symbol:this.M57(s)}),this.#p43.push(t),this.#p27+=1;for(var r=0,n=1;n<=this.#p46;++n)t=new E5(h++,{id:k32,symbol:this.M72(k32),color:e[r]},{nr:k26,symbol:this.M57(k26)}),this.#p43.push(t),this.#p27+=1,r=(1+r)%e.length}M83(t){if(!(0<this.#p15.length))return t=this.#p43.filter(t),this.#p27-=t.length,t.forEach(t=>{g2(this.#p43,t)}),t}f17(s,i){this.M99(t=>t.M171(s,i))}M99(t){this.#p43.forEach(t),this.#p15.forEach(t)}M177(){g6(this.#p43)}M178(){var t;return 0===this.#p43.length?null:(t=g0(this.#p43),this.#p15.push(t),t)}M194(){for(;this.#p15.length;)this.#p43.push(this.#p15.pop());this.#p43.forEach(t=>t.M194())}M72(s){return k42.filter(t=>t.id===s).pop().symbol}M84(s){return k42.filter(t=>t.id===s).pop().color}M57(s){return s===k26||11<=s&&s<=13||s===k40?k36.filter(t=>t.value===s).pop().symbol:s}M85(s,i){this.M99(t=>t.M171(s,i))}M27(t){t=this.#p43.filter(t);return t.forEach(t=>{g2(this.#p43,t),this.#p15.push(t)}),t}M115(){return this.#p43.length}M39(){return this.#p27}M15(){for(var t=[];0<this.#p43.length;){var s=this.#p43.pop();this.#p15.push(s),t.push(s)}return t}}class C7{#p62=null;#p101=null;#lst_elements=null;constructor(t,s){this.#p62=t,this.#p101=s,this.#lst_elements=Array.from(t.children),this.#p101.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M100(){return g7(this.#lst_elements)}M200(){this.#p62.style.right=0}M201(){this.#p62.style.right=-1.1*this.#p62.offsetWidth+"px"}M186(){"0px"===this.#p62.style.right?this.M201():this.M200()}M166(t=!0){this.#p101.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M118(t){g13("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p62=null;#p90=null;#p102=null;#p47=0;#p91=0;#p92=!1;constructor(t){this.#p62=document.createElement("div"),this.#p62.id="Messenger",this.#p90=document.createElement("p"),this.#p62.appendChild(this.#p90),this.#p102=document.createElement("div"),this.#p102.classList.add("Clickable"),this.#p102.classList.add("Hidden"),this.#p62.appendChild(this.#p102),this.#p47=t<1e3?1e3*t:t}M110(){return this.#p62}M46(){return this.#p102}f17(t,s,i,h){this.#p62.style.width=t+"px",this.#p62.style.height=s+"px",this.#p62.style.left=h+"px",this.#p90.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M201()}M201(){this.#p92,this.#p62.style.top=-1.1*this.#p62.offsetHeight+"px",this.#p92&&(this.#p92=!1,setTimeout(()=>{this.#p102.classList.add("Hidden")},500))}M16(t,s){0<this.#p47&&this.M101("<span>"+t+"</span>: "+s)}M101(t){this.#p92||0<this.#p47&&(clearTimeout(this.#p91),this.#p91=setTimeout(this.M201.bind(this),this.#p47),this.#p90.innerHTML=t,this.#p62.style.top=0)}M102(t){clearTimeout(this.#p91),this.#p90.innerHTML=t,this.#p62.style.top=0}M195(t){clearTimeout(this.#p91),this.#p92=!0,this.#p102.classList.remove("Hidden"),this.M102(t)}M119(){this.#p92&&(this.#p92=!1,this.#p102.classList.add("Hidden"),this.M201())}}class E2 extends E3{#p103=null;#p67=null;#p57=null;constructor(){super("PilesRow","column","evenly","center",!0),this.#p103=new E0("Draw"),this.#p67=new E0("Discard"),this.#p57=new E0("Trophies"),this.#p103.M97(!0),this.#p67.M97(!0),this.#p57.M97(!0),this.M128(this.#p103),this.M128(this.#p67),this.M128(this.#p57)}f17(t,s,i,h,e,p){super.f17(t,s,i,h),this.M32(t,s/3),this.M2(),this.M66(t=>{t instanceof E0&&t.M55(e,p)})}M103(){return this.#p103}M58(){return this.#p67}M40(){return this.#p57}M100(){return[this.M110(),this.#p103.M110(),this.#p67.M110(),this.#p57.M110(),this.#p103.M53(),this.#p67.M53(),this.#p57.M53()]}}class C4{#p62=null;#p93=0;#p28=0;#p9=0;constructor(t){this.#p62=t}M194(){this.#p93=0,this.#p28=0,this.#p9=0,this.#P27()}M187(t,s,i){"cec"===t?(this.#p93+=s.M156(),s.M77()&&(this.#p28+=1,this.#p9+=s.M156())):"ecc"!==t&&"stc"!==t||i.forEach(t=>this.#p93-=t.M156()),this.#P27()}#P27(){g13("txt_score").innerHTML=this.#p93,g13("txt_nr_captures").innerHTML=this.#p28,g13("txt_percent_captures").innerHTML=Math.round(this.#p9/MAX_CAPTURES_VALUE*100)}M167(){return this.#p93}}const k14=-1,k43=0,k37=1,k29=2,k21=3,k22=4,k15=5,k11=6,k12=7,k23=[{id:"sacrifice",txt:"Sacrifice",cost:"cultist",code:k12},{id:"alignment_control",txt:"Alignment Control",cost:"R=2/4 D=5/10",code:k11},{id:"spirit_die",txt:"Spirit Die",cost:2,code:k37},{id:"devils_luck",txt:"Devil's Luck",cost:3,code:k29},{id:"time_shift",txt:"Time Shift",cost:5,code:k21},{id:"grow_flesh",txt:"Grow Flesh",cost:5,code:k22},{id:"buy_artifact",txt:"Buy Artifact",cost:10,code:k15}];class C5{#p107=null;#p62=null;#p76=null;#p68=!0;#p5=0;#p48=null;#p0=!1;#p1=!1;#p42=!1;constructor(t,s,i){this.#p62=t,this.#p107=t.id,this.#p48=s,this.#p42=i,this.M137()}M104(t){return this.#P15(t).txt.toUpperCase()}f17(t,s,i){this.#p62.style.width=t+"px",this.#p62.style.height=s+"px",this.#p62.style.left=i+"px",this.#p62.style.fontSize=Math.round(.015*t)+"px"}M137(){this.#p76=document.createElement("header"),this.#p62.appendChild(this.#p76);var t,s=[{id:"round",txt:"Round"},{id:"attack*",txt:"Attack"},{id:"injuries",txt:"Injuries"}];this.#p42&&s.push({id:"blood",txt:"Blood"});for(t of s){var i=document.createElement("span");i.innerHTML=t.txt+":",this.#p76.appendChild(i),(i=document.createElement("span")).id="store_"+t.id,i.classList.add("StoreInfo"),this.#p76.appendChild(i)}var e=0;k23.forEach(t=>{var s,i=document.createElement("div");i.id=t.id,i.dataset.idx=e++,i.classList.add("Clickable");for(s of["txt","cost"]){var h=document.createElement("txt"===s?"p":"span");h.innerHTML=t[s],i.appendChild(h)}this.#p62.appendChild(i)})}#P27(){var t,s=this.#p48();for(t in s){var i=g13("store_"+t);null!==i&&(i.innerHTML=s[t])}return g13("store_attack*").innerHTML=s.attack+"/"+s.attacking,s.funds}M41(){return Array.from(g12("div",this.#p62))}M200(){this.#p68=!0,this.#p62.style.bottom="";const i=this.#P27();k23.forEach(t=>{var s;"number"==typeof t.cost&&(s=g11("span",g13(t.id)),t=t.cost<=i,s.classList[t?"remove":"add"]("NoFunds"))})}M201(){this.#p68=!1,this.#p62.style.bottom=-this.#p62.offsetHeight+"px"}M186(){this.#p68?this.M201():this.M200()}M168(t,s,i){var h,e,t=k23[t.dataset.idx];return"number"==typeof t.cost?(h=Math.max(0,t.cost-s),e=Math.pow(2,h),{status:(this.#p42?e<=i:t.cost<=s)?k43:k14,item_code:t.code,item_cost:t.cost,blood_cost:e,trophies_cost:t.cost-h}):t.code===k11?(this.#p0=!0,{status:k43,item_code:k11}):t.code===k12?(this.#p1=!0,{status:k43,item_code:k12}):null}M86(t,s){return Math.pow(2,Math.max(0,t-s))}M29(t){return t.M156()}M30(t,s){t="reshuffle"===t?2:5;return s||(t*=2),t}#P15(s){var t=k23.filter(t=>t.code===s);return 1!==t.length?null:t.pop()}M105(t){t=this.#P15(t);return null!==t?t.cost:NaN}M138(t=1){this.#p5+=t}M17(){return 0<this.#p5}M3(){return this.#p0}M4(){return this.#p1}M139(){0!==this.#p5&&(--this.#p5,this.M200())}M59(){this.#p1=!1}M87(){this.#p1&&(this.#p1=!1)}M60(){this.#p0=!1}M88(){this.#p0&&(this.#p0=!1)}}class E6 extends E3{#p107=null;#p62=null;#p77=null;#p78=null;#p58=null;#p21=0;#p22=!1;constructor(t){super("Cult_"+t,"row","start","center",!0),this.#p107=t,this.#p62=this.M110(),this.#p62.classList.add("Cult"),this.#p62.classList.add("Cult_"+t),this.#p77=new E1("Planet_"+t,1),this.#p78=new E1("Horror_"+t,1),this.#p58=new E1("Cultists_"+t,k18),this.#p58.M33((t,s)=>s.M156()-t.M156()),this.#p77.M110().classList.add("Planet"),this.#p78.M110().classList.add("Horror"),this.#p58.M110().classList.add("Cultists"),this.M128(this.#p77),this.M128(this.#p78),this.M128(this.#p58)}M192(){return this.#p107}f17(t,s,i,h,e){this.#p77.M171(e,s),this.#p78.M171(e,s),this.#p58.M171(t-2*e,s),super.f17(t,s,i,h),[this.#p77,this.#p78,this.#p58].forEach(t=>t.M2())}M100(){return[this.#p62,this.#p77.M110(),this.#p78.M110(),this.#p58.M110()]}M140(){return this.#p77}M141(){return this.#p78}M106(){return this.#p58}M107(){return 0<this.#p58.M115()}M73(){return this.#p58.M115()}M61(s){this.#p58.M164().forEach(t=>t.M93(s))}M62(){return this.#p21}M117(t){this.#p77.M117(t),this.#p78.M117(t),this.#p58.M117(t)}M120(t){return this.#p58.M175(t),t}M142(t){return this.#p78.M175(t)}M143(t,s){this.#p77.M175(t),this.#p21=s,t.M133(!0)}M18(){0<this.#p77.M115()&&this.#p77.M71().M133(!1)}M116(t){return t.M198(this.#p58)?this.#P16(t):t.M198(this.#p78)?this.#P22(t):t.M198(this.#p77)&&this.#P21(t),t}#P16(t){return this.#p58.M116(t)}#P21(){return this.#p77.M176()?null:(this.#p21=0,this.#p77.M82())}#P22(){return this.#p78.M176()?null:this.#p78.M82()}M144(){return 0<this.#p77.M115()}M145(){return 0<this.#p78.M115()}M121(){return this.M145()||this.M107()}M122(){return this.#p78.M71()}M63(t){function s(t,s){t.M110().classList[s?"add":"remove"]("CultUnderAttack")}this.#p22=t,s(this.#p78,t),s(this.#p58,t)}}class E7 extends C0{#p107=null;#p62=null;#p72=null;#p59=null;#p51=!1;#p84=0;#p79=!1;#p69=!1;#p60=!1;#p30=0;#p104=!1;#p105=!1;#p94=null;constructor(t){super("Die_"+t,!0),this.#p107=t,this.#p94=new C3(6,0,0),this.#p94.M34().forEach(t=>{var s=1+this.#p94.GetFaceIdx(t);1===(t.innerHTML=s)&&t.classList.add("IsOne")}),this.#p94.M45(300),this.prism=this.#p94,this.#p62=this.M110(),this.#p62.classList.add("Die"),this.#p72=document.createElement("div"),this.#p72.classList.add("DieBody"),this.#p72.classList.add("Clickable"),this.#p72.dataset.id=t,this.#p72.appendChild(this.#p94.M110()),this.#p59=document.createElement("p"),this.#p59.classList.add("Clickable"),this.#p59.dataset.id=t,this.#p62.appendChild(this.#p72),this.#p62.appendChild(this.#p59)}M171(t,s){super.M171(t,s),this.M123()}M123(){var t;0!==this.#p72.offsetHeight&&(t=Math.round(.85*this.#p72.offsetHeight),this.#p72.style.fontSize=Math.round(.5*t)+"px",this.#p59.style.fontSize=Math.round(.33*t)+"px",this.#p94.M171(t,t))}M192(){return this.#p107}M46(){return this.#p72}M41(){return[this.#p72,this.#p59]}M47(){this.M93(!this.#p51)}M113(){return this.#p51}M93(t){t&&this.#p104||(this.#p51=t,this.#p72.classList[t?"add":"remove"]("Selected"))}M179(t){return t&&(this.M93(!1),this.M146(!1)),this.#p104=t,this.#p72.classList[t?"add":"remove"]("Used"),this}M188(){return this.#p104}M146(t){this.#p79=t,this.#p59.classList[t?"remove":"add"]("Hidden"),this.#p59.innerHTML=t?"&larr; &rarr;":""}M202(){return this.M180()?(this.#p59.innerHTML="",this.#P17(!1),this.#p69=!0,this.#p84=0,new Promise((t,s)=>{this._Roll(1,t)})):Promise.reject(0)}_Roll(t,s){this.#p94.M44(!0),1===t||t<6?(t+=1,setTimeout(this._Roll.bind(this,t,s),k9)):(this.#p69=!1,this.#p84=1+this.#p94.M153(),setTimeout(()=>{this.#P17(!0),s(this.#p84)},k9))}#P17(s){this.#p94.M34().forEach(t=>{s?this.#p94.GetFaceIdx(t)!==this.#p84-1&&t.classList.add("NotFront"):t.classList.remove("NotFront")})}M189(){return this.M147()?(this.#p30+=1,this.M146(!1),this.M202()):Promise.reject(0)}M194(t=!1){this.#p84=0,this.#p30=0,this.#p69=!1,this.M146(!1),this.M93(!1),this.M108(!1),this.M179(!1),this.M181(!!t&&this.#p105)}M156(){return this.#p84}M108(t=!0){this.#p60=t,this.#p62.classList[t?"add":"remove"]("Disabled")}M180(){return!(this.#p60||this.#p51||this.#p69||this.#p104)}M147(){return this.M180()&&this.#p79}M109(){return 0<this.#p30}M181(t){this.#p105=t,this.#p59.classList[t?"add":"remove"]("Temp")}M190(){return this.#p105}}class E4 extends E3{#p61=[];#p31=0;#p10=[];#p7=[];#p17=[];#p80=0;#p32=null;#p49=0;#p33=0;constructor(t,s){super("DiceRow","column","evenly","center",!0),this.#p31=t,this.#p32=s;for(var i=0;i<t;++i)this.M191(new E7(i));this.#p80=t,this.M89(!0)}f17(t,s,i,h,e,p){this.#p49=e,this.#p33=p,this.M32(this.#p49,this.#p33),super.f17(t,s,i,h)}M100(){var t=this.#p61.map(t=>t.M110());return t.push(this.M110()),t}M42(){var s=[];return this.#p61.forEach(t=>s=s.concat(t.M41())),s}M124(s){var t=this.#p61.filter(t=>t.M192()===s);return 1===t.length?t[0]:null}M5(t){return this.#p61[parseInt(t.dataset.id,10)]}M194(){for(this.M65();0<this.#p17.length;)this.M152();for(;this.#p61.length>this.#p31;)this.M149(!1);this.M169()}M169(){this.#p61.forEach(t=>{t.M194(!0)})}M202(){const s=[];return this.#p61.forEach(t=>{t.M188()||s.push(t.M202())}),Promise.all(s).then(t=>(this.#p61.forEach(t=>{t.M146(1!==t.M156())}),Promise.resolve(this.M74())))}M74(){var s=[];return this.#p61.forEach(t=>{t.M188()||s.push({id:t.M192(),value:t.M156()})}),s}M125(){var t=this.M148();return this.#p7.push(t),t.M179(!1),t.M181(!0),t}M148(){var t;return 0<this.#p10.length?t=this.#p10.pop():(t=new E7(++this.#p80),this.#p32(t)),t.M108(!1),t.M171(this.#p49,this.#p33),this.M191(t)}M191(t){return this.M128(t),this.#p61.push(t),t.M194(),t}M149(t=!0){var s;return 0===this.#p61.length?-1:((s=this.#p61.shift()).M108(!0),this.M76(s),(t?this.#p17:this.#p10).push(s),this.#p61.length)}M10(){const s=[];return this.#p61.forEach(t=>{t.M113()&&s.push(t.M156())}),s}M126(t,s){return 1===t.length&&t[0]>=s}M182(t){if(t.length<2)return 0;for(var s=t[0],i=1;i<t.length;++i)if(t[i]!==s)return 0;return s}M196(t){if(t.length<3)return!1;for(var s=g7(t).sort(),i=0,h=1;h<s.length;++i,++h)if(s[i]+1!==s[h])return!1;return!0}M150(t,s){var i=this.M182(t);return 0!==i&&i*t.length>=s}M151(t){return t.reduce((t,s)=>t+s,0)}M183(t,s){return!!this.M196(t)&&this.M151(t)>=s}M75(t,s){return this.M151(t)===s}M89(s){this.#p61.forEach(t=>{t.M179(s)})}M90(s){this.#p61.forEach(t=>{t.M146(s)})}M31(){this.#p61.forEach(t=>{t.M113()&&t.M179(!0)})}M6(){this.#p61.forEach(t=>{t.M113()&&t.M93(!1)})}M64(){var s=!0;return this.#p61.forEach(t=>{t.M188()||(s=!1)}),s}M65(){for(;0<this.#p7.length;){var t=this.#p7.pop();g2(this.#p61,t);this.#p10.push(t),this.M76(t),t.M108(!0)}}M152(){return 0===this.#p17.length?null:this.M191(this.#p17.pop())}M127(){return this.#p17.length}}const k6=16/11,k38=5,k39=0,k4=0,k2=.25,k0=.66,k1=.25,DrawCardsToCardRow_TIME_FACTOR=1,k9=g8("DICE_ROTATE_TIME",!0),k3=g8("CARD_TRANSLATE_TIME",!0),k44=4,k18=5,k16=3,k7=3,k19=3,k45=-1,k30=0,k8=1,k13=2,k20=3,k5=0,k10=1,k24=0,k25=1,k17=2,k31=3,k32=4,k33=["hearts","spades","diamonds","clubs","joker"],k26=0,k34=11,k27=12,k35=13,k40=14,k41="Red",k28="Black",k42=[{id:k24,symbol:"&hearts;",color:k41},{id:k25,symbol:"&spades;",color:k28},{id:k17,symbol:"&diams;",color:k41},{id:k31,symbol:"&clubs;",color:k28},{id:k32,symbol:"",color:""}],k36=[{value:k34,symbol:"J"},{value:k27,symbol:"Q"},{value:k35,symbol:"K"},{value:k40,symbol:"A"},{value:k26,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});