const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f22:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f17(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f17.bind(this))},f17:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f8(),this.f11(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f18:function(){return this.viewport_width},f14:function(){return this.viewport.offsetHeight},f19:function(t=""){if("string"==typeof t){var s=0,i=t;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s;break}s++}}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f9:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f8:function(){this.f19(this.current_page_idx)},f5:function(){this.f19(this.current_page_idx)},f13:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f11()},f11:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f19(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f19(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f8(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f20.bind(this,s)),t.addEventListener("contextmenu",this.f10.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f10.bind(this)),t.addEventListener(s,i)},f12:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f20:function(t,s){this.f12(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f10:function(t){this.f12(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f21())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f15("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f15("Error",t)})},f2:function(t){return t.stack.split("at ").join("<br>&bull; ")},f15:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f19(this.error_page.id)}};class C0{#p110=null;#p109=1/0;#p98=1/0;#p84=1/0;#p73=1/0;#p65=null;constructor(t,s=!1){this.#p110=t,!0===s?this.#p65=this.#P24():s instanceof Node&&(this.#p65=s,this.#p65.id=this.#p110,this.#p65.classList.add("FlexBoxEntity"))}#P24(){var t=document.createElement("div");return t.id=this.#p110,t.classList.add("FlexBoxEntity"),t}M195(){return this.#p110}M94(){return[this.#p109,this.#p98]}M113(){return this.#p65}f18(){return this.#p84}f14(){return this.#p73}M187(){return this.#p109}M173(){return this.#p98}f17(t,s,i,h){this.M95(i,h),this.M174(t,s)}M95(t,s){this.#p109=t,this.#p98=s,null!==this.#p65&&(this.#p65.style.top=t+"px",this.#p65.style.left=s+"px")}M174(t,s){this.#p84=t,this.#p73=s,null!==this.#p65&&(this.#p65.style.width=t+"px",this.#p65.style.height=s+"px")}}class E3 extends C0{#p25=null;#p66=null;#p85=null;#p20=[];#p4=null;constructor(t,s,i,h,e=!1){super(t,e),this.#p25=s,this.#p66=i,this.#p85=h,e&&this.M113().classList.add("FlexBox")}M131(t,s=!0){this.#p20[s?"push":"unshift"](t),null!==this.#p4&&this.#p20.sort(this.#p4),this.M2()}M78(t){g2(this.#p20,t),this.M2()}f17(t,s,i,h){super.f17(t,s,i,h),this.M2()}M33(s,i){0<this.#p20.length&&this.#p20.forEach(t=>t.M174(s,i))}M2(){var s,i,h,e;0!==this.#p20.length&&(i=s=0,this.#p20.forEach(t=>{s+=t.f18(),i+=t.f14()}),s!==1/0)&&i!==1/0&&("row"===this.#p25?(h=this.#P4(this.#p66)(!0,"width",s),e=this.#P4(this.#p85)(!1,"height",i)):(e=this.#P4(this.#p66)(!0,"height",i),h=this.#P4(this.#p85)(!1,"width",s)),this.#p20.forEach(t=>{t.M95(e.shift(),h.shift())}))}M68(s){this.#p20.forEach(t=>s(t))}#P4(t){return"center"===t?this.#P0.bind(this):"start"===t?this.#P2.bind(this):"end"===t?this.#P3.bind(this):"evenly"===t?this.#P1.bind(this):void 0}#P5(t,s){for(var i,h="width"===s?this.M173():this.M187(),e=[],p=0;p<this.#p20.length;++p)t&&0<p&&(i=this.#p20[p-1],h+="width"===s?i.f18():i.f14()),e.push(h);return e}#P2(t,s,i){return this.#P5(t,s)}#P0(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p20.length,r="width"===s?this.f18():this.f14(),n=Math.round((r-i)/2),M=0;M<p;++M)t?e[M]+=n:(h=this.#p20[M],e[M]+=Math.round((r-("width"===s?h.f18():h.f14()))/2));return e}#P3(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p20.length,r="width"===s?this.f18():this.f14(),n=Math.round(r-i),M=0;M<p;++M)t?e[M]+=n:(h=this.#p20[M],e[M]+=r-("width"===s?h.f18():h.f14()));return e}#P1(t,s,i){for(var h=this.#P5(t,s),e=this.#p20.length,t="width"===s?this.f18():this.f14(),p=Math.round((t-i)/(e+1)),r=0;r<e;++r)h[r]+=(r+1)*p;return h}M34(t){this.#p4=t}M114(t){this.#p66=t}}function g13(t){return document.getElementById(t)}function g11(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g12(t,s){return(s=s||document).getElementsByTagName(t)}function g9(t,s=document){return s.querySelector(t)}function g10(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g14(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g5(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function QuerySeachString(t,s=null,i=!1){t=new URL(window.location).searchParams.get(t);return null===t?t=s:i&&(t=parseInt(t,10)),t}function g8(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g6(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g7(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g3(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g3(t,Math.f16(0,t.length-1))}function g4(t){return t[Math.f16(0,t.length-1)]}A0.A1={},A0.A1.f21=function(){return 0<navigator.maxTouchPoints},A0.A1.f23=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){document.fullscreenElement||!this.f21()||this.f23()||document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"})},Math.f16=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};class C3{#p52=0;#p84=0;#p73=0;#p12=!0;#p111=0;#p112=0;#p113=0;#p36=0;#p86=0;#p67=0;#p21=null;#p13=null;#p37=[];constructor(t,s,i,h=!0){this.#p52=t,this.#p84=s,this.#p73=i,this.#p12=h,this.#p86=360/this.#p52,this.#P19(),this.#P27(),this.#P15(0),this.#P14()}#P19(){this.#p21=document.createElement("div"),this.#p21.classList.add("Prism"),this.#p21.style.width=this.#p84+"px",this.#p21.style.height=this.#p73+"px",this.#p13=document.createElement("div"),this.#p13.classList.add("PrismWrapper"),this.#p21.appendChild(this.#p13);for(var t,s=0;s<this.#p52;++s)(t=document.createElement("div")).classList.add("PrismFace"),t.dataset.idx=s,this.#p37.push(t),this.#p13.appendChild(t),t.innerHTML=s}#P27(){var t=this.#p12?this.#p84:this.#p73,s=this.#p12?"Y":"X";this.#p67=this.#P25(t,this.#p52);for(var i=0;i<this.#p52;++i)this.#p37[i].style.transform=["rotate"+s+"("+-i*this.#p86+"deg)","translateZ("+this.#p67+"px)"].join(" ")}#P15(t){this.#p36=this.#P32(this.#p36+t)}#P14(){this.#p13.style.transform=["translateZ(-"+this.#p67+"px)","rotateX("+this.#p111+"deg)","rotateY("+this.#p112+"deg)","rotateZ("+this.#p113+"deg)"].join(" ")}#P25(t,s){return Math.ceil(t/(2*Math.tan(Math.PI/s)))}#P32(t){var s=this.#p52;return 0<=(t%=s)?t:t+s}#p14=function(t,s){return Math.floor(Math.random()*(s-t+1))+t};#P33(t){this.#p111+=t*this.#p86,this.#P14()}#P34(t){this.#p112+=t*this.#p86,this.#P14()}#P35(t){var s=this.#p12;this.#p12=!0,s!==this.#p12&&(this.#p111=0,this.#p112=this.#p36*this.#p86%360,this.#P27()),this.#P34(t),this.#P15(t)}#P36(t){var s=this.#p12;this.#p12=!1,s!==this.#p12&&(this.#p112=0,this.#p111=this.#p36*this.#p86%360,this.#P27()),this.#P33(t),this.#P15(t)}M113(){return this.#p21}M44(t){return this.#p37[this.#P32(t)]}M35(){return this.#p37.concat()}M200(t=1){return this.#p12?this.#P35(t):this.#P36(t),this.#p36}M156(){return this.#p36}M157(t=0){var s,i;return(t=this.#P32(t))!==this.#p36&&(i=0<(s=t-this.#p36)?s-this.#p52:this.#p52+s,i=Math.abs(i)<Math.abs(s)?i:s,this.M200(i)),t}M45(t=!1){for(var s=-1;s=this.#p14(0,this.#p52-1),t&&s===this.#p36;);return this.M157(s)}M46(t){"number"==typeof t&&(t+="px"),this.#p21.style.perspective=t}M174(t,s){this.#p84=t,this.#p73=s,this.#p21.style.width=this.#p84+"px",this.#p21.style.height=this.#p73+"px",this.#P27(),this.#P15(0),this.#P14()}GetFaceIdx(t){return parseInt(t.dataset.idx,10)}}class E5 extends C0{#p110=null;#p99=-1;#p87=-1;#p88=-1;#p68=!0;#p53=!1;#p2=!0;#p74=!1;#p54=null;#p75=null;#p76=null;#p77=null;#p69=null;#p31=null;#p9=null;#p78=null;constructor(t,s,i){super("Card_"+t,!0),this.#p110=t,this.#p99=s.id,this.#p87=i.nr,this.#p88=s.color,this.M158(i.symbol,i.nr,s.symbol),this.M36(this.#p2)}M47(){return this.#p75}M36(t){(this.#p2=t)&&(this.M176()||this.M196())?this.#p31.classList.remove("Hidden"):this.#p31.classList.add("Hidden")}M158(t,s,i){this.#p75=document.createElement("div"),this.#p75.classList.add("CardBody"),this.#p75.classList.add("Clickable"),this.#p76=document.createElement("div"),this.#p76.classList.add("CardFace"),this.#p75.appendChild(this.#p76),this.#p77=document.createElement("div"),this.#p77.classList.add("CardBack"),this.#p75.appendChild(this.#p77),this.#p69=document.createElement("p"),this.#p69.classList.add("CardValue"),this.#p69.classList.add("CardValue"+this.#p88);var h=document.createElement("span"),t=(h.innerHTML=t,this.#p69.appendChild(h),this.#p76.appendChild(this.#p69),this.#p31=document.createElement("span"),(this.M176()||this.M196())&&(this.#p31.innerHTML=s),this.#p69.appendChild(this.#p31),this.#p9=document.createElement("span"),this.#p69.appendChild(this.#p9),this.#p78=document.createElement("p"),this.#p78.innerHTML=i,this.#p78.classList.add("CardSuit"),this.#p78.classList.add("CardSuit"+this.#p88),this.#p76.appendChild(this.#p78),this.#p68||this.#p75.classList.add("FaceDown"),this.M176()?this.#p76.classList.add("CardRoyal"):this.M177()?this.#p76.classList.add("CardJoker"):this.M196()&&this.#p76.classList.add("CardAce"),this.M113());t.classList.add("Card"),t.classList.add("CardSmooth"),t.classList.add("CardHidden"),t.appendChild(this.#p75)}M159(){return this.#p87}M175(){return this.#p99}M160(){return this.#p88}M174(t,s){super.M174(t,s),this.#p69.style.fontSize=Math.round(.3*t)+"px",this.#p69.children.length&&(this.#p69.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p78.style.fontSize=Math.round(.4*t)+"px"}M132(t){this.#p68=t,this.#p75.classList[t?"remove":"add"]("FaceDown")}M96(t){this.#p53=t,this.#p75.classList[t?"add":"remove"]("CardSelected")}M48(){return this.M96(!this.#p53),this.#p53}M69(){this.#p54=null}M97(t){this.#p54=t}M201(t){return this.#p54===t}M98(){return this.#p54}M176(){return[k39,k32,k40].includes(this.#p87)}M115(){return this.M176()}M177(){return this.#p87===k31}M196(){return this.#p87===k45}M161(){return this.#p87<=10}M162(){return this.#p68}M116(){return this.#p53}M133(t){this.M113().classList[t?"add":"remove"]("CardHidden")}M134(t){this.M113().classList[t?"add":"remove"]("CardSmooth")}M135(t){this.M113().style.zIndex=t}M79(){return this.M176()||this.M196()}M163(){return"#"+this.#p110+"="+this.#p87+"/"+k38[this.#p99]}M136(t,s=0){return this.#p74=t,this.#p69.classList[t?"add":"remove"]("Marked"),t}M164(){return this.#p74}M197(){this.M96(!1),this.M136(!1),this.M132(!1)}}class C2{#p55=null;#p38=null;#p100=null;#p101=null;#p39=null;#p40=null;#p22=null;#p15=null;#p56=null;#p57=null;#p89=null;#p102=!1;#p41=[];#p90=0;#p26=0;#p42=!1;#p27=k50;#p43=0;#p5=!1;#p7=null;#p58=null;#p16=null;#p91=0;#p44=0;#p3=k7;#p59=0;constructor(){this.clicked_card=null,this.#p44=parseFloat(QuerySeachString("use_blood",0)),this.#p3=parseInt(QuerySeachString("planet_protection",k7)),this.#p59=parseInt(QuerySeachString("tmo_cost",0)),A0.f22(this.#P31.bind(this),this.#P37.bind(this)),A0.f7(),A0.f13(A0.PAGE_LANDSCAPE,"Rotate"),this.#p55=g13("GameViewport"),this.#p38=new C1(k43),this.#p100=new C7(g13("MenuPannel"),g13("MenuIcon")),this.#p101=new C6(k44),this.#p39=new E2,this.#p56=new E4(k21,this.onNewDie.bind(this)),this.#p57=new E1("DrawRow",7,!0),this.#p57.M114("center"),this.#p57.M84(!1),this.#p89=new C5(g13("Store"),this.M70.bind(this),this.#p44),this.#p40=this.#p39.M106(),this.#p22=this.#p39.M59(),this.#p15=this.#p39.M41(),this.#p55.appendChild(this.#p57.M113()),g5(this.#p55,this.#p39.M103()),g5(this.#p55,this.#p56.M103());for(var t,s=0;s<k49;++s)t=new E6(s),this.#p41.push(t),g5(this.#p55,t.M103());g13("Play").appendChild(this.#p38.M113()),A0.f6(window,"contextmenu",A0.f12.bind(A0)),A0.f0(g13("HomeCard"),null),A0.f0(g13("MenuIcon"),null),A0.f0(this.#p38.M47(),this.#p38),this.#p100.M103().forEach(t=>A0.f0(t,null)),A0.f0(this.#p40.M47(),this.#p40),A0.f0(this.#p22.M47(),this.#p22),A0.f0(this.#p15.M47(),this.#p15),A0.f0(this.#p57.M113(),this.#p57),this.#p56.M43().forEach(t=>{A0.f0(t,this.#p56.M5(t))}),this.#p89.M42().forEach(t=>{A0.f0(t,this.#p89)}),this.#P31(0,0),this.#p100.M204(),this.#p89.M204(),this.#P29(),window.setTimeout(()=>{A0.f11(),g13("AppViewport").classList.remove("AppInit")},62.5)}#P29(){for(var t;null!==(t=this.#p101.M181());)t.M36(!1),this.#p55.appendChild(t.M113()),A0.f0(t.M47(),t),t.M133(!1),this.#p22.M178(t);for(;!this.#p22.M179();)this.#p40.M178(this.#p22.M57())}#P31(t,s){for(var i=this.#p55.offsetTop,h=this.#p55.offsetWidth,e=Math.round(h/9),p=Math.round(this.#p55.offsetHeight/5),[r,n]=this.#P20(e,p,i),M=(this.#p101.M88(r,n),this.#p38.f17(h,Math.round(n/2),0,this.#p55.offsetLeft),Math.round(6.5*e)),o=Math.round(.5*i),a=0;a<k49;++a)this.#p41[a].f17(M,p-i,o,0,e),o+=p;var l=Math.round((this.#p55.offsetWidth-M)/2);this.#p56.f17(l,4*p,0,M,l-2*i,Math.floor(4*p/6-i)),this.#p39.f17(l,4*p,0,M+l,r,n),this.#p57.f17(M,p-i,o,0),this.#p89.f17(h,Math.ceil(p+.55*i),this.#p55.offsetLeft)}#P20(t,s,i){var i=2*i,t=t-i,h=Math.round(t*k10);return s-i<h&&(h=s-i,t=Math.round(h/k10)),[t,h]}#P8(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k6*t,p=0;0<s--;)h.push(g14(p).then(t=>{i()})),p+=e;return h.push(g14(p-e+k6)),Promise.all(h)}#P7(i,h,t,e=!0){const p=[];return this.#P8(DrawCardsToCardRow_TIME_FACTOR,Math.min(t,i.M118()),t=>{var s=i.M57();h.M178(s,e),p.push(s),this.#p16.includes(s)||this.#p16.push(s)}).then(t=>Promise.resolve(p))}#P6(){this.#p101.M102(t=>t.M134(!1));const s=this.#p22;this.#p40.M39(s),this.#p15.M39(s),this.#p41.forEach(t=>t.M120(s)),this.#p57.M120(s)}#P21(){this.#P10(this.#p101.M15(),this.#p40),setTimeout(t=>this.#p101.M102(t=>t.M134(!0)),0)}#P10(t,s){for(var i;0<t.length;)(i=t.pop()).M98().M119(i),s.M178(i)}#P39(t){null===this.#p58&&this.#p38.M104(t)}#P37(t,s){return this.#p100.IsIcon(s)?this.#P11(s.id.split("_").pop()):"HomeCard"===s.id?this.#P11("Play"):void(null!==this.#p58?t===this.#p38&&this.#p58():this.#p102||this.#p42||(t instanceof E5?t.M162()||t.M201(this.#p57)?this.#P26(t):this.#P12(t.M98()):t instanceof E0?this.#P12(t):t instanceof E7?this.M117(t,s):t===this.#p89?this.onClickStoreItem(s):t===this.#p57&&this.#p26===k12&&null!==(s=this.#p57.M73())&&this.M8(s)))}M117(t,s){if(this.#p26!==k25)return this.#P39("Not on attack phase.");s===t.M47()?t.M48():(t.M150()||this.#p89.M17())&&(this.#p102=!0,t.M150()||(this.#p89.M142(),t.M149(!0)),t.M192().then(t=>this.M13(!1)))}#P11(t){"MenuIcon"===t?this.#p100.M189():"Play"===t?"Play"===A0.f4()?this.#P38():(this.#p100.M169(!0),this.#p100.M203(),A0.f19("Play")):"Home"===t?(this.#p100.M204(),this.#p100.M169(!1),A0.f19("Home")):A0.f19(t)}#P26(t){this.clicked_card=t,this.#p102||(this.#p26===k12?this.M8(t):this.#p26===k25&&(t.M196()?this.M26(t):this.M49(t)))}M0(t){t=t.M98().M195().split("_");return["Planet","Horror","Cultists"].includes(t[0])?this.#p41[parseInt(t[1],10)]:null}M49(t){var s,i,h,e=this.M0(t);return null===e?this.M7("Card is not at a cult."):t.M161()&&this.#p89.M4()?this.M71(t):this.#p27!==k50&&this.#p27!==e.M195()?this.M7("You are now attacking "+this.M99(this.#p27)+"."):t.M161()&&e.M148()?this.M7("Cultist is protected by a Horror. You may use a sacrifice."):0===(s=this.#p56.M10()).length?t.M176()?(h=(i=t.M159())===k39?"Pair of identical dice":i===k32?"3 dice run":"4 matching dice",this.#P39("Level "+(i-10)+" Horror &raquo; "+h+".")):t.M161()?this.#P39("Cultist &raquo; 1 Die | 2+ Matching Dice | 3+ Dice Run | Precision | Sacrifice"):this.M7("Select a die, or dice combination, before attacking a card."):this.M50(s,t)?(this.#p27===k50&&(this.#p27=e.M195(),e.M65(!0),this.#p89.M203()),void this.M11(e,t)):1===s.length?this.M7("Die cannot be used against this card."):this.M7("Dice combination cannot be used against this card.")}M7(t){this.#P39(t),this.#p56.M6()}M11(s,i){this.#p56.M32(),this.#p5=!0,i.M161()&&(this.#p91+=i.M159()),this.#P8(k8,1,t=>{s.M119(i),this.#p15.M178(i)}).then(t=>{if(this.#p89.M203(),this.#p56.M66()&&1===this.#p43){if(s.M124())return this.#P39("Starting 2nd attack on "+this.M99(this.#p27)+"..."),this.#p56.M67(),this.M22().then(t=>{this.#p89.M203()});this.#p56.M92(!0),this.#p102=!1}})}M99(t){if(t!==k50)return t instanceof E6&&(t=t.M195()),k38[t].toUpperCase()}M50(t,s){var i=s.M159(),h=this.#p56;return s.M161()?!!(h.M129(t,i)||h.M153(t,i)||h.M186(t,i)||h.M77(t,i)):!!s.M176()&&(i===k39?2===t.length&&0!==h.M185(t):i===k32?3===t.length&&h.M199(t):4===t.length&&0!==h.M185(t))}#P12(t){this.#p102||(t===this.#p40?null!==this.#p7?this.M27("reshuffle"):this.M24():t===this.#p22?null!==this.#p7&&this.M27("discard"):t===this.#p15&&this.#p89.M189())}#P38(){this.#p102||(this.#p102=!0,this.#p42=!1,this.#p7=null,this.#p91=0,this.#p41.forEach(t=>t.M197()),this.#p38.M204(),this.#p100.M204(),this.#p100.M121(!1),this.#p56.M197(),this.#P6(),this.#p101.M197(),this.#p101.M180(),this.#P21(),this.#p16=[],this.#p22.M168(k6),this.#p15.M168(k6),this.M165(),setTimeout(()=>{this.#p100.M121(!0),this.#p22.M168(k6),this.#p15.M168(k6)},k11*k6))}M80(){var s=k50;return this.#p41.forEach(t=>{t.M62()&&(s=t.M195())}),s}M165(){this.#p90+=1,this.#p102=!0;var t=this.M80();if(t!==k50)return this.M166(!1,k14,t);this.#p26=k35,this.#p27!==k50&&this.#p41[this.#p27].M65(!1),this.#p27=k50,this.#p43=0,this.#p5=!1,this.#p56.M67(),this.#p56.M92(!0),this.#p89.M204();var s=0;this.#p41.forEach(t=>{s+=t.M147()?1:0,t.M18()}),this.M137(s)}M137(t){if(this.#p40.M179())return this.M166(!0);this.#P7(this.#p40,this.#p57,k11+t).then(t=>{this.#p57.M73().M132(!0),this.#p26=k12,this.#p102=!1})}M8(s){if(!s.M201(this.#p57))return this.#P39("Place cards from the draw row.");this.#p102=!0,s.M196()&&this.#P7(this.#p40,this.#p57,1),this.M51().then(t=>(this.#p102=!1,s.M161()&&s.M98().M188()?this.M166(!1,k14,s.M175()):this.#p57.M179()?this.M22():void this.#p57.M73().M132(!0)))}M51(){var t=this.#p57.M85(),s=(t.M132(!0),this.#p41[t.M175()]);return t.M161()?this.M12(s,t):t.M196()?this.M21(s,t):this.M20(s,t)}M20(s,i){if(s.M75()<i.M159()-10)return this.M138(i);if(!s.M148())return this.#P8(k8,1,t=>{s.M145(i)});const h=s.M125();return h.M159()<i.M159()?this.#P8(k8,1,t=>{s.M119(h),this.#p22.M178(h)}).then(t=>{s.M145(i)}):this.#P8(k8,1,t=>{this.#p22.M178(i)})}M12(s,i){return this.#P8(k8,1,t=>{s.M123(i)})}M21(s,i){return this.#P8(k8,1,t=>{s.M146(i,this.#p90)})}M138(i){return this.#P8(k8,1,t=>{var s=i.M98();null!==s&&s.M119(i),this.#p15.M178(i)}).then(()=>{this.#p26!==k12&&this.#p89.M203()})}M22(){return this.#p102=!0,this.#p26=k17,this.#p56.M172(),this.#p56.M205().then(t=>{this.M13(t)})}M13(t=null){var s=!1===t;null!==t&&!1!==t||(t=this.#p56.M76());for(var i,h,e=0,p=0;p<t.length;++p)i=t[p],h=this.#p56.M127(i.id),1===i.value?(e+=1,h.M149(!1)):h.M149(!h.M112());e>t.length/2?this.M81(!0,e):s?this.#p102=!1:this.M23()}M23(){this.#p26=k25,this.#p43+=1,this.#p5=!1,this.#p89.M203(),this.M202(),this.#p102=!1}M81(i,h=0){const e=1+this.#p56.M130();var t="You suffred an injury: ";this.M198(t+=i?"to many 1s.":"no defeated targets.").then(()=>{var t,s;e===k24?this.M166(!1,k9):(t=!0,i&&0<this.#p59&&(s=this.#p59*h,this.#p15.M118()>=s?(t=!1,this.#P39("Paying "+s+" trophies to not lose a die."),this.#P8(1,s,()=>{this.#p22.M178(this.#p15.M57())})):this.#P39("Cannot pay "+s+" trophies to not lose a die.")),t&&this.#p56.M152(),this.M165())})}M198(t){return this.#p38.M198(t),new Promise((t,s)=>{this.#p58=()=>{this.#p58=null,this.#p38.M122(),t()}})}M166(t,s=null,i=null){this.#p42=!0,this.#p102=!1,this.#p38.M122();var h="Round "+this.#p90+" &raquo; ";t?this.#p38.M105(h+"Well done! You fought with courage and wisdom."):s===k9?this.#p38.M105(h+"You suffered to many injuries and died.."):s===k14&&(this.#p41[i].M63(!0),this.#p38.M105(h+"The Cultists of "+this.M99(i)+" mannaged to summon an Elder God. Darkness reigns!"))}M24(){return this.#p26!==k25?this.#P39("Round "+this.#p90+" &raquo; Not the time to draw cards."):(this.#p89.M204(),!this.#p5&&this.M9()?this.M81(!1):void this.M165())}M9(){var s=!1;return this.#p27===k50?this.#p41.forEach(t=>{t.M124()&&(s=!0)}):s=this.#p41[this.#p27].M124(),s}onNewDie(t){var s=t.M113();this.#p55.appendChild(s),A0.f0(s,t)}onClickStoreItem(t){var s,i=this.#p15.M118(),t=this.#p89.M171(t,i,this.#p91);if(null!==t){const h=t.item_code;return h===k15?this.#P39("Requested &raquo; Alignment Control."):h===k16?this.#P39("Requested &raquo; Sacrifice."):t.status===k18?(s="Not enough resources &raquo; Needed: ",this.#p44?s=(s+=t.trophies_cost+" trophies")+" and "+t.blood_cost+" blood":s+=t.item_cost+" trophies",this.#P39(s+".")):void(this.M25(h)&&(s=t.item_cost,isNaN(s)||(this.#p89.M204(),this.M206(s,h,{blood_cost:t.blood_cost,nr_trophies:i}).then(()=>{this.M53(h)}))))}}M25(t){return t===k26?this.#p26!==k25?(this.#P39("Not on attack phase."),!1):this.#p27!==k50||(this.#P39("Not attacking a cult, yet."),!1):t===k34||t===k42||(t===k27?0!==this.#p56.M130()||(this.#P39("You have no dead dice."),!1):t===k27||(t===k19?this.#p26!==k25||(this.#P39("Cannot buy artifac during attack."),!1):(this.#P39("Sorry, not implemented."),!1)))}M70(){const s=[];return this.#p41.forEach(t=>s.push(t.M19())),{round:this.#p90,attack:0===this.#p43?"No":this.#p43,attacking:this.#p27!==k50?this.M99(this.#p27):"None",funds:this.#p15.M118(),injuries:this.#p56.M130()+"/"+k24,blood:this.#p91,dead:s}}M52(){this.#p7.M96(!1),this.#p7=null}M26(t){if(t.M116())this.M52();else{var s=this.M0(t);if(s.M64()!==this.#p90&&this.#p3!==k5){if(this.#p3===k7&&s.M124())return this.#P39("Planet is protected by Cultists and/or Horror.");if(this.#p3===k3&&s.M148())return this.#P39("Planet is protected by Horror.");if(this.#p3===k2&&s.M110())return this.#P39("Planet is protected by Cultists.")}if(!this.#p89.M3())return this.#P39("Request an ALIGNMENT CONTROL from the store.");null!==this.#p7&&this.M52(),t.M96(!0),this.#p7=t}}M71(t){if(!this.#p89.M4())return this.#P39("Request a Sacrifice from the store.");const s=this.M0(t);var i=this.#p89.M30(t),h=this.#p15.M118(),e=0;if(h<i){if(!this.#p44)return this.#p89.M60(),this.#P39("Not enough trophies to sacrifice this Cultist. Needed: "+i+".");if((e=this.#p89.M89(i,h))>this.#p91)return this.#p89.M60(),this.#P39("Not enough trophies and blood to sacrifice this Cultist. Needed: "+i+" or "+i+" + "+e+".")}return this.M206(i,k16,{card:t,blood_cost:e,nr_trophies:h}).then(()=>{this.#p91+=t.M159(),this.M53(k16,{card:t,cult:s})})}M27(t){const s=this.M0(this.#p7);var i=s.M64()===this.#p90,i=this.#p89.M31(t,i),h=this.#p15.M118(),e=0;if(h<i){if(!this.#p44)return this.M52(),this.#p89.M61(),this.#P39("Not enough trophies to "+t+" planet. Needed: "+i+".");if((e=this.#p89.M89(i,h))>this.#p91)return this.#p89.M61(),this.#P39("Not enough trophies and blood to "+t+" planet. Needed: "+i+" or "+i+" + "+e+".")}return this.M206(i,k15,{action:"discard"===t?"destroy":"return",suit:this.#p7.M175(),blood_cost:e,nr_trophies:h}).then(()=>{this.M53(k15,{action:t,cult:s})})}M206(t,s,i=null){var h,e,p=i.nr_trophies,r="";return p<t?(e=i.blood_cost,this.#p91-=e,0<(t=p)&&(r=p+" trophies and "),r+=e+" blood"):r=t+" trophies",r="Paying "+r+" ",s===k16?(h=k0,this.#P39(r+"to sacrifice "+i.card.M159()+" of "+this.M99(i.card.M175())+".")):s===k15?(h=k1,this.#P39(r+"to "+i.action+" Planet of "+this.M99(i.suit)+".")):(h=k4,this.#P39(r+"for store item: "+this.#p89.M107(s)+".")),this.#P8(h,t,()=>{this.#p22.M178(this.#p15.M57())})}M53(t,s=null){if(t===k42){const i=this.#p56.M128();return this.#p26===k25?(i.M182(!1),i.M205().then(t=>{this.#p89.M203(),i.M149(1!==t),this.M13(!1)})):i.M182(!0),i}if(t===k26)return this.#p27!==k50&&this.#p41[this.#p27].M65(!1),this.#p27=k50,this.#p43=0,this.#p56.M67(),this.#p89.M203(),this.M22().then(()=>{});if(t===k34)return this.#p89.M141(),null;if(t===k27){const h=this.#p56.M155();return this.#p26===k25?(h.M182(!1),h.M205().then(t=>{this.#p89.M203(),h.M149(1!==t),this.M13(!1)})):h.M182(!0),h}if(t===k19)return this.#p56.M151().M182(!0);if(t!==k15)return t===k16?(this.#p89.M90(),this.#p5=!0,this.#P8(k8,1,()=>{s.cult.M119(s.card),this.#p22.M178(s.card),this.#p89.M203()}),s.card):void 0;{const e=this.#p7;return s.cult.M119(e),this.M52(),this.#p89.M91(),"reshuffle"===s.action?this.#P8(k8,1,()=>{this.#p40.M178(e)}).then(()=>{this.#p40.M83()}):"discard"===s.action&&this.#P8(k8,1,()=>{this.#p22.M178(e)}),e}}M202(){var s,h;null!==this.#p16&&(console.debug("Help >> Round:",this.#p90),s=Array([],[],[],[]),this.#p16.forEach(t=>s[t.M175()].push(t.M159())),h=0,s.forEach(t=>{var s=this.M99(h++)[0],i=(s+=" = ",!1);t.sort((t,s)=>s-t),t.forEach(t=>{t===k45?s+=t+" |":(t<=10&&(i||(i=!0,s+=" |")),s+=" "+t)}),console.debug(s)}))}}class E0 extends E3{#p110=null;#p45=[];#p92=0;#p17=!1;#p103=null;#p46=null;constructor(t){super(t,"column","center","center",!0),this.#p110=t,this.#p103=new C0(this.#p110+"_Base",!0),this.M131(this.#p103);t=this.#p103.M113();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p46=document.createElement("p"),this.#p46.classList.add("Hidden"),t.appendChild(this.#p46)}M54(){return this.#p103.M113()}M167(){return g7(this.#p45)}M55(t){this.#p17=t,0<this.#p45.length&&this.#p45[this.#p45.length-1].M132(t)}M56(t,s){this.M33(t,s),this.M2(),this.#P9(),this.#p46.style.fontSize=Math.round(.12*t)+"px"}#P9(){const[s,i]=this.#p103.M94();this.#p45.forEach(t=>t.M95(s,i))}M72(){var s=1;this.#p45.forEach(t=>t.M135(s++))}M168(t){this.#p92=t}M82(t){this.M178(t,!0)}M37(t){this.M178(t,!1)}M178(t,s=!0){var i,h;this.#p45.includes(t)||(this.#p45[s?"push":"unshift"](t),[i,h]=this.#p103.M94(),t.M96(!1),t.M132(!1),t.M95(i,h),s?t.M135(100+this.#p45.length):t.M135(0),t.M97(this),g14(this.#p92).then(t=>{this.#p46.innerHTML=this.#p45.length,this.M72(),this.M14()}))}M38(){return this.#p103.M94()}M57(){var t;return 0===this.#p45.length?null:((t=this.#p45.pop()).M135(100+this.#p45.length),t.M133(!1),this.M14(),this.#p46.innerHTML=this.#p45.length,t)}M14(){var t=this.#p45.length-1;if(0<=t){var s=this.#p45[t];for(s.M133(!1),s.M132(this.#p17),--t;0<=t;--t)(s=this.#p45[t]).M133(!0),s.M132(!1)}}M179(){return 0===this.#p45.length}M118(){return this.#p45.length}M119(t){if(this.#p45.includes(t))return g2(this.#p45,t),t.M133(!1),this.#p46.innerHTML=this.#p45.length,this.M14(),t}M100(t){this.#p46.classList[t?"remove":"add"]("Hidden"),t&&(this.#p46.innerHTML=this.#p45.length)}M39(t){for(var s;0<this.#p45.length;)s=this.#p45[0],this.M119(s),t.M178(s)}M47(){return this.#p103.M113()}M83(){1<this.#p45.length&&(g6(this.#p45),this.M72(),this.M14())}M139(t){this.M113().classList[t?"add":"remove"]("Highlight")}}class E1 extends E3{#p110=null;#p47=0;#p45=[];#p28=!0;constructor(t,s,i=!1){super(t,"row","evenly","center",!0),this.#p110=t,this.#p47=s,i&&null!==this.M113()&&this.M113().classList.add("Clickable")}M84(t){this.#p28=t}M178(t,s=!0){if(this.#p45.length!==this.#p47&&!this.#p45.includes(t))return t.M97(this),t.M132(this.#p28),t.M135(100+this.#p45.length),s?this.#p45.push(t):this.#p45.unshift(t),this.M131(t,s),t}M119(t){if(this.#p45.includes(t))return g2(this.#p45,t),this.M78(t),t.M69(),t}M120(t){for(var s;0<this.#p45.length;)s=this.#p45[0],this.M119(s),t.M178(s)}M28(t){return this.#p45.filter(t)}M29(){return this.#p45.filter(t=>t.M116())}M1(){this.#p45.filter(t=>t.M116()).forEach(t=>t.M96(!1))}M118(){return this.#p45.length}M167(){return g7(this.#p45)}M101(t){return 0!==this.#p45.length&&this.#p45[0]===t}M73(){return 0===this.#p45.length?null:this.#p45[0]}M85(){return 0===this.#p45.length?null:this.M119(this.#p45[0])}M179(){return 0===this.#p45.length}M188(){return this.#p45.length===this.#p47}}class C6{#p45=[];#p16=[];#p48=0;#p29=0;constructor(t,s=null){this.#p48=t,this.#P30(),null!==s&&this.DiscardCards(s)}#P30(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M87(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E5(h++,{id:p,symbol:this.M74(p),color:i},{nr:s,symbol:this.M58(s)}),this.#p45.push(t),this.#p29+=1;for(var r=0,n=1;n<=this.#p48;++n)t=new E5(h++,{id:k37,symbol:this.M74(k37),color:e[r]},{nr:k31,symbol:this.M58(k31)}),this.#p45.push(t),this.#p29+=1,r=(1+r)%e.length}M86(t){if(!(0<this.#p16.length))return t=this.#p45.filter(t),this.#p29-=t.length,t.forEach(t=>{g2(this.#p45,t)}),t}f17(s,i){this.M102(t=>t.M174(s,i))}M102(t){this.#p45.forEach(t),this.#p16.forEach(t)}M180(){g6(this.#p45)}M181(){var t;return 0===this.#p45.length?null:(t=g0(this.#p45),this.#p16.push(t),t)}M197(){for(;this.#p16.length;)this.#p45.push(this.#p16.pop());this.#p45.forEach(t=>t.M197())}M74(s){return k47.filter(t=>t.id===s).pop().symbol}M87(s){return k47.filter(t=>t.id===s).pop().color}M58(s){return s===k31||11<=s&&s<=13||s===k45?k41.filter(t=>t.value===s).pop().symbol:s}M88(s,i){this.M102(t=>t.M174(s,i))}M28(t){t=this.#p45.filter(t);return t.forEach(t=>{g2(this.#p45,t),this.#p16.push(t)}),t}M118(){return this.#p45.length}M40(){return this.#p29}M15(){for(var t=[];0<this.#p45.length;){var s=this.#p45.pop();this.#p16.push(s),t.push(s)}return t}}class C7{#p65=null;#p104=null;#lst_elements=null;constructor(t,s){this.#p65=t,this.#p104=s,this.#lst_elements=Array.from(t.children),this.#p104.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M103(){return g7(this.#lst_elements)}M203(){this.#p65.style.right=0}M204(){this.#p65.style.right=-1.1*this.#p65.offsetWidth+"px"}M189(){"0px"===this.#p65.style.right?this.M204():this.M203()}M169(t=!0){this.#p104.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M121(t){g13("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p65=null;#p93=null;#p105=null;#p49=0;#p94=0;#p95=!1;constructor(t){this.#p65=document.createElement("div"),this.#p65.id="Messenger",this.#p93=document.createElement("p"),this.#p65.appendChild(this.#p93),this.#p105=document.createElement("div"),this.#p105.classList.add("Clickable"),this.#p105.classList.add("Hidden"),this.#p65.appendChild(this.#p105),this.#p49=t<1e3?1e3*t:t}M113(){return this.#p65}M47(){return this.#p105}f17(t,s,i,h){this.#p65.style.width=t+"px",this.#p65.style.height=s+"px",this.#p65.style.left=h+"px",this.#p93.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M204()}M204(){this.#p95,this.#p65.style.top=-1.1*this.#p65.offsetHeight+"px",this.#p95&&(this.#p95=!1,setTimeout(()=>{this.#p105.classList.add("Hidden")},500))}M16(t,s){0<this.#p49&&this.M104("<span>"+t+"</span>: "+s)}M104(t){this.#p95||0<this.#p49&&(clearTimeout(this.#p94),this.#p94=setTimeout(this.M204.bind(this),this.#p49),this.#p93.innerHTML=t,this.#p65.style.top=0)}M105(t){clearTimeout(this.#p94),this.#p93.innerHTML=t,this.#p65.style.top=0}M198(t){clearTimeout(this.#p94),this.#p95=!0,this.#p105.classList.remove("Hidden"),this.M105(t)}M122(){this.#p95&&(this.#p95=!1,this.#p105.classList.add("Hidden"),this.M204())}}class E2 extends E3{#p106=null;#p70=null;#p60=null;constructor(){super("PilesRow","column","evenly","center",!0),this.#p106=new E0("Draw"),this.#p70=new E0("Discard"),this.#p60=new E0("Trophies"),this.#p106.M100(!0),this.#p70.M100(!0),this.#p60.M100(!0),this.M131(this.#p106),this.M131(this.#p70),this.M131(this.#p60)}f17(t,s,i,h,e,p){super.f17(t,s,i,h),this.M33(t,s/3),this.M2(),this.M68(t=>{t instanceof E0&&t.M56(e,p)})}M106(){return this.#p106}M59(){return this.#p70}M41(){return this.#p60}M103(){return[this.M113(),this.#p106.M113(),this.#p70.M113(),this.#p60.M113(),this.#p106.M54(),this.#p70.M54(),this.#p60.M54()]}}class C4{#p65=null;#p96=0;#p30=0;#p10=0;constructor(t){this.#p65=t}M197(){this.#p96=0,this.#p30=0,this.#p10=0,this.#P28()}M190(t,s,i){"cec"===t?(this.#p96+=s.M159(),s.M79()&&(this.#p30+=1,this.#p10+=s.M159())):"ecc"!==t&&"stc"!==t||i.forEach(t=>this.#p96-=t.M159()),this.#P28()}#P28(){g13("txt_score").innerHTML=this.#p96,g13("txt_nr_captures").innerHTML=this.#p30,g13("txt_percent_captures").innerHTML=Math.round(this.#p10/MAX_CAPTURES_VALUE*100)}M170(){return this.#p96}}const k18=-1,k48=0,k42=1,k34=2,k26=3,k27=4,k19=5,k15=6,k16=7,k28=[{id:"sacrifice",txt:"Sacrifice",cost:"cultist",code:k16},{id:"alignment_control",txt:"Alignment Control",cost:"R=2/4 D=5/10",code:k15},{id:"spirit_die",txt:"Spirit Die",cost:2,code:k42},{id:"devils_luck",txt:"Devil's Luck",cost:3,code:k34},{id:"time_shift",txt:"Time Shift",cost:5,code:k26},{id:"grow_flesh",txt:"Grow Flesh",cost:5,code:k27},{id:"buy_artifact",txt:"Buy Artifact",cost:10,code:k19}];class C5{#p110=null;#p65=null;#p79=null;#p71=!0;#p6=0;#p50=null;#p0=!1;#p1=!1;#p44=0;constructor(t,s,i){this.#p65=t,this.#p110=t.id,this.#p50=s,this.#p44=i,this.M140()}M107(t){return this.#P16(t).txt.toUpperCase()}f17(t,s,i){this.#p65.style.width=t+"px",this.#p65.style.height=s+"px",this.#p65.style.left=i+"px",this.#p65.style.fontSize=Math.round(.015*t)+"px"}M140(){this.#p79=document.createElement("header"),this.#p65.appendChild(this.#p79);var t,s=[{id:"round",txt:"Round"},{id:"attack*",txt:"Attack"},{id:"injuries",txt:"Injuries"},{id:"info",txt:"Info"}];this.#p44&&s.push({id:"blood",txt:"Blood"});for(t of s){var i=document.createElement("span");i.innerHTML=t.txt+":",this.#p79.appendChild(i),(i=document.createElement("span")).id="store_"+t.id,i.classList.add("StoreInfo"),this.#p79.appendChild(i)}var e=0;k28.forEach(t=>{var s,i=document.createElement("div");i.id=t.id,i.dataset.idx=e++,i.classList.add("Clickable");for(s of["txt","cost"]){var h=document.createElement("txt"===s?"p":"span");h.innerHTML=t[s],i.appendChild(h)}this.#p65.appendChild(i)})}#P28(){var t,s=this.#p50();for(t in s){var i=g13("store_"+t);null!==i&&(i.innerHTML=s[t])}return g13("store_attack*").innerHTML=s.attack+"/"+s.attacking,g13("store_info").innerHTML=s.dead.join(" "),s.funds}M42(){return Array.from(g12("div",this.#p65))}M203(){this.#p71=!0,this.#p65.style.bottom="";const i=this.#P28();k28.forEach(t=>{var s;"number"==typeof t.cost&&(s=g11("span",g13(t.id)),t=t.cost<=i,s.classList[t?"remove":"add"]("NoFunds"))})}M204(){this.#p71=!1,this.#p65.style.bottom=-this.#p65.offsetHeight+"px"}M189(){this.#p71?this.M204():this.M203()}M171(t,s,i){var h,e,t=k28[t.dataset.idx];return"number"==typeof t.cost?(h=Math.max(0,t.cost-s),e=Math.round(Math.pow(this.#p44,h)),{status:(this.#p44?e<=i:t.cost<=s)?k48:k18,item_code:t.code,item_cost:t.cost,blood_cost:e,trophies_cost:t.cost-h}):t.code===k15?(this.#p0=!0,{status:k48,item_code:k15}):t.code===k16?(this.#p1=!0,{status:k48,item_code:k16}):null}M89(t,s){return Math.pow(2,Math.max(0,t-s))}M30(t){return t.M159()}M31(t,s){t="reshuffle"===t?2:5;return s||(t*=2),t}#P16(s){var t=k28.filter(t=>t.code===s);return 1!==t.length?null:t.pop()}M108(t){t=this.#P16(t);return null!==t?t.cost:NaN}M141(t=1){this.#p6+=t}M17(){return 0<this.#p6}M3(){return this.#p0}M4(){return this.#p1}M142(){0!==this.#p6&&(--this.#p6,this.M203())}M60(){this.#p1=!1}M90(){this.#p1&&(this.#p1=!1)}M61(){this.#p0=!1}M91(){this.#p0&&(this.#p0=!1)}}class E6 extends E3{#p110=null;#p65=null;#p80=null;#p81=null;#p61=null;#p23=0;#p24=!1;#p18=0;constructor(t){super("Cult_"+t,"row","start","center",!0),this.#p110=t,this.#p65=this.M113(),this.#p65.classList.add("Cult"),this.#p65.classList.add("Cult_"+t),this.#p80=new E1("Planet_"+t,1),this.#p81=new E1("Horror_"+t,1),this.#p61=new E1("Cultists_"+t,k20+k23),this.#p61.M34((t,s)=>s.M159()-t.M159()),this.#p80.M113().classList.add("Planet"),this.#p81.M113().classList.add("Horror"),this.#p61.M113().classList.add("Cultists"),this.M131(this.#p80),this.M131(this.#p81),this.M131(this.#p61)}M195(){return this.#p110}f17(t,s,i,h,e){this.#p80.M174(e,s),this.#p81.M174(e,s),this.#p61.M174(t-2*e,s),super.f17(t,s,i,h),[this.#p80,this.#p81,this.#p61].forEach(t=>t.M2())}M103(){return[this.#p65,this.#p80.M113(),this.#p81.M113(),this.#p61.M113()]}M143(){return this.#p80}M144(){return this.#p81}M109(){return this.#p61}M110(){return 0<this.#p61.M118()}M62(){return this.#p61.M118()>=k23}M75(){return this.#p61.M118()}M63(s){this.#p61.M167().forEach(t=>t.M96(s))}M64(){return this.#p23}M120(t){this.#p80.M120(t),this.#p81.M120(t),this.#p61.M120(t)}M123(t){return this.#p61.M178(t),this.#P13(),t}M197(){this.#p61.M113().classList.remove("MaxCultists"),this.#p18=0}#P13(){var t=this.#p61.M113();this.M62()?t.classList.add("MaxCultists"):t.classList.remove("MaxCultists")}M145(t){return this.#p81.M178(t)}M146(t,s){this.#p80.M178(t),this.#p23=s,t.M136(!0)}M18(){0<this.#p80.M118()&&this.#p80.M73().M136(!1)}M119(t){return t.M201(this.#p61)?this.#P17(t):t.M201(this.#p81)?this.#P23(t):t.M201(this.#p80)&&this.#P22(t),t}#P17(t){return this.#p61.M119(t),this.#P13(),this.#p18+=1,t}#P22(){return this.#p80.M179()?null:(this.#p23=0,this.#p80.M85())}#P23(){return this.#p81.M179()?null:this.#p81.M85()}M147(){return 0<this.#p80.M118()}M148(){return 0<this.#p81.M118()}M124(){return this.M148()||this.M110()}M125(){return this.#p81.M73()}M65(t){function s(t,s){t.M113().classList[s?"add":"remove"]("CultUnderAttack")}this.#p24=t,s(this.#p81,t),s(this.#p61,t)}M19(){return this.#p18}}class E7 extends C0{#p110=null;#p65=null;#p75=null;#p62=null;#p53=!1;#p87=0;#p82=!1;#p72=!1;#p63=!1;#p32=0;#p107=!1;#p108=!1;#p97=null;constructor(t){super("Die_"+t,!0),this.#p110=t,this.#p97=new C3(6,0,0),this.#p97.M35().forEach(t=>{var s=1+this.#p97.GetFaceIdx(t);1===(t.innerHTML=s)&&t.classList.add("IsOne")}),this.#p97.M46(300),this.prism=this.#p97,this.#p65=this.M113(),this.#p65.classList.add("Die"),this.#p75=document.createElement("div"),this.#p75.classList.add("DieBody"),this.#p75.classList.add("Clickable"),this.#p75.dataset.id=t,this.#p75.appendChild(this.#p97.M113()),this.#p62=document.createElement("p"),this.#p62.classList.add("Clickable"),this.#p62.dataset.id=t,this.#p65.appendChild(this.#p75),this.#p65.appendChild(this.#p62)}M174(t,s){super.M174(t,s),this.M126()}M126(){var t;0!==this.#p75.offsetHeight&&(t=Math.round(.85*this.#p75.offsetHeight),this.#p75.style.fontSize=Math.round(.5*t)+"px",this.#p62.style.fontSize=Math.round(.33*t)+"px",this.#p97.M174(t,t))}M195(){return this.#p110}M47(){return this.#p75}M42(){return[this.#p75,this.#p62]}M48(){this.M96(!this.#p53)}M116(){return this.#p53}M96(t){t&&this.#p107||(this.#p53=t,this.#p75.classList[t?"add":"remove"]("Selected"))}M182(t){return t&&(this.M96(!1),this.M149(!1)),this.#p107=t,this.#p75.classList[t?"add":"remove"]("Used"),this}M191(){return this.#p107}M149(t){this.#p82=t,this.#p62.classList[t?"remove":"add"]("Hidden"),this.#p62.innerHTML=t?"&larr; &rarr;":""}M205(){return this.M183()?(this.#p62.innerHTML="",this.#P18(!1),this.#p72=!0,this.#p87=0,new Promise((t,s)=>{this._Roll(1,t)})):Promise.reject(0)}_Roll(t,s){this.#p97.M45(!0),1===t||t<6?(t+=1,setTimeout(this._Roll.bind(this,t,s),k13)):(this.#p72=!1,this.#p87=1+this.#p97.M156(),setTimeout(()=>{this.#P18(!0),s(this.#p87)},k13))}#P18(s){this.#p97.M35().forEach(t=>{s?this.#p97.GetFaceIdx(t)!==this.#p87-1&&t.classList.add("NotFront"):t.classList.remove("NotFront")})}M192(){return this.M150()?(this.#p32+=1,this.M149(!1),this.M205()):Promise.reject(0)}M197(t=!1){this.#p87=0,this.#p32=0,this.#p72=!1,this.M149(!1),this.M96(!1),this.M111(!1),this.M182(!1),this.M184(!!t&&this.#p108)}M159(){return this.#p87}M111(t=!0){this.#p63=t,this.#p65.classList[t?"add":"remove"]("Disabled")}M183(){return!(this.#p63||this.#p53||this.#p72||this.#p107)}M150(){return this.M183()&&this.#p82}M112(){return 0<this.#p32}M184(t){this.#p108=t,this.#p62.classList[t?"add":"remove"]("Temp")}M193(){return this.#p108}}class E4 extends E3{#p64=[];#p33=0;#p11=[];#p8=[];#p19=[];#p83=0;#p34=null;#p51=0;#p35=0;constructor(t,s){super("DiceRow","column","evenly","center",!0),this.#p33=t,this.#p34=s;for(var i=0;i<t;++i)this.M194(new E7(i));this.#p83=t,this.M92(!0)}f17(t,s,i,h,e,p){this.#p51=e,this.#p35=p,this.M33(this.#p51,this.#p35),super.f17(t,s,i,h)}M103(){var t=this.#p64.map(t=>t.M113());return t.push(this.M113()),t}M43(){var s=[];return this.#p64.forEach(t=>s=s.concat(t.M42())),s}M127(s){var t=this.#p64.filter(t=>t.M195()===s);return 1===t.length?t[0]:null}M5(t){return this.#p64[parseInt(t.dataset.id,10)]}M197(){for(this.M67();0<this.#p19.length;)this.M155();for(;this.#p64.length>this.#p33;)this.M152(!1);this.M172()}M172(){this.#p64.forEach(t=>{t.M197(!0)})}M205(){const s=[];return this.#p64.forEach(t=>{t.M191()||s.push(t.M205())}),Promise.all(s).then(t=>(this.#p64.forEach(t=>{t.M149(1!==t.M159())}),Promise.resolve(this.M76())))}M76(){var s=[];return this.#p64.forEach(t=>{t.M191()||s.push({id:t.M195(),value:t.M159()})}),s}M128(){var t=this.M151();return this.#p8.push(t),t.M182(!1),t.M184(!0),t}M151(){var t;return 0<this.#p11.length?t=this.#p11.pop():(t=new E7(++this.#p83),this.#p34(t)),t.M111(!1),t.M174(this.#p51,this.#p35),this.M194(t)}M194(t){return this.M131(t),this.#p64.push(t),t.M197(),t}M152(t=!0){var s;return 0===this.#p64.length?-1:((s=this.#p64.shift()).M111(!0),this.M78(s),(t?this.#p19:this.#p11).push(s),this.#p64.length)}M10(){const s=[];return this.#p64.forEach(t=>{t.M116()&&s.push(t.M159())}),s}M129(t,s){return 1===t.length&&t[0]>=s}M185(t){if(t.length<2)return 0;for(var s=t[0],i=1;i<t.length;++i)if(t[i]!==s)return 0;return s}M199(t){if(t.length<3)return!1;for(var s=g7(t).sort(),i=0,h=1;h<s.length;++i,++h)if(s[i]+1!==s[h])return!1;return!0}M153(t,s){var i=this.M185(t);return 0!==i&&i*t.length>=s}M154(t){return t.reduce((t,s)=>t+s,0)}M186(t,s){return!!this.M199(t)&&this.M154(t)>=s}M77(t,s){return this.M154(t)===s}M92(s){this.#p64.forEach(t=>{t.M182(s)})}M93(s){this.#p64.forEach(t=>{t.M149(s)})}M32(){this.#p64.forEach(t=>{t.M116()&&t.M182(!0)})}M6(){this.#p64.forEach(t=>{t.M116()&&t.M96(!1)})}M66(){var s=!0;return this.#p64.forEach(t=>{t.M191()||(s=!1)}),s}M67(){for(;0<this.#p8.length;){var t=this.#p8.pop();g2(this.#p64,t);this.#p11.push(t),this.M78(t),t.M111(!0)}}M155(){return 0===this.#p19.length?null:this.M194(this.#p19.pop())}M130(){return this.#p19.length}}const k10=1.4,k43=5,k44=0,k8=0,k4=.25,k0=.66,k1=.25,DrawCardsToCardRow_TIME_FACTOR=1,k13=g8("DICE_ROTATE_TIME",!0),k6=g8("CARD_TRANSLATE_TIME",!0),k49=4,k23=5,k20=2,k21=3,k11=3,k24=3,k50=-1,k35=0,k12=1,k17=2,k25=3,k9=0,k14=1,k5=0,k2=1,k3=2,k7=3,k29=0,k30=1,k22=2,k36=3,k37=4,k38=["hearts","spades","diamonds","clubs","joker"],k31=0,k39=11,k32=12,k40=13,k45=14,k46="Red",k33="Black",k47=[{id:k29,symbol:"&hearts;",color:k46},{id:k30,symbol:"&spades;",color:k33},{id:k22,symbol:"&diams;",color:k46},{id:k36,symbol:"&clubs;",color:k33},{id:k37,symbol:"",color:""}],k41=[{value:k39,symbol:"J"},{value:k32,symbol:"Q"},{value:k40,symbol:"K"},{value:k45,symbol:"A"},{value:k31,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});